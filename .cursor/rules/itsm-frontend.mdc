# itsm-prototype

---

description: "ITSMå‰ç«¯å¼€å‘è§„èŒƒï¼Œé€‚ç”¨äºåŸºäºReactã€Next.jsã€TypeScriptã€Ant Designå’ŒTailwind CSSçš„ITSMç³»ç»Ÿ"
globs:

- "src/app/**/*"
- "src/components/**/*"
- "src/lib/**/*"
- "src/hooks/**/*"
- "src/types/**/*"
- "src/styles/**/*"
alwaysApply: false

---

## 1. æŠ€æœ¯æ ˆè§„èŒƒ

### 1.1 æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **æ¡†æ¶**: React 18 + Next.js App Router
- **è¯­è¨€**: TypeScript
- **æ ·å¼**: Tailwind CSS + Ant Design 5.x
- **çŠ¶æ€ç®¡ç†**: Zustand
- **HTTPå®¢æˆ·ç«¯**: Axios
- **æ„å»ºå·¥å…·**: Next.js + Turbopack

## ç›®å½•ç»“æ„

```markdown
itsm-prototype/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ app/                    # Next.js App Router ä¸»ç›®å½•
â”‚       â”œâ”€â”€ layout.tsx          # æ ¹å¸ƒå±€æ–‡ä»¶
â”‚       â”œâ”€â”€ page.tsx            # æ ¹é¡µé¢
â”‚       â”œâ”€â”€ tickets/            # å·¥å•æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ layout.tsx      # å·¥å•æ¨¡å—å¸ƒå±€
â”‚       â”‚   â”œâ”€â”€ page.tsx        # å·¥å•ä¸»é¡µé¢
â”‚       â”‚   â”œâ”€â”€ [id]/           # å·¥å•è¯¦æƒ…é¡µé¢
â”‚       â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚       â”‚   â”‚   â””â”€â”€ edit/
â”‚       â”‚   â”‚       â””â”€â”€ page.tsx
â”‚       â”‚   â”œâ”€â”€ create/         # å·¥å•åˆ›å»ºé¡µé¢
â”‚       â”‚   â”‚   â””â”€â”€ page.tsx
â”‚       â”‚   â””â”€â”€ dashboard/      # å·¥å•ä»ªè¡¨æ¿å­é¡µé¢
â”‚       â”‚       â””â”€â”€ page.tsx
â”‚       â”œâ”€â”€ components/         # å…±äº«ç»„ä»¶
â”‚       â””â”€â”€ lib/                # å·¥å…·åº“
â””â”€â”€ å…¶ä»–é…ç½®æ–‡ä»¶
```

## åŠŸèƒ½æ¨¡å—

1. ä»ªè¡¨ç›˜
2. å·¥å•ç®¡ç†
3. äº‹ä»¶ç®¡ç†
4. é—®é¢˜ç®¡ç†
5. å˜æ›´ç®¡ç†
6. é…ç½®ç®¡ç†
7. æœåŠ¡ç›®å½•
8. çŸ¥è¯†åº“
9. SLAç®¡ç†
10. æŠ¥è¡¨åˆ†æ

## è·¯ç”±æ˜ å°„è§„åˆ™

### å„æ¨¡å—è·¯ç”±è·¯å¾„

- ä»ªè¡¨ç›˜: /dashboard
- å·¥å•ç®¡ç†: /tickets
- äº‹ä»¶ç®¡ç†: /incidents
- é—®é¢˜ç®¡ç†: /problems
- å˜æ›´ç®¡ç†: /changes
- é…ç½®ç®¡ç†: /cmdb
- æœåŠ¡ç›®å½•: /service-catalog
- çŸ¥è¯†åº“: /knowledge-base
- SLAç®¡ç†: /sla
- æŠ¥è¡¨åˆ†æ: /reports

## ç»„ä»¶å‘½åè§„èŒƒ

### é¡µé¢ç»„ä»¶

- ä¸»é¡µé¢: page.tsx
- åˆ—è¡¨é¡µé¢: list/page.tsx
- è¯¦æƒ…é¡µé¢: [id]/page.tsx
- åˆ›å»ºé¡µé¢: create/page.tsx
- ç¼–è¾‘é¡µé¢: [id]/edit/page.tsx

### åŠŸèƒ½ç»„ä»¶

- è¡¨å•ç»„ä»¶: [Module]Form.tsx
- è¡¨æ ¼ç»„ä»¶: [Module]Table.tsx
- æ“ä½œç»„ä»¶: [Module]Actions.tsx

## çŠ¶æ€ç®¡ç†è§„åˆ™

### Reduxç»“æ„

- æ¯ä¸ªæ¨¡å—ç‹¬ç«‹çš„sliceæ–‡ä»¶
- ç»Ÿä¸€çš„actionå‘½å: [MODULE]_[ACTION]_[SUB_ACTION]
- å¼‚æ­¥æ“ä½œä½¿ç”¨createAsyncThunk

## ç»„ä»¶å¯¼å…¥è§„åˆ™

### ç»„ä»¶å¼•ç”¨å±‚çº§è§„èŒƒ

1. åŒçº§ç»„ä»¶å¼•ç”¨: ä½¿ç”¨ç›¸å¯¹è·¯å¾„ `./ComponentName`
2. ä¸‹çº§ç»„ä»¶å¼•ç”¨: ä½¿ç”¨ç›¸å¯¹è·¯å¾„ `./subfolder/ComponentName`
3. ä¸Šçº§ç»„ä»¶å¼•ç”¨: æœ€å¤šå…è®¸å‘ä¸Šä¸¤çº§ `../../ComponentName`
4. è·¨æ¨¡å—ç»„ä»¶å¼•ç”¨: å¿…é¡»é€šè¿‡ `@/components/` æˆ– `@/lib/` åˆ«åå¼•ç”¨

### ç»„ä»¶è·¯å¾„åˆ«åè§„åˆ™

- å…±äº«ç»„ä»¶: `@/components/SharedComponent`
- å·¥å…·åº“: `@/lib/utils` æˆ– `@/lib/services/ServiceName`
- é…ç½®æ–‡ä»¶: `@/config/ConfigName`

## æœåŠ¡å±‚å¼•ç”¨è§„åˆ™

### æœåŠ¡æ–‡ä»¶ç»„ç»‡

- ä¸šåŠ¡æœåŠ¡: `@/lib/services/[module]-service.ts`
- é€šç”¨æœåŠ¡: `@/lib/services/common/[service-name].ts`
- APIæœåŠ¡: `@/lib/api/[module]-api.ts`

### æœåŠ¡å¼•ç”¨è§„èŒƒ

- ç»„ä»¶ä¸­å¼•ç”¨æœåŠ¡: `import { serviceName } from '@/lib/services/service-name'`
- æœåŠ¡é—´å¼•ç”¨: å…è®¸ç›¸å¯¹è·¯å¾„ä½†ä¸è¶…è¿‡ä¸€çº§
- ç¦æ­¢è·¨å±‚çº§æ·±åº¦å¼•ç”¨æœåŠ¡æ–‡ä»¶

## ğŸš¨ é‡è¦è§„åˆ™

### 1. **å¸ƒå±€å±‚çº§è§„èŒƒ**

- âœ… æ ¹å¸ƒå±€: `src/app/layout.tsx` - åŒ…å«å…¨å±€å¸ƒå±€ç»“æ„
- âœ… æ¨¡å—å¸ƒå±€: `src/app/[module]/layout.tsx` - ä½¿ç”¨ `AppLayout` åŒ…è£…é¡µé¢å†…å®¹
- âœ… é¡µé¢æ–‡ä»¶: `src/app/[module]/page.tsx` - ç›´æ¥è¿”å›é¡µé¢å†…å®¹ï¼Œä¸ä½¿ç”¨ `AppLayout`

### 2. **æ–‡ä»¶ç»“æ„è§„èŒƒ**

```
module/
â”œâ”€â”€ layout.tsx              # æ¨¡å—å¸ƒå±€æ–‡ä»¶ï¼Œä½¿ç”¨ AppLayout
â”œâ”€â”€ page.tsx                # æ¨¡å—ä¸»é¡µé¢
â”œâ”€â”€ [id]/                   # è¯¦æƒ…é¡µé¢
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ edit/
â”‚       â””â”€â”€ page.tsx
â”œâ”€â”€ create/                 # åˆ›å»ºé¡µé¢
â”‚   â””â”€â”€ page.tsx
â””â”€â”€ dashboard/              # ä»ªè¡¨æ¿é¡µé¢
    â””â”€â”€ page.tsx
```

### 3. **AppLayoutä½¿ç”¨è§„èŒƒ**

#### âœ… æ­£ç¡®ç”¨æ³•

```tsx
// layout.tsx
import AppLayout from "@/components/AppLayout";

export default function ModuleLayout({ children }: { children: React.ReactNode }) {
  return (
    <AppLayout 
      title="æ¨¡å—æ ‡é¢˜"
      description="æ¨¡å—æè¿°"
      breadcrumb={[
        { title: "é¦–é¡µ", href: "/" },
        { title: "æ¨¡å—æ ‡é¢˜" }
      ]}
    >
      {children}
    </AppLayout>
  );
}

// page.tsx
export default function ModulePage() {
  return (
    <>
      <Card>é¡µé¢å†…å®¹</Card>
      <Modal>å¼¹çª—</Modal>
    </>
  );
}
```

#### âŒ é”™è¯¯ç”¨æ³•

```tsx
// page.tsx - ä¸è¦è¿™æ ·åšï¼
export default function ModulePage() {
  return (
    <AppLayout>  {/* é‡å¤çš„ AppLayout */}
      <div>å†…å®¹</div>
    </AppLayout>
  );
}
```

### 4. **é¢åŒ…å±‘å¯¼èˆªè§„èŒƒ**

#### è‡ªåŠ¨ç”Ÿæˆé¢åŒ…å±‘

ç³»ç»Ÿä¼šæ ¹æ®URLè·¯å¾„è‡ªåŠ¨ç”Ÿæˆé¢åŒ…å±‘å¯¼èˆªï¼Œæ— éœ€æ‰‹åŠ¨æŒ‡å®šã€‚

#### è‡ªå®šä¹‰é¢åŒ…å±‘

å¦‚éœ€è‡ªå®šä¹‰é¢åŒ…å±‘ï¼Œåº”åœ¨æ¨¡å—å¸ƒå±€æ–‡ä»¶ä¸­é€šè¿‡ `breadcrumb` å±æ€§æŒ‡å®šï¼š

```tsx
<AppLayout 
  breadcrumb={[
    { title: "é¦–é¡µ", href: "/" },
    { title: "çˆ¶çº§æ¨¡å—", href: "/parent" },
    { title: "å½“å‰é¡µé¢" }
  ]}
>
  {children}
</AppLayout>
```

## ğŸ” é—®é¢˜æ£€æŸ¥

å¦‚æœå‡ºç°ä»¥ä¸‹é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. **é‡å¤çš„ä¾§è¾¹æ æˆ–å¤´éƒ¨**ï¼š
   - æ£€æŸ¥ `page.tsx` æ˜¯å¦ä½¿ç”¨äº† `AppLayout`
   - ç¡®ä¿åªåœ¨ `layout.tsx` ä¸­ä½¿ç”¨ `AppLayout`

2. **é¢åŒ…å±‘æ˜¾ç¤ºä¸æ­£ç¡®**ï¼š
   - æ£€æŸ¥æ¨¡å—å¸ƒå±€æ–‡ä»¶ä¸­æ˜¯å¦æ­£ç¡®å®šä¹‰äº† `breadcrumb` å±æ€§
   - ç¡®ä¿è·¯å¾„æ˜ å°„é…ç½®æ­£ç¡®

3. **é¡µé¢æ ‡é¢˜é‡å¤**ï¼š
   - æ£€æŸ¥æ˜¯å¦åœ¨é¡µé¢ç»„ä»¶ä¸­é‡å¤å®šä¹‰äº†æ ‡é¢˜
   - ç¡®ä¿æ ‡é¢˜åªåœ¨æ¨¡å—å¸ƒå±€æ–‡ä»¶ä¸­é€šè¿‡ `title` å±æ€§å®šä¹‰

## ğŸ’¡ è®°å¿†å£è¯€

**"å¸ƒå±€åœ¨ layoutï¼Œå†…å®¹åœ¨ pageï¼ŒAppLayout åªç”¨ä¸€ä¸ªï¼"**

**"é¢åŒ…å±‘è‡ªåŠ¨ç”Ÿï¼Œç‰¹æ®Šæ‰è‡ªå®šï¼Œå¸ƒå±€æ–‡ä»¶ä¸­é…ç½®ï¼"**

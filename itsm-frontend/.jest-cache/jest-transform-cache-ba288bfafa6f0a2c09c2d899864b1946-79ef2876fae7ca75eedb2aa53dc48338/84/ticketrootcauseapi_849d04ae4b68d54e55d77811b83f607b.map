{"version":3,"names":["cov_27uwgcw9v","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","s","f","b","inputSourceMap","version","sources","sourcesContent","names","mappings","_coverageSchema","coverage","actualCoverage","TicketRootCauseApi","analyzeTicket","ticketId","_httpclient","httpClient","post","getAnalysisReport","get","confirmRootCause","rootCauseId","resolveRootCause"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/lib/api/ticket-root-cause-api.ts"],"sourcesContent":["/**\n * 工单根因分析 API 服务\n */\n\nimport { httpClient } from './http-client';\n\nexport interface RootCause {\n  id: string;\n  title: string;\n  description: string;\n  confidence: number;\n  category: 'system' | 'network' | 'application' | 'database' | 'user' | 'other';\n  evidence: Array<{\n    type: 'log' | 'metric' | 'ticket' | 'event';\n    content: string;\n    timestamp: string;\n    relevance: number;\n  }>;\n  related_tickets: Array<{\n    id: number;\n    number: string;\n    title: string;\n    similarity: number;\n  }>;\n  impact_scope: {\n    affected_tickets: number;\n    affected_users: number;\n    affected_systems: string[];\n  };\n  recommendations: string[];\n  status: 'identified' | 'confirmed' | 'resolved' | 'false_positive';\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface RootCauseAnalysisReport {\n  ticket_id: number;\n  ticket_number: string;\n  ticket_title: string;\n  analysis_date: string;\n  root_causes: RootCause[];\n  analysis_summary: string;\n  confidence_score: number;\n  analysis_method: 'automatic' | 'manual' | 'hybrid';\n  generated_at: string;\n}\n\nexport class TicketRootCauseApi {\n  // 执行根因分析\n  static async analyzeTicket(ticketId: number): Promise<RootCauseAnalysisReport> {\n    return httpClient.post<RootCauseAnalysisReport>(`/api/tickets/${ticketId}/root-cause/analyze`, {});\n  }\n\n  // 获取根因分析报告\n  static async getAnalysisReport(ticketId: number): Promise<RootCauseAnalysisReport | null> {\n    return httpClient.get<RootCauseAnalysisReport | null>(`/api/tickets/${ticketId}/root-cause/report`);\n  }\n\n  // 确认根因\n  static async confirmRootCause(ticketId: number, rootCauseId: string): Promise<void> {\n    return httpClient.post(`/api/tickets/${ticketId}/root-cause/${rootCauseId}/confirm`, {});\n  }\n\n  // 标记根因为已解决\n  static async resolveRootCause(ticketId: number, rootCauseId: string): Promise<void> {\n    return httpClient.post(`/api/tickets/${ticketId}/root-cause/${rootCauseId}/resolve`, {});\n  }\n}\n\n"],"mappings":"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","ignoreList":[]}
{"version":3,"names":["_default","IncidentDistributionChart","cov_1fa7bkx5pt","s","_react","default","memo","data","f","validData","filter","item","b","count","isNaN","totalCount","reduce","sum","config","map","type","category","value","angleField","colorField","radius","innerRadius","label","statistic","title","offsetY","style","fontSize","fill","formatter","content","fontWeight","toString","color","legend","position","animation","appear","duration","interactions","responsive","topCategory","length","prev","current","_jsxruntime","jsx","_DashboardChartCard","DashboardChartCard","subtitle","icon","_lucidereact","PieChart","width","height","iconColor","extra","jsxs","_antd","Tag","className","_charts","Pie","displayName"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/app/(main)/dashboard/components/IncidentDistributionChart.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { Tag } from 'antd';\nimport { Pie } from '@ant-design/charts';\nimport { PieChart } from 'lucide-react';\nimport { IncidentDistributionData } from '../types/dashboard.types';\nimport { DashboardChartCard } from './DashboardChartCard';\n\nconst IncidentDistributionChart: React.FC<{ data: IncidentDistributionData[] }> = React.memo(\n  ({ data }) => {\n    // 确保数据有效性\n    const validData = data.filter(\n      item => item && typeof item.count === 'number' && !isNaN(item.count) && item.count >= 0\n    );\n    const totalCount = validData.reduce((sum, item) => sum + (item.count || 0), 0);\n\n    const config = {\n      data: validData.map(item => ({\n        type: item.category || '未知',\n        value: item.count || 0,\n      })),\n      angleField: 'value',\n      colorField: 'type',\n      radius: 0.85,\n      innerRadius: 0.6,\n      label: false, // 禁用label，使用legend和tooltip显示信息，避免兼容性问题\n      statistic: {\n        title: {\n          offsetY: -8,\n          style: {\n            fontSize: '12px', // antdTheme.token.fontSizeSM\n            fill: '#64748b', // antdTheme.token.colorTextSecondary\n          },\n          formatter: () => '总事件数',\n        },\n        content: {\n          offsetY: 8,\n          style: {\n            fontSize: '30px', // Adjusted to align with designSystem.typography.fontSize['3xl']\n            fontWeight: 'bold',\n            fill: '#10b981', // antdTheme.token.colorSuccess (consistent with iconColor)\n          },\n          formatter: () => totalCount.toString(),\n        },\n      },\n      color: validData.map(item => item.color || '#6b7280'),\n      legend: {\n        position: 'bottom' as const,\n        offsetY: -10,\n      },\n      animation: {\n        appear: {\n          animation: 'fade-in',\n          duration: 1200,\n        },\n      },\n      interactions: [{ type: 'element-selected' }, { type: 'element-active' }],\n      responsive: true,\n    };\n\n    const topCategory =\n      validData.length > 0\n        ? validData.reduce((prev, current) =>\n            (prev.count || 0) > (current.count || 0) ? prev : current\n          )\n        : { category: '无数据', count: 0 };\n\n    return (\n      <DashboardChartCard\n        title='事件分类分布'\n        subtitle='按事件类型统计分析'\n        icon={<PieChart style={{ width: 20, height: 20 }} />}\n        iconColor='#10b981'\n        extra={\n          <Tag color='success' className='font-semibold'>\n            {topCategory.category}占比最高\n          </Tag>\n        }\n      >\n        <div style={{ height: '320px' }}>\n          <Pie {...config} />\n        </div>\n      </DashboardChartCard>\n    );\n  }\n);\n\nIncidentDistributionChart.displayName = 'IncidentDistributionChart';\n\nexport default IncidentDistributionChart;\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BA0FA;;;;;;WAAAA,QAAA;;;;;;;;wEAxFkB;;;kCACE;;;kCACA;;;kCACK;;;kCAEU;;;;;;;;;;;;;;;AAEnC,MAAMC,yBAAA;AAAA;AAAA,cAAAC,cAAA,GAAAC,CAAA,QAA4EC,MAAA,CAAAC,OAAK,CAACC,IAAI,CAC1F,CAAC;EAAEC;AAAI,CAAE;EAAA;EAAAL,cAAA,GAAAM,CAAA;EACP;EACA,MAAMC,SAAA;EAAA;EAAA,CAAAP,cAAA,GAAAC,CAAA,QAAYI,IAAA,CAAKG,MAAM,CAC3BC,IAAA,IAAQ;IAAA;IAAAT,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAC,CAAA;IAAA,kCAAAD,cAAA,GAAAU,CAAA,UAAAD,IAAA;IAAA;IAAA,CAAAT,cAAA,GAAAU,CAAA,UAAQ,OAAOD,IAAA,CAAKE,KAAK,KAAK;IAAA;IAAA,CAAAX,cAAA,GAAAU,CAAA,UAAY,CAACE,KAAA,CAAMH,IAAA,CAAKE,KAAK;IAAA;IAAA,CAAAX,cAAA,GAAAU,CAAA,UAAKD,IAAA,CAAKE,KAAK,IAAI;EAAA;EAExF,MAAME,UAAA;EAAA;EAAA,CAAAb,cAAA,GAAAC,CAAA,QAAaM,SAAA,CAAUO,MAAM,CAAC,CAACC,GAAA,EAAKN,IAAA,KAAS;IAAA;IAAAT,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAC,CAAA;IAAA,OAAAc,GAAA;IAAO;IAAA,CAAAf,cAAA,GAAAU,CAAA,UAAAD,IAAA,CAAKE,KAAK;IAAA;IAAA,CAAAX,cAAA,GAAAU,CAAA,UAAI;EAAA,GAAI;EAE5E,MAAMM,MAAA;EAAA;EAAA,CAAAhB,cAAA,GAAAC,CAAA,QAAS;IACbI,IAAA,EAAME,SAAA,CAAUU,GAAG,CAACR,IAAA,IAAS;MAAA;MAAAT,cAAA,GAAAM,CAAA;MAAAN,cAAA,GAAAC,CAAA;MAAA;QAC3BiB,IAAA;QAAM;QAAA,CAAAlB,cAAA,GAAAU,CAAA,UAAAD,IAAA,CAAKU,QAAQ;QAAA;QAAA,CAAAnB,cAAA,GAAAU,CAAA,UAAI;QACvBU,KAAA;QAAO;QAAA,CAAApB,cAAA,GAAAU,CAAA,UAAAD,IAAA,CAAKE,KAAK;QAAA;QAAA,CAAAX,cAAA,GAAAU,CAAA,UAAI;MACvB;IAAA;IACAW,UAAA,EAAY;IACZC,UAAA,EAAY;IACZC,MAAA,EAAQ;IACRC,WAAA,EAAa;IACbC,KAAA,EAAO;IACPC,SAAA,EAAW;MACTC,KAAA,EAAO;QACLC,OAAA,EAAS,CAAC;QACVC,KAAA,EAAO;UACLC,QAAA,EAAU;UACVC,IAAA,EAAM;QACR;QACAC,SAAA,EAAWA,CAAA,KAAM;UAAA;UAAAhC,cAAA,GAAAM,CAAA;UAAAN,cAAA,GAAAC,CAAA;UAAA;QAAA;MACnB;MACAgC,OAAA,EAAS;QACPL,OAAA,EAAS;QACTC,KAAA,EAAO;UACLC,QAAA,EAAU;UACVI,UAAA,EAAY;UACZH,IAAA,EAAM;QACR;QACAC,SAAA,EAAWA,CAAA,KAAM;UAAA;UAAAhC,cAAA,GAAAM,CAAA;UAAAN,cAAA,GAAAC,CAAA;UAAA,OAAAY,UAAA,CAAWsB,QAAQ;QAAA;MACtC;IACF;IACAC,KAAA,EAAO7B,SAAA,CAAUU,GAAG,CAACR,IAAA,IAAQ;MAAA;MAAAT,cAAA,GAAAM,CAAA;MAAAN,cAAA,GAAAC,CAAA;MAAA,kCAAAD,cAAA,GAAAU,CAAA,UAAAD,IAAA,CAAK2B,KAAK;MAAA;MAAA,CAAApC,cAAA,GAAAU,CAAA,UAAI;IAAA;IAC3C2B,MAAA,EAAQ;MACNC,QAAA,EAAU;MACVV,OAAA,EAAS,CAAC;IACZ;IACAW,SAAA,EAAW;MACTC,MAAA,EAAQ;QACND,SAAA,EAAW;QACXE,QAAA,EAAU;MACZ;IACF;IACAC,YAAA,EAAc,CAAC;MAAExB,IAAA,EAAM;IAAmB,GAAG;MAAEA,IAAA,EAAM;IAAiB,EAAE;IACxEyB,UAAA,EAAY;EACd;EAEA,MAAMC,WAAA;EAAA;EAAA,CAAA5C,cAAA,GAAAC,CAAA,QACJM,SAAA,CAAUsC,MAAM,GAAG;EAAA;EAAA,CAAA7C,cAAA,GAAAU,CAAA,UACfH,SAAA,CAAUO,MAAM,CAAC,CAACgC,IAAA,EAAMC,OAAA,KACtB;IAAA;IAAA/C,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAC,CAAA;IAAA;IAAC;IAAA,CAAAD,cAAA,GAAAU,CAAA,UAAAoC,IAAA,CAAKnC,KAAK;IAAA;IAAA,CAAAX,cAAA,GAAAU,CAAA,UAAI;IAAM;IAAA,CAAAV,cAAA,GAAAU,CAAA,WAAAqC,OAAA,CAAQpC,KAAK;IAAA;IAAA,CAAAX,cAAA,GAAAU,CAAA,WAAI;IAAA;IAAA,CAAAV,cAAA,GAAAU,CAAA,UAAKoC,IAAA;IAAA;IAAA,CAAA9C,cAAA,GAAAU,CAAA,UAAOqC,OAAA;EAAA;EAAA;EAAA,CAAA/C,cAAA,GAAAU,CAAA,UAEpD;IAAES,QAAA,EAAU;IAAOR,KAAA,EAAO;EAAE;EAAA;EAAAX,cAAA,GAAAC,CAAA;EAElC,oBACE,IAAA+C,WAAA,CAAAC,GAAA,EAACC,mBAAA,CAAAC,kBAAkB;IACjBxB,KAAA,EAAM;IACNyB,QAAA,EAAS;IACTC,IAAA,eAAM,IAAAL,WAAA,CAAAC,GAAA,EAACK,YAAA,CAAAC,QAAQ;MAAC1B,KAAA,EAAO;QAAE2B,KAAA,EAAO;QAAIC,MAAA,EAAQ;MAAG;;IAC/CC,SAAA,EAAU;IACVC,KAAA,eACE,IAAAX,WAAA,CAAAY,IAAA,EAACC,KAAA,CAAAC,GAAG;MAAC1B,KAAA,EAAM;MAAU2B,SAAA,EAAU;iBAC5BnB,WAAA,CAAYzB,QAAQ,EAAC;;cAI1B,iBAAA6B,WAAA,CAAAC,GAAA,EAAC;MAAIpB,KAAA,EAAO;QAAE4B,MAAA,EAAQ;MAAQ;gBAC5B,iBAAAT,WAAA,CAAAC,GAAA,EAACe,OAAA,CAAAC,GAAG;QAAE,GAAGjD;;;;AAIjB;AAAA;AAAAhB,cAAA,GAAAC,CAAA;AAGFF,yBAAA,CAA0BmE,WAAW,GAAG;MAExCpE,QAAA;AAAA;AAAA,CAAAE,cAAA,GAAAC,CAAA,QAAeF,yBAAA","ignoreList":[]}
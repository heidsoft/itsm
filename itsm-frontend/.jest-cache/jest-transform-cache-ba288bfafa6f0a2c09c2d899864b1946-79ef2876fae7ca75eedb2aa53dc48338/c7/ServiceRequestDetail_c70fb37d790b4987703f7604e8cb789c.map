{"version":3,"names":["_default","Title","Text","cov_14gmxqgfxi","s","_antd","Typography","TextArea","Input","approvalStatusColors","_constants","ApprovalStatus","PENDING","APPROVED","REJECTED","ServiceRequestDetail","f","id","_navigation","useParams","router","useRouter","loading","setLoading","_react","useState","request","setRequest","approvals","setApprovals","actionModalVisible","setActionModalVisible","currentAction","setCurrentAction","comment","setComment","submitting","setSubmitting","loadDetail","b","data","_api","ServiceRequestApi","getServiceRequest","error","console","message","useEffect","handleSubmitApproval","ApprovalAction","REJECT","trim","applyApproval","action","APPROVE","success","openActionModal","renderApprovalTimeline","_jsxruntime","jsxs","Timeline","Item","color","jsx","_dayjs","default","created_at","format","map","app","index","status","dot","_icons","CheckCircleOutlined","CloseCircleOutlined","FieldTimeOutlined","Space","direction","size","strong","level","step","toUpperCase","Tag","approver_name","type","italic","processed_at","style","fontSize","canApprove","some","a","current_level","Spin","display","margin","padding","width","Card","bordered","justifyContent","alignItems","title","catalog","category","textAlign","gap","flex","Descriptions","column","label","name","reason","cost_center","data_classification","needs_public_ip","form_data","JSON","stringify","ServiceRequestStatus","CANCELLED","Fragment","Divider","Button","icon","onClick","danger","Modal","open","onOk","onCancel","confirmLoading","okText","cancelText","okButtonProps","rows","value","onChange","e","target","placeholder"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/modules/service-request/components/ServiceRequestDetail.tsx"],"sourcesContent":["'use client';\n\n/**\n * 服务请求详情组件\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n    Card, Descriptions, Tag, Timeline, Button,\n    Typography, Space, Modal, Input, message, Spin,\n    Divider\n} from 'antd';\nimport {\n    CheckCircleOutlined, CloseCircleOutlined,\n    FieldTimeOutlined, UserOutlined\n} from '@ant-design/icons';\nimport { useParams, useRouter } from 'next/navigation';\nimport dayjs from 'dayjs';\n\nimport { ServiceRequestApi } from '../api';\nimport { ServiceRequestStatus, ApprovalStatus, ApprovalAction } from '../constants';\nimport type { ServiceRequest, ServiceRequestApproval } from '../types';\n\nconst { Title, Text } = Typography;\nconst { TextArea } = Input;\n\n// 审批状态颜色映射\nconst approvalStatusColors: Record<string, string> = {\n    [ApprovalStatus.PENDING]: 'orange',\n    [ApprovalStatus.APPROVED]: 'green',\n    [ApprovalStatus.REJECTED]: 'red',\n};\n\nconst ServiceRequestDetail: React.FC = () => {\n    const { id } = useParams() as { id: string };\n    const router = useRouter();\n    const [loading, setLoading] = useState(false);\n    const [request, setRequest] = useState<ServiceRequest | null>(null);\n    const [approvals, setApprovals] = useState<ServiceRequestApproval[]>([]);\n\n    // 审批动作弹窗状态\n    const [actionModalVisible, setActionModalVisible] = useState(false);\n    const [currentAction, setCurrentAction] = useState<ApprovalAction | null>(null);\n    const [comment, setComment] = useState('');\n    const [submitting, setSubmitting] = useState(false);\n\n    // 加载详情\n    const loadDetail = async () => {\n        if (!id) return;\n        setLoading(true);\n        try {\n            const data = await ServiceRequestApi.getServiceRequest(id);\n            setRequest(data);\n            setApprovals(data.approvals || []);\n        } catch (error) {\n            console.error(error);\n            message.error('加载详情失败');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        loadDetail();\n    }, [id]);\n\n    // 提交审批\n    const handleSubmitApproval = async () => {\n        if (!id || !currentAction) return;\n\n        if (currentAction === ApprovalAction.REJECT && !comment.trim()) {\n            message.error('拒绝操作必须填写原因');\n            return;\n        }\n\n        setSubmitting(true);\n        try {\n            await ServiceRequestApi.applyApproval(id, {\n                action: currentAction === ApprovalAction.APPROVE ? 'approve' : 'reject',\n                comment: comment\n            });\n            message.success('操作成功');\n            setActionModalVisible(false);\n            loadDetail(); // 刷新数据\n        } catch (error: any) {\n            console.error(error);\n            message.error(error.message || '操作失败');\n        } finally {\n            setSubmitting(false);\n        }\n    };\n\n    const openActionModal = (action: ApprovalAction) => {\n        setCurrentAction(action);\n        setComment('');\n        setActionModalVisible(true);\n    };\n\n    // 渲染审批时间轴\n    const renderApprovalTimeline = () => {\n        return (\n            <Timeline>\n                <Timeline.Item color=\"green\">\n                    <p>提交申请</p>\n                    <small>{dayjs(request?.created_at).format('YYYY-MM-DD HH:mm')}</small>\n                </Timeline.Item>\n                {approvals.map((app, index) => (\n                    <Timeline.Item\n                        key={app.id}\n                        color={approvalStatusColors[app.status] || 'gray'}\n                        dot={app.status === ApprovalStatus.APPROVED ? <CheckCircleOutlined /> :\n                            app.status === ApprovalStatus.REJECTED ? <CloseCircleOutlined /> :\n                                <FieldTimeOutlined />}\n                    >\n                        <Space direction=\"vertical\" size={2}>\n                            <Text strong>\n                                {`${app.level}. ${app.step.toUpperCase()} 审批`}\n                            </Text>\n                            <div>\n                                <Tag color={approvalStatusColors[app.status]}>\n                                    {app.status}\n                                </Tag>\n                                {app.approver_name && <Text type=\"secondary\">by {app.approver_name}</Text>}\n                            </div>\n                            {app.comment && (\n                                <Text type=\"secondary\" italic>\n                                    \"{app.comment}\"\n                                </Text>\n                            )}\n                            {app.processed_at && (\n                                <div style={{ fontSize: '12px', color: '#999' }}>\n                                    {dayjs(app.processed_at).format('YYYY-MM-DD HH:mm')}\n                                </div>\n                            )}\n                        </Space>\n                    </Timeline.Item>\n                ))}\n            </Timeline>\n        );\n    };\n\n    // 判断当前用户是否可以审批 (简化逻辑：只要有 pending 状态且页面显示了按钮，前端暂不深度校验 user role，依赖后端拦截)\n    // 实际生产中应结合当前 userInfo 判断\n    const canApprove = approvals.some(a => a.status === ApprovalStatus.PENDING && a.level === request?.current_level);\n\n    if (loading) return <Spin size=\"large\" style={{ display: 'block', margin: '50px auto' }} />;\n    if (!request) return <div>未找到请求</div>;\n\n    return (\n        <div style={{ padding: '24px' }}>\n            <Space direction=\"vertical\" size=\"large\" style={{ width: '100%' }}>\n\n                {/* 头部信息 */}\n                <Card bordered={false}>\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>\n                        <div>\n                            <Title level={3}>{request.title || '服务请求'}</Title>\n                            <Space size=\"middle\">\n                                <Tag>{request.catalog?.category}</Tag>\n                                <Text type=\"secondary\">ID: {request.id}</Text>\n                                <Text type=\"secondary\">\n                                    提交于: {dayjs(request.created_at).format('YYYY-MM-DD HH:mm')}\n                                </Text>\n                            </Space>\n                        </div>\n                        <div style={{ textAlign: 'right' }}>\n                            <Title level={4} style={{ margin: 0 }}>\n                                <Tag color={request.status === 'completed' ? 'green' : 'blue'}>\n                                    {request.status.toUpperCase()}\n                                </Tag>\n                            </Title>\n                        </div>\n                    </div>\n                </Card>\n\n                <div style={{ display: 'flex', gap: '24px' }}>\n\n                    {/* 左侧：详情 */}\n                    <div style={{ flex: 2 }}>\n                        <Card title=\"请求详情\" bordered={false}>\n                            <Descriptions column={1} bordered>\n                                <Descriptions.Item label=\"服务名称\">\n                                    {request.catalog?.name}\n                                </Descriptions.Item>\n                                <Descriptions.Item label=\"申请原因\">\n                                    {request.reason}\n                                </Descriptions.Item>\n                                <Descriptions.Item label=\"成本中心\">\n                                    {request.cost_center || '-'}\n                                </Descriptions.Item>\n                                <Descriptions.Item label=\"数据分类\">\n                                    {request.data_classification || 'Public'}\n                                </Descriptions.Item>\n                                <Descriptions.Item label=\"需要公网IP\">\n                                    {request.needs_public_ip ? '是' : '否'}\n                                </Descriptions.Item>\n                                {request.form_data && (\n                                    <Descriptions.Item label=\"表单数据\">\n                                        <pre style={{ margin: 0, fontSize: '12px' }}>\n                                            {JSON.stringify(request.form_data, null, 2)}\n                                        </pre>\n                                    </Descriptions.Item>\n                                )}\n                            </Descriptions>\n                        </Card>\n                    </div>\n\n                    {/* 右侧：审批流 & 操作 */}\n                    <div style={{ flex: 1 }}>\n                        <Card title=\"审批流程\" bordered={false}>\n                            {renderApprovalTimeline()}\n\n                            {/* 审批操作区 */}\n                            {canApprove && request.status !== ServiceRequestStatus.REJECTED && request.status !== ServiceRequestStatus.CANCELLED && (\n                                <>\n                                    <Divider />\n                                    <Title level={5}>审批操作</Title>\n                                    <Space style={{ width: '100%', justifyContent: 'center' }}>\n                                        <Button\n                                            type=\"primary\"\n                                            icon={<CheckCircleOutlined />}\n                                            onClick={() => openActionModal(ApprovalAction.APPROVE)}\n                                        >\n                                            通过\n                                        </Button>\n                                        <Button\n                                            danger\n                                            icon={<CloseCircleOutlined />}\n                                            onClick={() => openActionModal(ApprovalAction.REJECT)}\n                                        >\n                                            拒绝\n                                        </Button>\n                                    </Space>\n                                </>\n                            )}\n                        </Card>\n                    </div>\n                </div>\n            </Space>\n\n            {/* 审批确认弹窗 */}\n            <Modal\n                title={currentAction === ApprovalAction.APPROVE ? \"确认批准\" : \"确认拒绝\"}\n                open={actionModalVisible}\n                onOk={handleSubmitApproval}\n                onCancel={() => setActionModalVisible(false)}\n                confirmLoading={submitting}\n                okText=\"提交\"\n                cancelText=\"取消\"\n                okButtonProps={{ danger: currentAction === ApprovalAction.REJECT }}\n            >\n                <p>确定要{currentAction === ApprovalAction.APPROVE ? '批准' : '拒绝'}此请求吗？</p>\n                <TextArea\n                    rows={4}\n                    value={comment}\n                    onChange={e => setComment(e.target.value)}\n                    placeholder={currentAction === ApprovalAction.REJECT ? \"请填写拒绝原因 (必填)\" : \"审批意见 (选填)\"}\n                />\n            </Modal>\n        </div>\n    );\n};\n\nexport default ServiceRequestDetail;\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}
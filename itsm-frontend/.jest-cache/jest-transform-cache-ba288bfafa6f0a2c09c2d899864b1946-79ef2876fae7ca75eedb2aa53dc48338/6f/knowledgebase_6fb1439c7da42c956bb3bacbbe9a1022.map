{"version":3,"names":["cov_14h5cdi7t8","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","s","f","b","inputSourceMap","version","sources","sourcesContent","names","mappings","_coverageSchema","coverage","actualCoverage","ArticleStatus","ArticleVisibility"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/types/knowledge-base.ts"],"sourcesContent":["/**\n * 知识库系统类型定义\n * 支持富文本编辑、版本控制、协作和搜索\n */\n\n// ==================== 知识库基础类型 ====================\n\n/**\n * 文章状态\n */\nexport enum ArticleStatus {\n  DRAFT = 'draft',               // 草稿\n  UNDER_REVIEW = 'under_review', // 审核中\n  PUBLISHED = 'published',       // 已发布\n  ARCHIVED = 'archived',         // 已归档\n}\n\n/**\n * 文章可见性\n */\nexport enum ArticleVisibility {\n  PUBLIC = 'public',             // 公开\n  INTERNAL = 'internal',         // 内部\n  PRIVATE = 'private',           // 私有\n  RESTRICTED = 'restricted',     // 受限\n}\n\n/**\n * 知识库文章\n */\nexport interface KnowledgeArticle {\n  id: string;\n  title: string;\n  slug: string;                  // URL友好的标识\n  \n  // 内容\n  content: string;               // 富文本HTML内容\n  plainText?: string;            // 纯文本（用于搜索）\n  summary?: string;              // 摘要\n  \n  // 分类和标签\n  categoryId?: string;\n  categoryName?: string;\n  tags: string[];\n  keywords?: string[];           // 搜索关键词\n  \n  // 状态和可见性\n  status: ArticleStatus;\n  visibility: ArticleVisibility;\n  \n  // 媒体\n  featuredImage?: string;\n  attachments?: ArticleAttachment[];\n  \n  // SEO\n  metaDescription?: string;\n  metaKeywords?: string[];\n  \n  // 统计\n  viewCount: number;\n  likeCount: number;\n  shareCount: number;\n  commentCount: number;\n  \n  // 评分\n  rating?: number;\n  ratingCount?: number;\n  \n  // 关联\n  relatedArticles?: string[];    // 相关文章ID\n  relatedTickets?: number[];     // 关联工单ID\n  \n  // 版本控制\n  version: number;\n  versionHistory?: ArticleVersion[];\n  \n  // 协作\n  authorId: number;\n  authorName: string;\n  contributors?: Array<{\n    userId: number;\n    userName: string;\n    role: 'editor' | 'reviewer';\n  }>;\n  \n  // 审批\n  reviewerId?: number;\n  reviewerName?: string;\n  reviewComment?: string;\n  reviewedAt?: Date;\n  \n  // 时间戳\n  createdAt: Date;\n  updatedAt: Date;\n  publishedAt?: Date;\n  \n  // 有效期\n  expiresAt?: Date;              // 过期时间\n  isExpired?: boolean;\n}\n\n/**\n * 文章附件\n */\nexport interface ArticleAttachment {\n  id: string;\n  name: string;\n  type: string;\n  size: number;\n  url: string;\n  uploadedAt: Date;\n}\n\n/**\n * 文章版本\n */\nexport interface ArticleVersion {\n  version: number;\n  content: string;\n  summary?: string;\n  changeLog?: string;\n  createdBy: number;\n  createdByName: string;\n  createdAt: Date;\n}\n\n// ==================== 分类和标签 ====================\n\n/**\n * 知识库分类\n */\nexport interface KnowledgeCategory {\n  id: string;\n  name: string;\n  slug: string;\n  description?: string;\n  icon?: string;\n  color?: string;\n  \n  // 层级关系\n  parentId?: string;\n  parentName?: string;\n  children?: KnowledgeCategory[];\n  level: number;\n  order: number;\n  \n  // 统计\n  articleCount: number;\n  \n  // 权限\n  visibility: ArticleVisibility;\n  allowedRoles?: string[];\n  \n  createdAt: Date;\n  updatedAt: Date;\n}\n\n/**\n * 标签\n */\nexport interface KnowledgeTag {\n  id: string;\n  name: string;\n  slug: string;\n  color?: string;\n  articleCount: number;\n  createdAt: Date;\n}\n\n// ==================== 评论和反馈 ====================\n\n/**\n * 文章评论\n */\nexport interface ArticleComment {\n  id: string;\n  articleId: string;\n  \n  // 评论内容\n  content: string;\n  \n  // 层级（支持回复）\n  parentId?: string;\n  replies?: ArticleComment[];\n  \n  // 反馈\n  helpful: number;               // 有用计数\n  notHelpful: number;            // 无用计数\n  \n  // 用户信息\n  userId: number;\n  userName: string;\n  userAvatar?: string;\n  \n  // 状态\n  isPublished: boolean;\n  isPinned: boolean;             // 是否置顶\n  \n  createdAt: Date;\n  updatedAt: Date;\n}\n\n/**\n * 文章反馈\n */\nexport interface ArticleFeedback {\n  id: string;\n  articleId: string;\n  \n  type: 'helpful' | 'not_helpful' | 'outdated' | 'incorrect' | 'suggestion';\n  comment?: string;\n  \n  userId: number;\n  userName: string;\n  createdAt: Date;\n}\n\n// ==================== 搜索和推荐 ====================\n\n/**\n * 搜索请求\n */\nexport interface KnowledgeSearchRequest {\n  query: string;\n  categoryId?: string;\n  tags?: string[];\n  visibility?: ArticleVisibility;\n  status?: ArticleStatus;\n  authorId?: number;\n  \n  // 过滤\n  dateFrom?: string;\n  dateTo?: string;\n  minRating?: number;\n  \n  // 排序\n  sortBy?: 'relevance' | 'date' | 'views' | 'rating';\n  sortOrder?: 'asc' | 'desc';\n  \n  // 分页\n  page?: number;\n  pageSize?: number;\n}\n\n/**\n * 搜索结果\n */\nexport interface KnowledgeSearchResult {\n  articles: Array<{\n    article: KnowledgeArticle;\n    score: number;              // 相关度分数\n    highlights?: {\n      title?: string;\n      content?: string;\n      summary?: string;\n    };\n  }>;\n  total: number;\n  facets?: {\n    categories: Record<string, number>;\n    tags: Record<string, number>;\n    authors: Record<string, number>;\n  };\n}\n\n/**\n * 推荐文章\n */\nexport interface ArticleRecommendation {\n  article: KnowledgeArticle;\n  reason: 'popular' | 'related' | 'recent' | 'personalized';\n  score: number;\n}\n\n// ==================== 富文本编辑器 ====================\n\n/**\n * 编辑器配置\n */\nexport interface EditorConfig {\n  // 工具栏配置\n  toolbar: Array<\n    | 'heading'\n    | 'bold'\n    | 'italic'\n    | 'underline'\n    | 'strikethrough'\n    | 'link'\n    | 'image'\n    | 'video'\n    | 'code'\n    | 'codeblock'\n    | 'quote'\n    | 'list'\n    | 'orderedlist'\n    | 'table'\n    | 'horizontalrule'\n    | 'undo'\n    | 'redo'\n  >;\n  \n  // 功能开关\n  enableImageUpload: boolean;\n  enableVideoEmbed: boolean;\n  enableCodeHighlight: boolean;\n  enableMarkdown: boolean;\n  enableMentions: boolean;\n  \n  // 限制\n  maxLength?: number;\n  maxImageSize?: number;         // MB\n  allowedImageTypes?: string[];\n  \n  // 自动保存\n  autoSave: boolean;\n  autoSaveInterval?: number;     // 秒\n}\n\n/**\n * 编辑器内容变更\n */\nexport interface EditorChange {\n  content: string;\n  plainText: string;\n  wordCount: number;\n  characterCount: number;\n  timestamp: Date;\n}\n\n/**\n * 图片上传结果\n */\nexport interface ImageUploadResult {\n  url: string;\n  name: string;\n  size: number;\n  width?: number;\n  height?: number;\n}\n\n// ==================== 协作和通知 ====================\n\n/**\n * 协作会话\n */\nexport interface CollaborationSession {\n  articleId: string;\n  participants: Array<{\n    userId: number;\n    userName: string;\n    color: string;\n    cursor?: {\n      line: number;\n      column: number;\n    };\n  }>;\n  startedAt: Date;\n}\n\n/**\n * 文章通知\n */\nexport interface ArticleNotification {\n  id: string;\n  type: 'comment' | 'mention' | 'review_request' | 'published' | 'updated';\n  articleId: string;\n  articleTitle: string;\n  \n  message: string;\n  \n  // 发送者\n  fromUserId?: number;\n  fromUserName?: string;\n  \n  // 接收者\n  toUserId: number;\n  \n  isRead: boolean;\n  createdAt: Date;\n}\n\n// ==================== 统计和分析 ====================\n\n/**\n * 知识库统计\n */\nexport interface KnowledgeBaseStats {\n  totalArticles: number;\n  publishedArticles: number;\n  draftArticles: number;\n  archivedArticles: number;\n  \n  totalViews: number;\n  totalLikes: number;\n  totalComments: number;\n  \n  articlesByCategory: Record<string, number>;\n  articlesByStatus: Record<ArticleStatus, number>;\n  articlesByVisibility: Record<ArticleVisibility, number>;\n  \n  topArticles: Array<{\n    article: KnowledgeArticle;\n    views: number;\n    rating: number;\n  }>;\n  \n  topAuthors: Array<{\n    userId: number;\n    userName: string;\n    articleCount: number;\n    avgRating: number;\n  }>;\n  \n  trends: {\n    date: string;\n    created: number;\n    published: number;\n    views: number;\n  }[];\n}\n\n/**\n * 文章分析\n */\nexport interface ArticleAnalytics {\n  articleId: string;\n  period: {\n    start: Date;\n    end: Date;\n  };\n  \n  metrics: {\n    views: number;\n    uniqueVisitors: number;\n    avgReadTime: number;        // 秒\n    likes: number;\n    shares: number;\n    comments: number;\n    rating: number;\n  };\n  \n  viewTrend: {\n    date: string;\n    views: number;\n  }[];\n  \n  referrers: {\n    source: string;\n    count: number;\n  }[];\n  \n  searchKeywords: {\n    keyword: string;\n    count: number;\n  }[];\n}\n\n// ==================== API请求/响应 ====================\n\n/**\n * 创建文章请求\n */\nexport interface CreateArticleRequest {\n  title: string;\n  content: string;\n  summary?: string;\n  categoryId?: string;\n  tags?: string[];\n  visibility?: ArticleVisibility;\n  featuredImage?: string;\n  metaDescription?: string;\n  expiresAt?: Date;\n}\n\n/**\n * 更新文章请求\n */\nexport type UpdateArticleRequest = Partial<CreateArticleRequest> & {\n  changeLog?: string;\n};\n\n/**\n * 发布文章请求\n */\nexport interface PublishArticleRequest {\n  scheduleAt?: Date;             // 定时发布\n}\n\n/**\n * 审核文章请求\n */\nexport interface ReviewArticleRequest {\n  approved: boolean;\n  comment?: string;\n}\n\n/**\n * 文章查询\n */\nexport interface ArticleQuery {\n  categoryId?: string;\n  status?: ArticleStatus;\n  visibility?: ArticleVisibility;\n  authorId?: number;\n  tags?: string[];\n  search?: string;\n  isExpired?: boolean;\n  page?: number;\n  pageSize?: number;\n  sortBy?: 'created' | 'updated' | 'views' | 'rating';\n  sortOrder?: 'asc' | 'desc';\n}\n\n/**\n * 批量操作请求\n */\nexport interface BatchArticleOperation {\n  articleIds: string[];\n  operation: 'publish' | 'archive' | 'delete' | 'change_category' | 'add_tags';\n  params?: {\n    categoryId?: string;\n    tags?: string[];\n  };\n}\n\nexport default KnowledgeArticle;\n\n"],"mappings":"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","ignoreList":[]}
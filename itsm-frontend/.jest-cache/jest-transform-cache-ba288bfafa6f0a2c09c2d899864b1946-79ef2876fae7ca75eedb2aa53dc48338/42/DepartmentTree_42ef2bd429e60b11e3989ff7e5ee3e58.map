{"version":3,"names":["_default","DepartmentTree","cov_vrtkp4ltq","f","loading","setLoading","s","_react","useState","treeData","setTreeData","formatTreeData","data","map","item","title","name","key","id","children","b","fetchTree","_api","CommonApi","getDepartmentTree","error","_antd","message","useEffect","_jsxruntime","jsx","Card","jsxs","_icons","ClusterOutlined","style","textAlign","padding","Spin","Tree","showLine","defaultExpandAll"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/modules/common/components/DepartmentTree.tsx"],"sourcesContent":["'use client';\n\n/**\n * 部门树组件\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Tree, Card, Spin, message } from 'antd';\nimport { ClusterOutlined } from '@ant-design/icons';\nimport { CommonApi } from '../api';\nimport type { Department } from '../types';\n\nconst DepartmentTree: React.FC = () => {\n    const [loading, setLoading] = useState(false);\n    const [treeData, setTreeData] = useState<any[]>([]);\n\n    const formatTreeData = (data: Department[]): any[] => {\n        return data.map(item => ({\n            title: item.name,\n            key: item.id,\n            children: item.children ? formatTreeData(item.children) : [],\n        }));\n    };\n\n    const fetchTree = async () => {\n        setLoading(true);\n        try {\n            const data = await CommonApi.getDepartmentTree();\n            setTreeData(formatTreeData(data));\n        } catch (error) {\n            message.error('获取部门树失败');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchTree();\n    }, []);\n\n    return (\n        <Card title={<span><ClusterOutlined /> 组织架构</span>}>\n            {loading ? (\n                <div style={{ textAlign: 'center', padding: '20px' }}><Spin /></div>\n            ) : (\n                <Tree\n                    showLine\n                    defaultExpandAll\n                    treeData={treeData}\n                />\n            )}\n        </Card>\n    );\n};\n\nexport default DepartmentTree;\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}
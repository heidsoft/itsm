{"version":3,"names":["_default","UserSatisfactionChart","cov_tj7ezzecm","s","_react","default","memo","data","f","config","map","item","month","rating","responses","xField","yField","meta","alias","min","max","color","columnStyle","radius","fill","columnWidthRatio","label","position","style","fontSize","fontWeight","formatter","datum","animation","appear","duration","tooltip","name","value","responsive","avgRating","length","b","reduce","sum","totalResponses","trend","_jsxruntime","jsxs","_DashboardChartCard","DashboardChartCard","title","subtitle","icon","jsx","_lucidereact","Smile","width","height","iconColor","isPositive","extra","textAlign","toFixed","_charts","Column","className","Math","d","displayName"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/app/(main)/dashboard/components/UserSatisfactionChart.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { Column } from '@ant-design/charts';\nimport { Smile } from 'lucide-react';\nimport { DashboardChartCard } from './DashboardChartCard';\n\ninterface SatisfactionData {\n  month: string;\n  rating: number;\n  responses: number;\n}\n\nconst UserSatisfactionChart: React.FC<{ data: SatisfactionData[] }> = React.memo(({ data }) => {\n  const config = {\n    data: data.map(item => ({\n      month: item.month,\n      rating: item.rating,\n      responses: item.responses,\n    })),\n    xField: 'month',\n    yField: 'rating',\n    meta: {\n      rating: {\n        alias: '满意度评分',\n        min: 0,\n        max: 5,\n      },\n    },\n    color: '#ec4899',\n    columnStyle: {\n      radius: [8, 8, 0, 0],\n      fill: 'l(270) 0:#ec4899 1:#db2777',\n    },\n    columnWidthRatio: 0.5,\n    label: {\n      position: 'top' as const,\n      style: {\n        fill: '#ec4899',\n        fontSize: 13,\n        fontWeight: 'bold',\n      },\n      formatter: (datum: any) => `${datum.rating}`,\n    },\n    animation: {\n      appear: {\n        animation: 'scale-in-y',\n        duration: 1200,\n      },\n    },\n    tooltip: {\n      formatter: (datum: any) => ({\n        name: '满意度评分',\n        value: `${datum.rating}/5.0 (${datum.responses}份反馈)`,\n      }),\n    },\n    responsive: true,\n  };\n\n  const avgRating =\n    data.length > 0 ? data.reduce((sum, item) => sum + item.rating, 0) / data.length : 0;\n  const totalResponses = data.reduce((sum, item) => sum + item.responses, 0);\n  const trend = data.length > 1 ? (data[data.length - 1].rating / data[0].rating - 1) * 100 : 0;\n\n  return (\n    <DashboardChartCard\n      title='用户满意度趋势'\n      subtitle='月度服务满意度评分变化'\n      icon={<Smile style={{ width: 20, height: 20 }} />}\n      iconColor='#ec4899'\n      trend={{ value: trend, isPositive: trend > 0 }}\n      extra={\n        <div style={{ textAlign: 'right' }}>\n          <div style={{ fontSize: 12, color: '#8c8c8c' }}>平均评分</div>\n          <div style={{ fontSize: 16, fontWeight: 600, color: '#eb2f96' }}>\n            {avgRating.toFixed(1)}/5.0\n          </div>\n        </div>\n      }\n    >\n      <div style={{ height: '280px' }}>\n        <Column {...config} />\n      </div>\n\n      {/* 满意度统计摘要 */}\n      <div className='mt-4 pt-4 border-t border-gray-100'>\n        <div className='grid grid-cols-3 gap-4'>\n          <div className='text-center'>\n            <div className='text-xs text-gray-500 mb-1'>总反馈数</div>\n            <div className='text-lg font-bold text-gray-900'>{totalResponses}</div>\n          </div>\n          <div className='text-center'>\n            <div className='text-xs text-gray-500 mb-1'>最高评分</div>\n            <div className='text-lg font-bold text-pink-600'>\n              {Math.max(...data.map(d => d.rating)).toFixed(1)}\n            </div>\n          </div>\n          <div className='text-center'>\n            <div className='text-xs text-gray-500 mb-1'>最低评分</div>\n            <div className='text-lg font-bold text-orange-600'>\n              {Math.min(...data.map(d => d.rating)).toFixed(1)}\n            </div>\n          </div>\n        </div>\n      </div>\n    </DashboardChartCard>\n  );\n});\n\nUserSatisfactionChart.displayName = 'UserSatisfactionChart';\n\nexport default UserSatisfactionChart;\n"],"mappings":"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","ignoreList":[]}
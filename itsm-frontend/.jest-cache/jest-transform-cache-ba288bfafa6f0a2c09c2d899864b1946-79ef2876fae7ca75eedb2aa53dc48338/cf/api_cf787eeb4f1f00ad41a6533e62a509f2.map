{"version":3,"names":["cov_4yfqakmdh","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","s","f","b","inputSourceMap","version","sources","sourcesContent","names","mappings","_coverageSchema","coverage","actualCoverage","ChangeApi","BASE_URL","getChanges","query","_httpclient","httpClient","get","getStats","getChange","id","createChange","data","post","updateChange","put","submitApproval","changeId","getApprovalSummary","getRiskAssessment"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/modules/change/api.ts"],"sourcesContent":["/**\n * 变更管理 API 客户端\n */\n\nimport { httpClient } from '@/lib/api/http-client';\nimport type {\n    Change,\n    CreateChangeRequest,\n    ChangeListResponse,\n    ChangeQuery,\n    ChangeStats,\n    ApprovalRecord,\n    RiskAssessment\n} from './types';\n\nconst BASE_URL = '/api/v1/changes';\n\nexport class ChangeApi {\n\n    /**\n     * 获取变更列表\n     */\n    static async getChanges(query?: ChangeQuery): Promise<ChangeListResponse> {\n        return httpClient.get<ChangeListResponse>(BASE_URL, query);\n    }\n\n    /**\n     * 获取变更统计\n     */\n    static async getStats(): Promise<ChangeStats> {\n        return httpClient.get<ChangeStats>(`${BASE_URL}/stats`);\n    }\n\n    /**\n     * 获取变更详情\n     */\n    static async getChange(id: string | number): Promise<Change> {\n        return httpClient.get<Change>(`${BASE_URL}/${id}`);\n    }\n\n    /**\n     * 创建变更\n     */\n    static async createChange(data: CreateChangeRequest): Promise<Change> {\n        return httpClient.post<Change>(BASE_URL, data);\n    }\n\n    /**\n     * 更新变更\n     */\n    static async updateChange(id: string | number, data: Partial<Change>): Promise<Change> {\n        return httpClient.put<Change>(`${BASE_URL}/${id}`, data);\n    }\n\n    /**\n     * 提交审批\n     */\n    static async submitApproval(changeId: number, data: { approver_id: number; comment?: string }): Promise<ApprovalRecord> {\n        return httpClient.post<ApprovalRecord>(`${BASE_URL}/${changeId}/approvals`, data);\n    }\n\n    /**\n     * 获取审批摘要 (历史与链)\n     */\n    static async getApprovalSummary(changeId: number): Promise<{ history: ApprovalRecord[], chain: any[] }> {\n        return httpClient.get<any>(`${BASE_URL}/${changeId}/approval-summary`);\n    }\n\n    /**\n     * 获取风险评估\n     */\n    static async getRiskAssessment(changeId: number): Promise<RiskAssessment> {\n        return httpClient.get<RiskAssessment>(`${BASE_URL}/${changeId}/risk-assessment`);\n    }\n}\n"],"mappings":"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","ignoreList":[]}
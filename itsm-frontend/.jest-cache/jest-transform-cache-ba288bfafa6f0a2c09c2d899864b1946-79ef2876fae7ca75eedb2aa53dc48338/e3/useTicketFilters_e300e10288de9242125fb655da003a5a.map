{"version":3,"names":["cov_1yf4omr7sp","actualCoverage","s","useTicketFilters","DEFAULT_FILTER_STATE","status","priority","type","keyword","dateStart","dateEnd","sortBy","f","componentFilters","setComponentFilters","_react","useState","mapComponentToDomain","useCallback","cf","statusMap","all","undefined","open","_ticketservice","TicketStatus","OPEN","in_progress","IN_PROGRESS","resolved","RESOLVED","closed","CLOSED","priorityMap","p1","TicketPriority","URGENT","p2","HIGH","p3","MEDIUM","p4","LOW","dateRange","b","mapDomainToComponent","df","statusReverseMap","priorityReverseMap","updateComponentFilters","newFilters","prev","updateDomainFilters","componentState","resetFilters","domainFilters","useMemo"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/lib/hooks/useTicketFilters.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback, useMemo } from \"react\";\nimport { TicketStatus, TicketPriority, TicketType } from '@/lib/services/ticket-service';\nimport { TicketQueryFilters } from \"./useTickets\";\n\nexport type TicketFilterState = {\n  status: \"all\" | \"open\" | \"in_progress\" | \"resolved\" | \"closed\";\n  priority: \"all\" | \"p1\" | \"p2\" | \"p3\" | \"p4\";\n  type: \"all\" | TicketType;\n  keyword: string;\n  dateStart: string;\n  dateEnd: string;\n  sortBy: 'createdAt_desc' | 'createdAt_asc' | 'priority_desc' | 'priority_asc';\n}\n\nexport interface UseTicketFiltersReturn {\n  // Filter state\n  componentFilters: TicketFilterState;\n  domainFilters: Partial<TicketQueryFilters>;\n  \n  // Actions\n  updateComponentFilters: (filters: Partial<TicketFilterState>) => void;\n  updateDomainFilters: (filters: Partial<TicketQueryFilters>) => void;\n  resetFilters: () => void;\n  \n  // Mappers\n  mapComponentToDomain: (cf: TicketFilterState) => Partial<TicketQueryFilters>;\n  mapDomainToComponent: (df: Partial<TicketQueryFilters>) => TicketFilterState;\n}\n\nconst DEFAULT_FILTER_STATE: TicketFilterState = {\n  status: \"all\",\n  priority: \"all\",\n  type: \"all\",\n  keyword: \"\",\n  dateStart: \"\",\n  dateEnd: \"\",\n  sortBy: \"createdAt_desc\",\n};\n\nexport const useTicketFilters = (): UseTicketFiltersReturn => {\n  const [componentFilters, setComponentFilters] = useState<TicketFilterState>(DEFAULT_FILTER_STATE);\n\n  // Map component filters to domain filters\n  const mapComponentToDomain = useCallback((cf: TicketFilterState): Partial<TicketQueryFilters> => {\n    const statusMap: Record<TicketFilterState[\"status\"], TicketStatus | undefined> = {\n      all: undefined,\n      open: TicketStatus.OPEN,\n      in_progress: TicketStatus.IN_PROGRESS,\n      resolved: TicketStatus.RESOLVED,\n      closed: TicketStatus.CLOSED,\n    };\n    \n    const priorityMap: Record<TicketFilterState[\"priority\"], TicketPriority | undefined> = {\n      all: undefined,\n      p1: TicketPriority.URGENT,\n      p2: TicketPriority.HIGH,\n      p3: TicketPriority.MEDIUM,\n      p4: TicketPriority.LOW,\n    };\n    \n    const dateRange = cf.dateStart && cf.dateEnd ? [cf.dateStart, cf.dateEnd] as [string, string] : undefined;\n    \n    return {\n      status: statusMap[cf.status],\n      priority: priorityMap[cf.priority],\n      type: cf.type === \"all\" ? undefined : cf.type,\n      keyword: cf.keyword || undefined,\n      dateRange,\n    };\n  }, []);\n\n  // Map domain filters to component filters\n  const mapDomainToComponent = useCallback((df: Partial<TicketQueryFilters>): TicketFilterState => {\n    const statusReverseMap: Record<string, TicketFilterState[\"status\"]> = {\n      [TicketStatus.OPEN]: \"open\",\n      [TicketStatus.IN_PROGRESS]: \"in_progress\",\n      [TicketStatus.RESOLVED]: \"resolved\",\n      [TicketStatus.CLOSED]: \"closed\",\n    };\n    \n    const priorityReverseMap: Record<string, TicketFilterState[\"priority\"]> = {\n      [TicketPriority.URGENT]: \"p1\",\n      [TicketPriority.HIGH]: \"p2\",\n      [TicketPriority.MEDIUM]: \"p3\",\n      [TicketPriority.LOW]: \"p4\",\n    };\n    \n    return {\n      status: df.status ? statusReverseMap[df.status] : \"all\",\n      priority: df.priority ? priorityReverseMap[df.priority] : \"all\",\n      type: df.type || \"all\",\n      keyword: df.keyword || \"\",\n      dateStart: df.dateRange?.[0] || \"\",\n      dateEnd: df.dateRange?.[1] || \"\",\n      sortBy: \"createdAt_desc\",\n    };\n  }, []);\n\n  // Update component filters\n  const updateComponentFilters = useCallback((newFilters: Partial<TicketFilterState>) => {\n    setComponentFilters(prev => ({ ...prev, ...newFilters }));\n  }, []);\n\n  // Update domain filters (converts to component filters internally)\n  const updateDomainFilters = useCallback((newFilters: Partial<TicketQueryFilters>) => {\n    const componentState = mapDomainToComponent(newFilters);\n    setComponentFilters(prev => ({ ...prev, ...componentState }));\n  }, [mapDomainToComponent]);\n\n  // Reset filters to default\n  const resetFilters = useCallback(() => {\n    setComponentFilters(DEFAULT_FILTER_STATE);\n  }, []);\n\n  // Compute domain filters from current component state\n  const domainFilters = useMemo(() => {\n    return mapComponentToDomain(componentFilters);\n  }, [componentFilters, mapComponentToDomain]);\n\n  return {\n    // Filter state\n    componentFilters,\n    domainFilters,\n    \n    // Actions\n    updateComponentFilters,\n    updateDomainFilters,\n    resetFilters,\n    \n    // Mappers\n    mapComponentToDomain,\n    mapDomainToComponent,\n  };\n};\n"],"mappings":"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","ignoreList":[]}
{"version":3,"names":["cov_2nocow60m1","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","s","f","b","inputSourceMap","version","sources","sourcesContent","names","mappings","_coverageSchema","coverage","actualCoverage","ChangeType"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/types/change-classification.ts"],"sourcesContent":["/**\n * 变更分类系统类型定义\n * 基于ITIL标准的变更分类和评估\n */\n\n// ==================== 变更类型 ====================\n\n/**\n * 变更类型\n */\nexport enum ChangeType {\n  STANDARD = 'standard',       // 标准变更\n  NORMAL = 'normal',           // 普通变更\n  EMERGENCY = 'emergency',     // 紧急变更\n  MAJOR = 'major',             // 重大变更\n}\n\n/**\n * 变更分类\n */\nexport interface ChangeClassification {\n  id: string;\n  name: string;\n  code: string;\n  type: ChangeType;\n  description?: string;\n  riskLevel: 'low' | 'medium' | 'high' | 'critical';\n  approvalRequired: boolean;\n  cabRequired: boolean;          // Change Advisory Board\n  testingRequired: boolean;\n  backoutPlanRequired: boolean;\n  businessJustificationRequired: boolean;\n  standardDuration?: number;     // 标准工期（小时）\n  cooldownPeriod?: number;       // 冷却期（小时）\n  isActive: boolean;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\n// ==================== 变更风险评估 ====================\n\n/**\n * 风险因素\n */\nexport interface RiskFactor {\n  category: 'technical' | 'business' | 'compliance' | 'operational';\n  factor: string;\n  weight: number;                // 权重（0-100）\n  value: number;                 // 评分（0-100）\n  description: string;\n}\n\n/**\n * 风险评估结果\n */\nexport interface RiskAssessment {\n  overallRisk: 'low' | 'medium' | 'high' | 'critical';\n  riskScore: number;             // 总风险分数（0-100）\n  factors: RiskFactor[];\n  recommendations: string[];\n  assessedBy?: number;\n  assessedByName?: string;\n  assessedAt: Date;\n}\n\n// ==================== 变更影响分析 ====================\n\n/**\n * 影响范围\n */\nexport interface ImpactScope {\n  services: string[];            // 受影响服务\n  cis: string[];                 // 受影响配置项\n  users: number;                 // 受影响用户数\n  departments: string[];         // 受影响部门\n  locations: string[];           // 受影响位置\n  estimatedDowntime?: number;    // 预计停机时间（分钟）\n}\n\n/**\n * 影响分析\n */\nexport interface ImpactAnalysis {\n  scope: ImpactScope;\n  businessImpact: 'none' | 'low' | 'medium' | 'high' | 'critical';\n  financialImpact?: number;\n  reputationImpact?: 'none' | 'low' | 'medium' | 'high';\n  complianceImpact?: boolean;\n  analysisNotes?: string;\n  analysedBy?: number;\n  analysedByName?: string;\n  analysedAt: Date;\n}\n\n// ==================== 变更分类规则 ====================\n\n/**\n * 分类规则条件\n */\nexport interface ClassificationRuleCondition {\n  field: string;\n  operator: 'equals' | 'contains' | 'greater_than' | 'less_than' | 'in' | 'between';\n  value: any;\n}\n\n/**\n * 分类规则\n */\nexport interface ClassificationRule {\n  id: string;\n  name: string;\n  priority: number;              // 规则优先级\n  conditions: ClassificationRuleCondition[];\n  resultClassification: string;  // 分类ID\n  enabled: boolean;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\n// ==================== 变更分类建议 ====================\n\n/**\n * 分类建议\n */\nexport interface ClassificationSuggestion {\n  changeId: number;\n  currentClassification?: ChangeClassification;\n  suggestedClassification: ChangeClassification;\n  confidence: number;            // 置信度（0-100）\n  reasoning: string;\n  basedOn: 'rules' | 'similarity' | 'risk' | 'impact' | 'historical';\n  riskAssessment?: RiskAssessment;\n  impactAnalysis?: ImpactAnalysis;\n}\n\n// ==================== 变更模板 ====================\n\n/**\n * 变更模板\n */\nexport interface ChangeTemplate {\n  id: string;\n  name: string;\n  classification: ChangeClassification;\n  description?: string;\n  steps: ChangeTemplateStep[];\n  requiredFields: string[];\n  estimatedDuration?: number;\n  riskMitigation?: string;\n  backoutPlan?: string;\n  testingProcedure?: string;\n  isActive: boolean;\n  usageCount: number;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\n/**\n * 变更模板步骤\n */\nexport interface ChangeTemplateStep {\n  id: string;\n  order: number;\n  title: string;\n  description?: string;\n  expectedDuration?: number;     // 预计时长（分钟）\n  assignedRole?: string;\n  verificationRequired: boolean;\n}\n\n// ==================== 变更审批矩阵 ====================\n\n/**\n * 审批级别\n */\nexport interface ApprovalLevel {\n  level: number;\n  name: string;\n  approvers: number[];           // 审批人ID\n  requiredApprovals: number;     // 需要的审批数量\n  timeoutHours?: number;         // 超时时间\n  escalationTo?: number;         // 升级到（审批人ID）\n}\n\n/**\n * 审批矩阵\n */\nexport interface ApprovalMatrix {\n  classificationId: string;\n  levels: ApprovalLevel[];\n  parallelApproval: boolean;     // 是否并行审批\n  autoApproveConditions?: ClassificationRuleCondition[];\n}\n\n// ==================== 统计和分析 ====================\n\n/**\n * 分类统计\n */\nexport interface ClassificationStats {\n  classification: ChangeClassification;\n  count: number;\n  successRate: number;           // 成功率（%）\n  avgDuration: number;           // 平均时长（小时）\n  avgRiskScore: number;\n  failureReasons?: Array<{\n    reason: string;\n    count: number;\n  }>;\n}\n\n/**\n * 分类分析\n */\nexport interface ClassificationAnalysis {\n  period: {\n    start: Date;\n    end: Date;\n  };\n  byType: Record<ChangeType, ClassificationStats[]>;\n  trends: {\n    date: string;\n    byClassification: Record<string, number>;\n  }[];\n  insights: {\n    type: 'warning' | 'info' | 'success';\n    message: string;\n  }[];\n}\n\n// ==================== API 请求/响应 ====================\n\n/**\n * 创建分类请求\n */\nexport interface CreateClassificationRequest {\n  name: string;\n  code: string;\n  type: ChangeType;\n  description?: string;\n  riskLevel: 'low' | 'medium' | 'high' | 'critical';\n  approvalRequired: boolean;\n  cabRequired?: boolean;\n  testingRequired?: boolean;\n  backoutPlanRequired?: boolean;\n  businessJustificationRequired?: boolean;\n  standardDuration?: number;\n  cooldownPeriod?: number;\n}\n\n/**\n * 更新分类请求\n */\nexport type UpdateClassificationRequest = Partial<CreateClassificationRequest>;\n\n/**\n * 风险评估请求\n */\nexport interface AssessRiskRequest {\n  changeId: number;\n  factors: Omit<RiskFactor, 'description'>[];\n}\n\n/**\n * 影响分析请求\n */\nexport interface AnalyzeImpactRequest {\n  changeId: number;\n  scope: ImpactScope;\n  businessImpact: 'none' | 'low' | 'medium' | 'high' | 'critical';\n  financialImpact?: number;\n  analysisNotes?: string;\n}\n\n/**\n * 分类查询\n */\nexport interface ClassificationQuery {\n  type?: ChangeType;\n  riskLevel?: string;\n  active?: boolean;\n  search?: string;\n  page?: number;\n  pageSize?: number;\n}\n\n/**\n * 分类历史\n */\nexport interface ClassificationHistory {\n  id: string;\n  changeId: number;\n  oldClassification?: ChangeClassification;\n  newClassification: ChangeClassification;\n  reason: string;\n  changedBy: number;\n  changedByName: string;\n  changedAt: Date;\n}\n\nexport default ChangeClassification;\n\n"],"mappings":"AAAA;;;GAAA,CAKA;AAEA;;GAEC;;AAAA;AAAA,SAAAA,eAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;IAAA;IAAAE,KAAA;MAAA;QAAAC,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAI,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;IAAA;IAAAO,SAAA;IAAAC,CAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAAC,CAAA;MAAA;MAAA;IAAA;IAAAC,CAAA;IAAAC,cAAA;MAAAC,OAAA;MAAAC,OAAA;MAAAC,cAAA;MAAAC,KAAA;MAAAC,QAAA;IAAA;IAAAC,eAAA;IAAAxB,IAAA;EAAA;EAAA,IAAAyB,QAAA,GAAAxB,MAAA,CAAAE,GAAA,MAAAF,MAAA,CAAAE,GAAA;EAAA,KAAAsB,QAAA,CAAA1B,IAAA,KAAA0B,QAAA,CAAA1B,IAAA,EAAAC,IAAA,KAAAA,IAAA;IAAAyB,QAAA,CAAA1B,IAAA,IAAAK,YAAA;EAAA;EAAA,IAAAsB,cAAA,GAAAD,QAAA,CAAA1B,IAAA;EAAA;;;;;;;;;;;;;;;+BACW;;;;;;WAAA4B,UAAA;;;AAAL,IAAAA,UAAK;AAAA;AAAA,cAAA7B,cAAA,GAAAiB,CAAA,iBAAAY,UAAA;EAAA;EAAA7B,cAAA,GAAAkB,CAAA;EAAAlB,cAAA,GAAAiB,CAAA;;;;;;;;;;;;;SAAAY,UAAA","ignoreList":[]}
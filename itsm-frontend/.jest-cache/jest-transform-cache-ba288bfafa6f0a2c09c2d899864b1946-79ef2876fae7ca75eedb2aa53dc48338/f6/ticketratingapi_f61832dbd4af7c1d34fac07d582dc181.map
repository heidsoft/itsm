{"version":3,"names":["cov_vkqye2t00","actualCoverage","s","TicketRatingApi","submitRating","ticketId","data","f","_httpclient","httpClient","post","getRating","get","getRatingStats","params"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/lib/api/ticket-rating-api.ts"],"sourcesContent":["import { httpClient } from './http-client';\n\n// 工单评分类型定义\nexport interface TicketRating {\n  rating: number; // 1-5星\n  comment: string;\n  rated_at?: string;\n  rated_by: number;\n  rated_by_name?: string;\n}\n\nexport interface SubmitTicketRatingRequest {\n  rating: number; // 1-5星\n  comment?: string;\n}\n\nexport interface RatingStats {\n  total_ratings: number;\n  average_rating: number;\n  rating_distribution: {\n    [key: number]: number; // {1: 10, 2: 5, 3: 8, 4: 20, 5: 30}\n  };\n  by_assignee?: {\n    [key: number]: {\n      assignee_id: number;\n      assignee_name: string;\n      total_ratings: number;\n      average_rating: number;\n    };\n  };\n  by_category?: {\n    [key: number]: {\n      category_id: number;\n      category_name: string;\n      total_ratings: number;\n      average_rating: number;\n    };\n  };\n}\n\nexport interface GetRatingStatsParams {\n  assignee_id?: number;\n  category_id?: number;\n  start_date?: string;\n  end_date?: string;\n}\n\nexport class TicketRatingApi {\n  // 提交工单评分\n  static async submitRating(ticketId: number, data: SubmitTicketRatingRequest): Promise<TicketRating> {\n    return httpClient.post<TicketRating>(`/api/v1/tickets/${ticketId}/rating`, data);\n  }\n\n  // 获取工单评分\n  static async getRating(ticketId: number): Promise<TicketRating | null> {\n    return httpClient.get<TicketRating | null>(`/api/v1/tickets/${ticketId}/rating`);\n  }\n\n  // 获取评分统计\n  static async getRatingStats(params?: GetRatingStatsParams): Promise<RatingStats> {\n    return httpClient.get<RatingStats>('/api/v1/tickets/rating-stats', params);\n  }\n}\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAmDE;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAAAA,aAAA,GAAAE,CAAA;;;;;;+BAJW;;;;;;WAAAC,eAAA;;;;;iCA/Cc;AA+CpB,MAAMA,eAAA;EACX;EACA,aAAaC,aAAaC,QAAgB,EAAEC,IAA+B,EAAyB;IAAA;IAAAN,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAE,CAAA;IAClG,OAAOM,WAAA,CAAAC,UAAU,CAACC,IAAI,CAAe,mBAAmBL,QAAA,SAAiB,EAAEC,IAAA;EAC7E;EAEA;EACA,aAAaK,UAAUN,QAAgB,EAAgC;IAAA;IAAAL,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAE,CAAA;IACrE,OAAOM,WAAA,CAAAC,UAAU,CAACG,GAAG,CAAsB,mBAAmBP,QAAA,SAAiB;EACjF;EAEA;EACA,aAAaQ,eAAeC,MAA6B,EAAwB;IAAA;IAAAd,aAAA,GAAAO,CAAA;IAAAP,aAAA,GAAAE,CAAA;IAC/E,OAAOM,WAAA,CAAAC,UAAU,CAACG,GAAG,CAAc,gCAAgCE,MAAA;EACrE;AACF","ignoreList":[]}
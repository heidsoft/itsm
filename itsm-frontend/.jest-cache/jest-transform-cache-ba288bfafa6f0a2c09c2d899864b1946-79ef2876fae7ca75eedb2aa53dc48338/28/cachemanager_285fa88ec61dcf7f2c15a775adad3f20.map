{"version":3,"names":["cov_buncgeac8","actualCoverage","s","cacheManager","CacheManager","set","key","data","ttl","b","f","cache","size","maxSize","firstKey","keys","next","value","delete","timestamp","Date","now","get","item","clear","cleanup","entries","Map","setInterval"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/app/lib/cache-manager.ts"],"sourcesContent":["class CacheManager {\n  private cache = new Map<string, { data: unknown; timestamp: number; ttl: number }>();\n  private maxSize = 100;\n\n  set(key: string, data: unknown, ttl: number = 5 * 60 * 1000) {\n    // 如果缓存已满，删除最旧的条目\n    if (this.cache.size >= this.maxSize) {\n      const firstKey = this.cache.keys().next().value as string | undefined;\n      if (firstKey) this.cache.delete(firstKey);\n    }\n\n    this.cache.set(key, {\n      data,\n      timestamp: Date.now(),\n      ttl\n    });\n  }\n\n  get(key: string): unknown | null {\n    const item = this.cache.get(key);\n    if (!item) return null;\n\n    // 检查是否过期\n    if (Date.now() - item.timestamp > item.ttl) {\n      this.cache.delete(key);\n      return null;\n    }\n\n    return item.data;\n  }\n\n  delete(key: string) {\n    this.cache.delete(key);\n  }\n\n  clear() {\n    this.cache.clear();\n  }\n\n  // 清理过期缓存\n  cleanup() {\n    const now = Date.now();\n    for (const [key, item] of this.cache.entries()) {\n      if (now - item.timestamp > item.ttl) {\n        this.cache.delete(key);\n      }\n    }\n  }\n}\n\nexport const cacheManager = new CacheManager();\n\n// 定期清理过期缓存\nsetInterval(() => {\n  cacheManager.cleanup();\n}, 60000); // 每分钟清理一次"],"mappings":"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","ignoreList":[]}
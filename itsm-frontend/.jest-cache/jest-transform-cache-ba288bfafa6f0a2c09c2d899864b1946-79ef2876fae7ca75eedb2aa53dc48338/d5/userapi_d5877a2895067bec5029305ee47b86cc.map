{"version":3,"names":["cov_1swqxnlce8","actualCoverage","s","UserApi","baseURL","getUsers","params","b","f","_httpclient","httpClient","get","createUser","userData","post","getUserById","id","updateUser","put","deleteUser","delete","changeUserStatus","active","resetPassword","newPassword","new_password","getUserStats","tenantId","tenant_id","batchUpdateUsers","request","searchUsers","exportUsers","filters","blob","method","url","responseType","importUsers","file","formData","FormData","append","headers"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/lib/api/user-api.ts"],"sourcesContent":["import { httpClient } from './http-client';\n\n// 用户相关的接口定义\nexport interface User {\n  id: number;\n  username: string;\n  email: string;\n  name: string;\n  department: string;\n  phone: string;\n  active: boolean;\n  tenant_id: number;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface CreateUserRequest {\n  username: string;\n  email: string;\n  name: string;\n  department: string;\n  phone: string;\n  password: string;\n  tenant_id: number;\n}\n\nexport interface UpdateUserRequest {\n  username?: string;\n  email?: string;\n  name?: string;\n  department?: string;\n  phone?: string;\n}\n\nexport interface ListUsersParams {\n  page?: number;\n  page_size?: number;\n  tenant_id?: number;\n  status?: string;\n  department?: string;\n  search?: string;\n}\n\nexport interface PagedUsersResponse {\n  users: User[];\n  pagination: {\n    page: number;\n    page_size: number;\n    total: number;\n    total_page: number;\n  };\n}\n\nexport interface UserStatsResponse {\n  total: number;\n  active: number;\n  inactive: number;\n}\n\nexport interface BatchUpdateUsersRequest {\n  user_ids: number[];\n  action: 'activate' | 'deactivate' | 'department';\n  department?: string;\n}\n\nexport interface SearchUsersParams {\n  keyword: string;\n  tenant_id?: number;\n  limit?: number;\n}\n\nexport class UserApi {\n  private static baseURL = '/api/v1/users';\n\n  // 获取用户列表\n  static async getUsers(params: ListUsersParams = {}): Promise<PagedUsersResponse> {\n    return httpClient.get<PagedUsersResponse>(this.baseURL, params);\n  }\n\n  // 创建用户\n  static async createUser(userData: CreateUserRequest): Promise<User> {\n    return httpClient.post<User>(this.baseURL, userData);\n  }\n\n  // 获取用户详情\n  static async getUserById(id: number): Promise<User> {\n    return httpClient.get<User>(`${this.baseURL}/${id}`);\n  }\n\n  // 更新用户信息\n  static async updateUser(id: number, userData: UpdateUserRequest): Promise<User> {\n    return httpClient.put<User>(`${this.baseURL}/${id}`, userData);\n  }\n\n  // 删除用户（软删除）\n  static async deleteUser(id: number): Promise<void> {\n    await httpClient.delete(`${this.baseURL}/${id}`);\n  }\n\n  // 更改用户状态\n  static async changeUserStatus(id: number, active: boolean): Promise<void> {\n    await httpClient.put(`${this.baseURL}/${id}/status`, { active });\n  }\n\n  // 重置用户密码\n  static async resetPassword(id: number, newPassword: string): Promise<void> {\n    await httpClient.put(`${this.baseURL}/${id}/reset-password`, { new_password: newPassword });\n  }\n\n  // 获取用户统计\n  static async getUserStats(tenantId?: number): Promise<UserStatsResponse> {\n    const params = tenantId ? { tenant_id: tenantId } : {};\n    return httpClient.get<UserStatsResponse>(`${this.baseURL}/stats`, params);\n  }\n\n  // 批量更新用户\n  static async batchUpdateUsers(request: BatchUpdateUsersRequest): Promise<void> {\n    await httpClient.put(`${this.baseURL}/batch`, request);\n  }\n\n  // 搜索用户\n  static async searchUsers(params: SearchUsersParams): Promise<User[]> {\n    return httpClient.get<User[]>(`${this.baseURL}/search`, params);\n  }\n\n  // 导出用户\n  static async exportUsers(filters?: Record<string, unknown>): Promise<Blob> {\n    const blob = await httpClient.request<Blob>({\n      method: 'GET',\n      url: `${this.baseURL}/export`,\n      params: filters,\n      responseType: 'blob',\n    });\n    return blob;\n  }\n\n  // 导入用户\n  static async importUsers(file: File): Promise<{\n    success: User[];\n    failed: Array<{ index: number; user: CreateUserRequest; error: string }>;\n    total: number;\n    processed: number;\n  }> {\n    const formData = new FormData();\n    formData.append('file', file);\n    \n    return httpClient.post(`${this.baseURL}/import`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  }\n}"],"mappings":"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","ignoreList":[]}
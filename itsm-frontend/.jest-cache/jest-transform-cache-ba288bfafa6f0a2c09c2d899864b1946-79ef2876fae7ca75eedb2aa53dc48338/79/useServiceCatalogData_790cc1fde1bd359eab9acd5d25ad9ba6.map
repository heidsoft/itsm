{"version":3,"names":["cov_fve9sl2l5","actualCoverage","s","useServiceCatalogData","f","catalogs","setCatalogs","_react","useState","loading","setLoading","searchText","setSearchText","categoryFilter","setCategoryFilter","priorityFilter","setPriorityFilter","stats","setStats","total","cloudServices","accountServices","securityServices","useEffect","loadServiceCatalogs","length","filter","c","String","category","data","_servicecatalogapi","ServiceCatalogApi","getServices","b","services","error","console","filteredCatalogs","catalog","desc","shortDescription","description","toLowerCase","matchesSearch","name","includes","categoryLabel","matchesCategory","matchesPriority","priority"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/app/(main)/service-catalog/hooks/useServiceCatalogData.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { ServiceCatalogApi } from '@/lib/api/service-catalog-api';\nimport type { ServiceItem } from '@/types/service-catalog';\n\nexport const useServiceCatalogData = () => {\n  const [catalogs, setCatalogs] = useState<ServiceItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchText, setSearchText] = useState('');\n  const [categoryFilter, setCategoryFilter] = useState('');\n  const [priorityFilter, setPriorityFilter] = useState('');\n  const [stats, setStats] = useState({\n    total: 0,\n    cloudServices: 0,\n    accountServices: 0,\n    securityServices: 0,\n  });\n\n  useEffect(() => {\n    loadServiceCatalogs();\n  }, []);\n\n  useEffect(() => {\n    setStats({\n      total: catalogs.length,\n      cloudServices: catalogs.filter(c => String(c.category) === '云资源服务').length,\n      accountServices: catalogs.filter(c => String(c.category) === '账号与权限').length,\n      securityServices: catalogs.filter(c => String(c.category) === '安全服务').length,\n    });\n  }, [catalogs]);\n\n  const loadServiceCatalogs = async () => {\n    try {\n      setLoading(true);\n      const data = await ServiceCatalogApi.getServices();\n      setCatalogs(data.services || []);\n    } catch (error) {\n      console.error('加载服务目录失败:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredCatalogs = catalogs.filter(catalog => {\n    const desc = (catalog.shortDescription || (catalog as any).description || '').toLowerCase();\n    const matchesSearch = searchText\n      ? catalog.name.toLowerCase().includes(searchText.toLowerCase()) ||\n        desc.includes(searchText.toLowerCase())\n      : true;\n    const categoryLabel = String(catalog.category);\n    const matchesCategory = categoryFilter ? categoryLabel === categoryFilter : true;\n    const matchesPriority = priorityFilter ? (catalog as any).priority === priorityFilter : true;\n    return matchesSearch && matchesCategory && matchesPriority;\n  });\n\n  return {\n    catalogs: filteredCatalogs,\n    loading,\n    stats,\n    setSearchText,\n    setCategoryFilter,\n    setPriorityFilter,\n    loadServiceCatalogs,\n  };\n};\n"],"mappings":"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","ignoreList":[]}
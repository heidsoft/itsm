{"version":3,"names":["cov_npc5rm0vz","actualCoverage","s","ticketKeys","f","useBatchDeleteTicketsMutation","useCreateTicketMutation","useDeleteTicketMutation","usePrefetchTicketDetail","useRefreshTickets","useTicketDetailQuery","useTicketStatsQuery","useTicketsQuery","useUpdateTicketMutation","all","lists","list","filters","pagination","details","detail","id","stats","b","current","pageSize","total","_reactquery","useQuery","queryKey","queryFn","response","_ticketservice","ticketService","listTickets","page","page_size","totalPages","Math","ceil","tickets","Array","isArray","total_pages","error","console","enabled","staleTime","gcTime","getTicketStats","open","resolved","highPriority","high_priority","getTicket","queryClient","useQueryClient","useMutation","mutationFn","ticketData","createTicket","onSuccess","data","_antd","message","success","invalidateQueries","setQueryData","old","onError","errorMessage","updateTicket","variables","deleteTicket","removeQueries","max","ids","Promise","map","length","forEach","prefetchQuery"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/lib/hooks/useTicketsQuery.ts"],"sourcesContent":["'use client';\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { message } from 'antd';\nimport { ticketService, Ticket, TicketStatus, TicketPriority, TicketType } from '@/lib/services/ticket-service';\n\nexport interface TicketQueryFilters {\n  status?: TicketStatus;\n  priority?: TicketPriority;\n  type?: TicketType;\n  category?: string;\n  assignee_id?: number;\n  keyword?: string;\n  dateRange?: [string, string];\n  tags?: string[];\n  source?: string;\n  impact?: string;\n  urgency?: string;\n}\n\nexport interface TicketStats {\n  total: number;\n  open: number;\n  resolved: number;\n  highPriority: number;\n}\n\nexport interface PaginationState {\n  current: number;\n  pageSize: number;\n  total: number;\n}\n\n// Query Keys\nexport const ticketKeys = {\n  all: ['tickets'] as const,\n  lists: () => [...ticketKeys.all, 'list'] as const,\n  list: (filters: Partial<TicketQueryFilters>, pagination: PaginationState) =>\n    [...ticketKeys.lists(), filters, pagination] as const,\n  details: () => [...ticketKeys.all, 'detail'] as const,\n  detail: (id: number) => [...ticketKeys.details(), id] as const,\n  stats: () => [...ticketKeys.all, 'stats'] as const,\n};\n\n// 获取工单列表\nexport const useTicketsQuery = (\n  filters: Partial<TicketQueryFilters> = {},\n  pagination: PaginationState = { current: 1, pageSize: 20, total: 0 }\n) => {\n  return useQuery({\n    queryKey: ticketKeys.list(filters, pagination),\n    queryFn: async () => {\n      try {\n      const response = await ticketService.listTickets({\n        page: pagination.current,\n        page_size: pagination.pageSize,\n        ...filters,\n      });\n      const pageSize = response?.page_size || pagination.pageSize;\n      const total = response?.total || 0;\n      const totalPages = pageSize ? Math.ceil(total / pageSize) : 0;\n        // 确保返回的数据结构完整\n        return {\n          tickets: Array.isArray(response?.tickets) ? response.tickets : [],\n          total,\n          page: response?.page || pagination.current,\n          page_size: pageSize,\n          total_pages: totalPages,\n        };\n      } catch (error) {\n        console.error('Failed to fetch tickets:', error);\n        // 返回默认值而不是抛出错误，让React Query处理\n        throw error;\n      }\n    },\n    enabled: true,\n    staleTime: 2 * 60 * 1000, // 2分钟缓存\n    gcTime: 5 * 60 * 1000, // 5分钟垃圾回收\n  });\n};\n\n// 获取工单统计\nexport const useTicketStatsQuery = () => {\n  return useQuery({\n    queryKey: ticketKeys.stats(),\n    queryFn: async () => {\n      try {\n      const response = await ticketService.getTicketStats();\n        // 确保所有字段都有默认值\n        return {\n          total: response?.total || 0,\n          open: response?.open || 0,\n          resolved: response?.resolved || 0,\n          highPriority: response?.high_priority || 0,\n        };\n      } catch (error) {\n        console.error('Failed to fetch ticket stats:', error);\n        // 返回默认值\n      return {\n          total: 0,\n          open: 0,\n          resolved: 0,\n          highPriority: 0,\n      };\n      }\n    },\n    staleTime: 1 * 60 * 1000, // 1分钟缓存\n    gcTime: 3 * 60 * 1000, // 3分钟垃圾回收\n  });\n};\n\n// 获取单个工单详情\nexport const useTicketDetailQuery = (id: number) => {\n  return useQuery({\n    queryKey: ticketKeys.detail(id),\n    queryFn: async () => {\n      const response = await ticketService.getTicket(id);\n      return response;\n    },\n    enabled: !!id,\n    staleTime: 5 * 60 * 1000, // 5分钟缓存\n    gcTime: 10 * 60 * 1000, // 10分钟垃圾回收\n  });\n};\n\n// 创建工单\nexport const useCreateTicketMutation = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (ticketData: any) => {\n      const response = await ticketService.createTicket(ticketData);\n      return response;\n    },\n    onSuccess: (data) => {\n      message.success('Ticket created successfully');\n      \n      // 使相关查询失效，触发重新获取\n      queryClient.invalidateQueries({ queryKey: ticketKeys.lists() });\n      queryClient.invalidateQueries({ queryKey: ticketKeys.stats() });\n      \n      // 乐观更新统计\n      queryClient.setQueryData(ticketKeys.stats(), (old: TicketStats | undefined) => {\n        if (!old) return old;\n        return {\n          ...old,\n          total: old.total + 1,\n        };\n      });\n    },\n    onError: (error: any) => {\n      const errorMessage = error?.message || 'Failed to create ticket';\n      message.error(errorMessage);\n    },\n  });\n};\n\n// 更新工单\nexport const useUpdateTicketMutation = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ id, data }: { id: number; data: any }) => {\n      const response = await ticketService.updateTicket(id, data);\n      return response;\n    },\n    onSuccess: (data, variables) => {\n      message.success('Ticket updated successfully');\n      \n      // 更新缓存中的工单详情\n      queryClient.setQueryData(ticketKeys.detail(variables.id), data);\n      \n      // 使列表查询失效\n      queryClient.invalidateQueries({ queryKey: ticketKeys.lists() });\n      queryClient.invalidateQueries({ queryKey: ticketKeys.stats() });\n    },\n    onError: (error: any) => {\n      const errorMessage = error?.message || 'Failed to update ticket';\n      message.error(errorMessage);\n    },\n  });\n};\n\n// 删除工单\nexport const useDeleteTicketMutation = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (id: number) => {\n      await ticketService.deleteTicket(id);\n      return id;\n    },\n    onSuccess: (id) => {\n      message.success('Ticket deleted successfully');\n      \n      // 从缓存中移除工单详情\n      queryClient.removeQueries({ queryKey: ticketKeys.detail(id) });\n      \n      // 使列表查询失效\n      queryClient.invalidateQueries({ queryKey: ticketKeys.lists() });\n      queryClient.invalidateQueries({ queryKey: ticketKeys.stats() });\n      \n      // 乐观更新统计\n      queryClient.setQueryData(ticketKeys.stats(), (old: TicketStats | undefined) => {\n        if (!old) return old;\n        return {\n          ...old,\n          total: Math.max(0, old.total - 1),\n        };\n      });\n    },\n    onError: (error: any) => {\n      const errorMessage = error?.message || 'Failed to delete ticket';\n      message.error(errorMessage);\n    },\n  });\n};\n\n// 批量删除工单\nexport const useBatchDeleteTicketsMutation = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (ids: number[]) => {\n      await Promise.all(ids.map(id => ticketService.deleteTicket(id)));\n      return ids;\n    },\n    onSuccess: (ids) => {\n      message.success(`${ids.length} tickets deleted successfully`);\n      \n      // 从缓存中移除工单详情\n      ids.forEach(id => {\n        queryClient.removeQueries({ queryKey: ticketKeys.detail(id) });\n      });\n      \n      // 使列表查询失效\n      queryClient.invalidateQueries({ queryKey: ticketKeys.lists() });\n      queryClient.invalidateQueries({ queryKey: ticketKeys.stats() });\n      \n      // 乐观更新统计\n      queryClient.setQueryData(ticketKeys.stats(), (old: TicketStats | undefined) => {\n        if (!old) return old;\n        return {\n          ...old,\n          total: Math.max(0, old.total - ids.length),\n        };\n      });\n    },\n    onError: (error: any) => {\n      const errorMessage = error?.message || 'Failed to delete tickets';\n      message.error(errorMessage);\n    },\n  });\n};\n\n// 预加载工单详情\nexport const usePrefetchTicketDetail = () => {\n  const queryClient = useQueryClient();\n\n  return (id: number) => {\n    queryClient.prefetchQuery({\n      queryKey: ticketKeys.detail(id),\n      queryFn: async () => {\n        const response = await ticketService.getTicket(id);\n        return response;\n      },\n      staleTime: 5 * 60 * 1000,\n    });\n  };\n};\n\n// 手动刷新数据\nexport const useRefreshTickets = () => {\n  const queryClient = useQueryClient();\n\n  return () => {\n    queryClient.invalidateQueries({ queryKey: ticketKeys.all });\n  };\n};\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}
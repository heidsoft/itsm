{"version":3,"names":["_default","BPMNDesigner","xml","cov_1yyx7cmmed","b","onSave","onChange","onDeploy","readOnly","height","showPropertiesPanel","f","s","handleSave","finalXML","handleDeploy","handleMockChange","newXML","_jsxruntime","jsxs","style","border","borderRadius","padding","display","flexDirection","className","jsx","length","Fragment","_antd","Button","type","onClick"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/components/workflow/BPMNDesigner.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { Button } from 'antd';\n\ninterface BPMNDesignerProps {\n  xml: string;\n  onSave: (xml: string) => void;\n  onChange?: (xml: string) => void;\n  onDeploy?: (xml: string) => void;\n  readOnly?: boolean;\n  height?: number | string;\n  showPropertiesPanel?: boolean;\n}\n\nconst BPMNDesigner: React.FC<BPMNDesignerProps> = ({\n  xml = '',\n  onSave,\n  onChange,\n  onDeploy,\n  readOnly = false,\n  height = 600,\n  showPropertiesPanel = true,\n}) => {\n  const handleSave = () => {\n    const finalXML =\n      xml ||\n      `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<bpmn:definitions xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\">\n  <bpmn:process id=\"Process_1\" name=\"工作流\">\n  </bpmn:process>\n</bpmn:definitions>`;\n\n    if (onSave) {\n      onSave(finalXML);\n    }\n  };\n\n  const handleDeploy = () => {\n    if (onDeploy) {\n      onDeploy(xml);\n    }\n  };\n\n  const handleMockChange = () => {\n    if (onChange) {\n      // Mock a change\n      const newXML = xml + ' '; // Dummy change\n      onChange(newXML);\n    }\n  };\n\n  return (\n    <div\n      style={{\n        height,\n        border: '1px solid #d9d9d9',\n        borderRadius: '6px',\n        padding: '16px',\n        display: 'flex',\n        flexDirection: 'column',\n      }}\n    >\n      <div className='text-center text-gray-500 flex-1 flex flex-col justify-center items-center'>\n        <div className='mb-4'>\n          <h3 className='text-lg font-medium'>BPMN 流程设计器</h3>\n          <p className='text-sm text-gray-400 mt-2'>当前 XML 内容长度: {xml?.length || 0} 字符</p>\n          {readOnly && <p className='text-amber-500'>(只读模式)</p>}\n        </div>\n        <div className='space-x-4'>\n          {!readOnly && (\n            <>\n              <Button type='primary' onClick={handleSave}>\n                保存设计\n              </Button>\n              {onChange && <Button onClick={handleMockChange}>模拟修改</Button>}\n              {onDeploy && <Button onClick={handleDeploy}>部署流程</Button>}\n            </>\n          )}\n        </div>\n        <div className='mt-8 text-xs text-gray-300 max-w-md mx-auto'>\n          <p>此处应集成 bpmn-js 或其他图形化设计库。</p>\n          <p>当前为占位组件，已连接后端 API。</p>\n        </div>\n      </div>\n      {showPropertiesPanel && (\n        <div className='mt-4 p-3 border-t bg-gray-50 text-sm text-gray-500'>\n          <p>属性面板 (Properties Panel)</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default BPMNDesigner;\n"],"mappings":"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","ignoreList":[]}
{"version":3,"names":["default","cov_1tert7blii","f","s","_default","httpClient","HttpClient","constructor","baseURL","b","_apiconfig","API_BASE_URL","token","tenantId","tenantCode","process","env","NEXT_PUBLIC_API_URL","timeout","parseInt","NEXT_PUBLIC_API_TIMEOUT","window","localStorage","getItem","storedTenantId","setToken","setItem","document","cookie","clearToken","removeItem","setTenantId","toString","setTenantCode","code","_env","logger","info","getTenantCode","getTenantId","getHeaders","csrfToken","_security","security","csrf","getTokenFromMeta","headers","network","getSecureHeaders","undefined","currentToken","currentTenantId","currentTenantCode","refreshTokenInternal","refreshToken","response","fetch","method","body","JSON","stringify","refresh_token","ok","data","json","access_token","error","request","endpoint","config","url","requestConfig","NODE_ENV","NEXT_PUBLIC_DEBUG_API","debug","controller","AbortController","timeoutId","setTimeout","abort","signal","clearTimeout","status","statusText","Object","fromEntries","entries","refreshSuccess","retryConfig","retryResponse","rid","get","suffix","Error","retryData","message","location","href","responseData","errorMessage","name","includes","params","searchParams","URLSearchParams","forEach","key","value","append","String","post","put","patch","delete"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/app/lib/http-client.ts"],"sourcesContent":["import { API_BASE_URL } from './api-config';\nimport { security } from './security';\nimport { logger } from '@/lib/env';\n\n// Request configuration interface\ninterface RequestConfig {\n  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n  headers?: Record<string, string>;\n  body?: string;\n  timeout?: number;\n}\n\n// API response interface\ninterface ApiResponse<T> {\n  code: number;\n  message: string;\n  data: T;\n}\n\nclass HttpClient {\n  private baseURL: string;\n  private token: string | null = null;\n  private tenantId: number | null = null;\n  private tenantCode: string | null = null;\n  private readonly timeout: number;\n\n  constructor(baseURL: string = API_BASE_URL) {\n    this.baseURL = process.env.NEXT_PUBLIC_API_URL || baseURL;\n    this.timeout = parseInt(process.env.NEXT_PUBLIC_API_TIMEOUT || '30000');\n    // Get token and tenant ID from localStorage\n    if (typeof window !== 'undefined') {\n      this.token = localStorage.getItem('access_token'); // Changed to access_token\n      const storedTenantId = localStorage.getItem('current_tenant_id');\n      this.tenantId = storedTenantId ? parseInt(storedTenantId) : null;\n      this.tenantCode = localStorage.getItem('current_tenant_code') || null;\n    }\n  }\n\n  setToken(token: string) {\n    this.token = token;\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('access_token', token); // Changed to access_token\n      // 同步更新 Cookie，有效期 15 分钟\n      document.cookie = `auth-token=${token}; path=/; max-age=900; SameSite=Lax`;\n    }\n  }\n\n  clearToken() {\n    this.token = null;\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('access_token'); // Changed to access_token\n      // 清除 Cookie\n      document.cookie = 'auth-token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n      document.cookie = 'refresh-token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n    }\n  }\n\n  setTenantId(tenantId: number | null) {\n    this.tenantId = tenantId;\n    if (typeof window !== 'undefined') {\n      if (tenantId) {\n        localStorage.setItem('current_tenant_id', tenantId.toString());\n      } else {\n        localStorage.removeItem('current_tenant_id');\n      }\n    }\n  }\n\n  setTenantCode(code: string | null) {\n    this.tenantCode = code;\n    logger.info('HttpClient.setTenantCode:', code);\n    if (typeof window !== 'undefined') {\n      if (code) {\n        localStorage.setItem('current_tenant_code', code);\n      } else {\n        localStorage.removeItem('current_tenant_code');\n      }\n    }\n  }\n\n  // Get tenant code\n  getTenantCode(): string | null {\n    return this.tenantCode;\n  }\n\n  getTenantId(): number | null {\n    return this.tenantId;\n  }\n\n  private getHeaders(): Record<string, string> {\n    // Set secure request headers\n    const csrfToken = security.csrf.getTokenFromMeta();\n    const headers: Record<string, string> = {\n      ...security.network.getSecureHeaders(csrfToken || undefined),\n    };\n\n    // Dynamically get the latest token and tenantId\n    const currentToken = typeof window !== 'undefined' ? localStorage.getItem('access_token') : this.token;\n    const currentTenantId = typeof window !== 'undefined' ? localStorage.getItem('current_tenant_id') : this.tenantId;\n\n    if (currentToken) {\n      headers['Authorization'] = `Bearer ${currentToken}`;\n    }\n\n    if (currentTenantId) {\n      headers['X-Tenant-ID'] = currentTenantId.toString();\n    }\n    const currentTenantCode = typeof window !== 'undefined' ? localStorage.getItem('current_tenant_code') : this.tenantCode;\n    if (currentTenantCode) {\n      headers['X-Tenant-Code'] = currentTenantCode;\n    }\n\n    return headers;\n  }\n\n  // Independent token refresh method to avoid circular dependencies\n  private async refreshTokenInternal(): Promise<boolean> {\n    const refreshToken = typeof window !== 'undefined' ? localStorage.getItem('refresh_token') : null;\n    if (!refreshToken) {\n      return false;\n    }\n\n    try {\n      const response = await fetch(`${this.baseURL}/api/v1/refresh-token`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          refresh_token: refreshToken,\n        }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        if (data.code === 0) {\n          // Update access token\n          this.setToken(data.data.access_token);\n          // Also update instance variable\n          this.token = data.data.access_token;\n          return true;\n        }\n      }\n      return false;\n    } catch (error) {\n      logger.error('Token refresh failed:', error);\n      return false;\n    }\n  }\n\n  // Request method using fetch API\n  private async request<T>(endpoint: string, config: RequestConfig): Promise<T> {\n    const url = `${this.baseURL}${endpoint}`;\n    const headers = this.getHeaders();\n    const requestConfig: RequestInit = {\n      method: config.method,\n      headers: {\n        ...headers,\n        ...config.headers,\n      },\n      body: config.body,\n    };\n\n    // 仅在开发环境输出调试日志\n    if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_API === 'true') {\n      logger.debug('HTTP Client Request:', {\n        url,\n        method: config.method,\n        headers,\n        body: config.body\n      });\n    }\n\n    try {\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), this.timeout);\n      \n      const response = await fetch(url, {\n        ...requestConfig,\n        signal: controller.signal,\n      });\n      \n      clearTimeout(timeoutId);\n      \n      // 仅在开发环境输出调试日志\n      if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_API === 'true') {\n        logger.debug('HTTP Client Response:', {\n          status: response.status,\n          statusText: response.statusText,\n          headers: response.headers ? Object.fromEntries(response.headers.entries()) : {}\n        });\n      }\n      \n      // If 401 error, try to refresh token\n      if (response.status === 401) {\n        const refreshSuccess = await this.refreshTokenInternal();\n        if (refreshSuccess) {\n          // Retry original request\n          const retryConfig: RequestInit = {\n            ...requestConfig,\n            headers: {\n              ...this.getHeaders(),\n              ...config.headers,\n            },\n          };\n          const retryResponse = await fetch(url, retryConfig);\n          if (!retryResponse.ok) {\n            const rid = retryResponse.headers.get('X-Request-Id') || '';\n            const suffix = rid ? ` [RID: ${rid}]` : '';\n            throw new Error(`HTTP error! status: ${retryResponse.status}${suffix}`);\n          }\n          const retryData = await retryResponse.json() as ApiResponse<T>;\n          logger.debug('HTTP Client Retry Response Data:', retryData);\n          \n          // Check response code\n          if (retryData.code !== 0) {\n            const rid = retryResponse.headers.get('X-Request-Id') || '';\n            const suffix = rid ? ` [RID: ${rid}]` : '';\n            throw new Error((retryData.message || 'Request failed') + suffix);\n          }\n          \n          return retryData.data;\n        } else {\n          // Refresh failed, clear token and redirect to login\n          this.clearToken();\n          if (typeof window !== 'undefined') {\n            localStorage.removeItem('refresh_token');\n            window.location.href = '/login';\n          }\n          throw new Error('Authentication failed');\n        }\n      }\n\n      if (!response.ok) {\n        const rid = response.headers.get('X-Request-Id') || '';\n        const suffix = rid ? ` [RID: ${rid}]` : '';\n        throw new Error(`HTTP error! status: ${response.status}${suffix}`);\n      }\n\n      const responseData = await response.json() as ApiResponse<T>;\n      // 仅在开发环境输出调试日志\n      if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_API === 'true') {\n        logger.debug('HTTP Client Raw Response Data:', responseData);\n        logger.debug('HTTP Client Response Code:', responseData.code);\n        logger.debug('HTTP Client Response Message:', responseData.message);\n        logger.debug('HTTP Client Response Data Type:', typeof responseData.data);\n      }\n      \n      // Check response code\n      if (responseData.code !== 0) {\n        const rid = (response.headers && response.headers.get('X-Request-Id')) || '';\n        const suffix = rid ? ` [RID: ${rid}]` : '';\n        const errorMessage = responseData.message || 'Request failed';\n        logger.error('API Error:', {\n          code: responseData.code,\n          message: errorMessage,\n          endpoint,\n          url,\n          responseData\n        });\n        throw new Error(errorMessage + suffix);\n      }\n      \n      // 验证data字段存在\n      if (responseData.data === undefined || responseData.data === null) {\n        logger.error('API Response data is undefined or null:', responseData);\n        throw new Error('API响应数据为空');\n      }\n      \n      return responseData.data;\n    } catch (error: unknown) {\n      logger.error('Request failed:', {\n        error,\n        endpoint,\n        url: `${this.baseURL}${endpoint}`,\n        method: config.method\n      });\n      \n      if (error instanceof Error) {\n        if (error.name === 'AbortError') {\n          throw new Error('Request timeout, please try again later');\n        }\n        // 如果是网络错误，提供更友好的错误信息\n        if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {\n          throw new Error('无法连接到服务器，请检查网络连接或确保后端服务正在运行');\n        }\n        throw error;\n      }\n      throw new Error('Unknown error occurred');\n    }\n  }\n\n  async get<T>(endpoint: string, params?: Record<string, unknown>): Promise<T> {\n    let url = endpoint;\n    if (params) {\n      const searchParams = new URLSearchParams();\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          searchParams.append(key, String(value));\n        }\n      });\n      url += `?${searchParams.toString()}`;\n    }\n    \n    return this.request<T>(url, {\n      method: 'GET',\n    });\n  }\n\n  async post<T>(endpoint: string, data?: unknown): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'POST',\n      body: data ? JSON.stringify(data) : undefined,\n    });\n  }\n\n  async put<T>(endpoint: string, data?: unknown): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'PUT',\n      body: data ? JSON.stringify(data) : undefined,\n    });\n  }\n\n  async patch<T>(endpoint: string, data?: unknown): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'PATCH',\n      body: data ? JSON.stringify(data) : undefined,\n    });\n  }\n\n  async delete<T>(endpoint: string): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'DELETE',\n    });\n  }\n}\n\nexport const httpClient = new HttpClient();\nexport default HttpClient;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}
{"version":3,"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-frontend/src/__tests__/pages/cmdb-page.test.tsx"],"sourcesContent":["/**\n * CMDB 页面测试\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom';\n\nimport CIList from '@/modules/cmdb/components/CIList';\nimport CIDetail from '@/modules/cmdb/components/CIDetail';\nimport CreateCIPage from '@/app/(main)/cmdb/cis/create/page';\nimport { CMDBApi } from '@/modules/cmdb/api';\nimport type { ConfigurationItem, CIType } from '@/modules/cmdb/types';\n\nconst mockPush = jest.fn();\nconst mockBack = jest.fn();\nconst modalConfirmSpy = jest.fn();\n\njest.mock('next/navigation', () => ({\n  useRouter: () => ({\n    push: mockPush,\n    back: mockBack,\n    replace: jest.fn(),\n    prefetch: jest.fn(),\n  }),\n  useParams: () => ({ id: '1' }),\n}));\n\njest.mock('antd', () => {\n  const actual = jest.requireActual('antd');\n  const React = jest.requireActual('react');\n  const FormContext = React.createContext({\n    values: {},\n    setValues: () => {},\n  });\n\n  const Form = ({ children, onFinish }: any) => {\n    const [values, setValues] = React.useState<Record<string, unknown>>({});\n    const handleSubmit = (event: React.FormEvent) => {\n      event.preventDefault();\n      onFinish?.(values);\n    };\n\n    return (\n      <form onSubmit={handleSubmit}>\n        <FormContext.Provider value={{ values, setValues }}>\n          {children}\n        </FormContext.Provider>\n      </form>\n    );\n  };\n\n  Form.Item = ({ label, name, children }: any) => {\n    const context = React.useContext(FormContext);\n    if (!React.isValidElement(children)) {\n      return label ? (\n        <label>\n          {label}\n          {children}\n        </label>\n      ) : (\n        <>{children}</>\n      );\n    }\n\n    const handleChange = (event: any) => {\n      const value = event?.target?.value ?? event;\n      context.setValues((prev: Record<string, unknown>) => ({\n        ...prev,\n        [name]: value,\n      }));\n      children.props.onChange?.(event);\n    };\n\n    const inputElement = React.cloneElement(children, {\n      'aria-label': label,\n      name,\n      value: context.values[name] ?? '',\n      onChange: handleChange,\n    });\n\n    return label ? <label>{label}{inputElement}</label> : inputElement;\n  };\n\n  Form.useForm = () => [\n    {\n      getFieldsValue: () => ({}),\n      resetFields: jest.fn(),\n      setFieldsValue: jest.fn(),\n    },\n  ];\n\n  const Input = ({ allowClear, ...rest }: any) => <input {...rest} />;\n  Input.TextArea = ({ allowClear, ...rest }: any) => <textarea {...rest} />;\n\n  const Select = ({\n    children,\n    onChange,\n    value,\n    allowClear,\n    loading,\n    placeholder,\n    style,\n    ...rest\n  }: any) => (\n    <select\n      {...rest}\n      value={value ?? ''}\n      onChange={(event) => onChange?.(event.target.value)}\n    >\n      {children}\n    </select>\n  );\n  Select.Option = ({ value, children }: any) => <option value={value}>{children}</option>;\n\n  const Button = ({\n    children,\n    onClick,\n    htmlType,\n    danger,\n    type,\n    loading,\n    ...rest\n  }: any) => (\n    <button\n      type={htmlType === 'submit' ? 'submit' : 'button'}\n      onClick={onClick}\n      data-danger={danger ? 'true' : undefined}\n      data-variant={type || undefined}\n      {...rest}\n    >\n      {children}\n    </button>\n  );\n\n  const Table = ({ dataSource = [], columns = [], loading, pagination, ...rest }: any) => (\n    <div>\n      {dataSource.map((record: any, rowIndex: number) => (\n        <div key={record.id ?? rowIndex}>\n          {columns.map((column: any, colIndex: number) => {\n            const value = record[column.dataIndex];\n            const content = column.render ? column.render(value, record) : value;\n            return <div key={column.key ?? column.dataIndex ?? colIndex}>{content}</div>;\n          })}\n        </div>\n      ))}\n    </div>\n  );\n\n  const Tabs = ({ children }: any) => <div>{children}</div>;\n  Tabs.TabPane = ({ children }: any) => <div>{children}</div>;\n\n  const Descriptions = ({ children }: any) => <div>{children}</div>;\n  Descriptions.Item = ({ label, children }: any) => (\n    <div>\n      <span>{label}</span>\n      {children}\n    </div>\n  );\n\n  const Card = ({ children }: any) => <div>{children}</div>;\n  const Space = ({ children }: any) => <div>{children}</div>;\n  const Breadcrumb = ({ items = [] }: any) => (\n    <nav>\n      {items.map((item: any, index: number) => (\n        <span key={index}>{item.title}</span>\n      ))}\n    </nav>\n  );\n  const Tag = ({ children }: any) => <span>{children}</span>;\n  const Skeleton = ({ children }: any) => <div>{children}</div>;\n  const Result = ({ title, subTitle, extra }: any) => (\n    <div>\n      <div>{title}</div>\n      <div>{subTitle}</div>\n      {extra}\n    </div>\n  );\n  const Empty = ({ description }: any) => <div>{description}</div>;\n  const Tooltip = ({ children }: any) => <span>{children}</span>;\n\n  return {\n    ...actual,\n    Button,\n    Card,\n    Breadcrumb,\n    Descriptions,\n    Empty,\n    Form,\n    Input,\n    Modal: {\n      ...actual.Modal,\n      confirm: modalConfirmSpy,\n    },\n    Select,\n    Skeleton,\n    Space,\n    Table,\n    Tabs,\n    Tag,\n    Tooltip,\n    Result,\n    message: {\n      success: jest.fn(),\n      error: jest.fn(),\n      warning: jest.fn(),\n      info: jest.fn(),\n    },\n  };\n});\n\njest.mock('@/modules/cmdb/api', () => ({\n  CMDBApi: {\n    getCIs: jest.fn(),\n    getCI: jest.fn(),\n    getTypes: jest.fn(),\n    createCI: jest.fn(),\n    deleteCI: jest.fn(),\n  },\n}));\n\nconst mockTypes: CIType[] = [\n  {\n    id: 1,\n    name: '服务器',\n    description: '',\n    is_active: true,\n    tenant_id: 1,\n  },\n];\n\nconst mockItem: ConfigurationItem = {\n  id: 1,\n  name: '应用服务器-01',\n  description: '测试资产',\n  type: 'server',\n  status: 'active',\n  ci_type_id: 1,\n  tenant_id: 1,\n  created_at: '2024-01-01T00:00:00Z',\n  updated_at: '2024-01-01T00:00:00Z',\n};\n\ndescribe('CMDB 页面', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    modalConfirmSpy.mockClear();\n    (CMDBApi.getTypes as jest.Mock).mockResolvedValue(mockTypes);\n    (CMDBApi.getCIs as jest.Mock).mockResolvedValue({\n      items: [mockItem],\n      total: 1,\n      page: 1,\n      size: 10,\n    });\n    (CMDBApi.getCI as jest.Mock).mockResolvedValue(mockItem);\n    (CMDBApi.createCI as jest.Mock).mockResolvedValue(mockItem);\n    (CMDBApi.deleteCI as jest.Mock).mockResolvedValue(undefined);\n  });\n\n  it('CI 列表应展示资产并支持跳转', async () => {\n    render(<CIList />);\n\n    await screen.findByText('应用服务器-01');\n\n    fireEvent.click(screen.getByRole('button', { name: '应用服务器-01' }));\n    expect(mockPush).toHaveBeenCalledWith('/cmdb/cis/1');\n  });\n\n  it('CI 列表筛选触发数据刷新', async () => {\n    render(<CIList />);\n\n    await screen.findByText('应用服务器-01');\n\n    fireEvent.change(screen.getByPlaceholderText('搜索名称/序列号'), {\n      target: { value: 'server' },\n    });\n    const queryButton = screen.getByText('查询').closest('button');\n    fireEvent.click(queryButton as HTMLElement);\n\n    await waitFor(() => {\n      expect(CMDBApi.getCIs).toHaveBeenCalledTimes(2);\n    });\n  });\n\n  it('CI 删除应弹出确认并调用删除接口', async () => {\n    render(<CIList />);\n\n    await screen.findByText('应用服务器-01');\n\n    fireEvent.click(screen.getByRole('button', { name: '删除' }));\n    expect(modalConfirmSpy).toHaveBeenCalled();\n\n    const confirmArgs = modalConfirmSpy.mock.calls[0][0];\n    await confirmArgs.onOk();\n\n    expect(CMDBApi.deleteCI).toHaveBeenCalledWith(1);\n  });\n\n  it('CI 详情应展示资产信息', async () => {\n    render(<CIDetail />);\n\n    await waitFor(() => {\n      expect(screen.getByText('应用服务器-01')).toBeInTheDocument();\n    });\n    expect(screen.getByText(/配置项 ID: 1/)).toBeInTheDocument();\n  });\n\n  it('创建 CI 表单应提交并返回列表', async () => {\n    render(<CreateCIPage />);\n\n    await waitFor(() => {\n      expect(CMDBApi.getTypes).toHaveBeenCalled();\n    });\n\n    fireEvent.change(screen.getByLabelText('资产名称'), {\n      target: { value: '新资产' },\n    });\n\n    fireEvent.change(screen.getByLabelText('资产类型'), {\n      target: { value: '1' },\n    });\n\n    fireEvent.change(screen.getByLabelText('状态'), {\n      target: { value: 'active' },\n    });\n\n    const form = document.querySelector('form');\n    fireEvent.submit(form as HTMLFormElement);\n\n    await waitFor(() => {\n      expect(CMDBApi.createCI).toHaveBeenCalled();\n    });\n    expect(mockPush).toHaveBeenCalledWith('/cmdb');\n  });\n\n  it('创建 CI 表单应校验扩展属性 JSON', async () => {\n    const antd = require('antd');\n    render(<CreateCIPage />);\n\n    await waitFor(() => {\n      expect(CMDBApi.getTypes).toHaveBeenCalled();\n    });\n\n    fireEvent.change(screen.getByLabelText('资产名称'), {\n      target: { value: '新资产' },\n    });\n    fireEvent.change(screen.getByLabelText('资产类型'), {\n      target: { value: '1' },\n    });\n    fireEvent.change(screen.getByLabelText('状态'), {\n      target: { value: 'active' },\n    });\n    fireEvent.change(screen.getByLabelText('扩展属性'), {\n      target: { value: '{bad json' },\n    });\n\n    await waitFor(() => {\n      expect(screen.getByLabelText('扩展属性')).toHaveValue('{bad json');\n    });\n\n    fireEvent.click(screen.getByRole('button', { name: '保存' }));\n\n    await waitFor(() => {\n      expect(CMDBApi.createCI).not.toHaveBeenCalled();\n    });\n    expect(mockPush).not.toHaveBeenCalled();\n  });\n});\n"],"names":["jest","mock","useRouter","push","mockPush","back","mockBack","replace","fn","prefetch","useParams","id","actual","requireActual","React","FormContext","createContext","values","setValues","Form","children","onFinish","useState","handleSubmit","event","preventDefault","form","onSubmit","Provider","value","Item","label","name","context","useContext","isValidElement","handleChange","target","prev","props","onChange","inputElement","cloneElement","useForm","getFieldsValue","resetFields","setFieldsValue","Input","allowClear","rest","input","TextArea","textarea","Select","loading","placeholder","style","select","Option","option","Button","onClick","htmlType","danger","type","button","data-danger","undefined","data-variant","Table","dataSource","columns","pagination","div","map","record","rowIndex","column","colIndex","dataIndex","content","render","key","Tabs","TabPane","Descriptions","span","Card","Space","Breadcrumb","items","nav","item","index","title","Tag","Skeleton","Result","subTitle","extra","Empty","description","Tooltip","Modal","confirm","modalConfirmSpy","message","success","error","warning","info","CMDBApi","getCIs","getCI","getTypes","createCI","deleteCI","mockTypes","is_active","tenant_id","mockItem","status","ci_type_id","created_at","updated_at","describe","beforeEach","clearAllMocks","mockClear","mockResolvedValue","total","page","size","it","CIList","screen","findByText","fireEvent","click","getByRole","expect","toHaveBeenCalledWith","change","getByPlaceholderText","queryButton","getByText","closest","waitFor","toHaveBeenCalledTimes","toHaveBeenCalled","confirmArgs","calls","onOk","CIDetail","toBeInTheDocument","CreateCIPage","getByLabelText","document","querySelector","submit","antd","require","toHaveValue","not"],"mappings":"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"}
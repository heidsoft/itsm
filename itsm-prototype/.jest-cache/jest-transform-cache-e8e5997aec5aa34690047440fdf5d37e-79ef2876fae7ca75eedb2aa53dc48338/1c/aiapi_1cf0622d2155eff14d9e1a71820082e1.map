{"version":3,"names":["aiGetMetrics","cov_10amet561w","f","s","aiSaveFeedback","aiSearchKB","aiSimilarIncidents","aiSummarize","aiTriage","title","description","_httpclient","httpClient","post","query","limit","b","type","text","maxLen","max_len","feedback","days","get"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/lib/api/ai-api.ts"],"sourcesContent":["import { httpClient } from './http-client';\n\nexport interface TriageResult {\n  category: string;\n  priority: string;\n  assignee_id: number;\n  confidence: number;\n  explanation: string;\n}\n\nexport interface RagAnswer {\n  object_type: string;\n  id: number;\n  title?: string;\n  category?: string;\n  snippet: string;\n  source?: string;\n  score?: number;\n}\n\nexport interface AIFeedbackRequest {\n  kind: string;\n  query?: string;\n  item_type?: string;\n  item_id?: number;\n  useful: boolean;\n  score?: number;\n  notes?: string;\n}\n\nexport interface AIMetrics {\n  total_requests: number;\n  total_feedback: number;\n  useful_feedback: number;\n  useful_rate: number;\n  by_kind: Record<string, number>;\n  avg_response_time_seconds: number;\n}\n\nexport async function aiTriage(title: string, description: string): Promise<TriageResult> {\n  return httpClient.post<TriageResult>(`/api/v1/ai/triage`, { title, description });\n}\n\nexport async function aiSearchKB(query: string, limit = 5): Promise<{ answers: RagAnswer[] }> {\n  return httpClient.post<{ answers: RagAnswer[] }>(`/api/v1/ai/search`, { query, limit, type: 'kb' });\n}\n\nexport async function aiSimilarIncidents(query: string, limit = 5): Promise<{ incidents: RagAnswer[] }> {\n  return httpClient.post<{ incidents: RagAnswer[] }>(`/api/v1/ai/similar-incidents`, { query, limit });\n}\n\nexport async function aiSummarize(text: string, maxLen = 200): Promise<{ summary: string }> {\n  return httpClient.post<{ summary: string }>(`/api/v1/ai/summarize`, { text, max_len: maxLen });\n}\n\nexport async function aiSaveFeedback(feedback: AIFeedbackRequest): Promise<{ message: string }> {\n  return httpClient.post<{ message: string }>(`/api/v1/ai/feedback`, feedback);\n}\n\nexport async function aiGetMetrics(days = 7): Promise<AIMetrics> {\n  return httpClient.get<AIMetrics>(`/api/v1/ai/metrics?days=${days}`);\n}\n\n\n"],"mappings":"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","ignoreList":[]}
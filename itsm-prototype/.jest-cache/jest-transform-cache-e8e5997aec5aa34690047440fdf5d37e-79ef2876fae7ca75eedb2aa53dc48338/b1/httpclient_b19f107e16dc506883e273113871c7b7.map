{"version":3,"names":["default","cov_6zw4i2nch","f","s","_default","httpClient","HttpClient","constructor","baseURL","b","_apiconfig","API_BASE_URL","token","tenantId","tenantCode","process","env","NEXT_PUBLIC_API_URL","timeout","parseInt","NEXT_PUBLIC_API_TIMEOUT","window","localStorage","getItem","storedTenantId","setToken","setItem","document","cookie","clearToken","removeItem","setTenantId","toString","setTenantCode","code","console","log","getTenantCode","getTenantId","getAuthToken","getHeaders","csrfToken","_security","security","csrf","getTokenFromMeta","headers","network","getSecureHeaders","undefined","currentToken","currentTenantId","currentTenantCode","refreshTokenInternal","refreshToken","response","fetch","method","body","JSON","stringify","refresh_token","ok","data","json","access_token","error","request","endpoint","config","url","requestConfig","NODE_ENV","includes","warn","controller","AbortController","timeoutId","setTimeout","abort","signal","clearTimeout","status","statusText","Object","fromEntries","entries","refreshSuccess","retryConfig","retryResponse","rid","get","suffix","Error","retryData","message","location","href","responseData","name","params","searchParams","URLSearchParams","forEach","key","value","append","String","post","FormData","onUploadProgress","Promise","resolve","reject","xhr","XMLHttpRequest","upload","addEventListener","event","lengthComputable","progress","Math","round","loaded","total","parse","responseText","open","setRequestHeader","send","put","patch","delete","getPaginated","queryParams","filterKey","filterValue","batchOperation","operation","uploadFile","file","onProgress","formData"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/lib/api/http-client.ts"],"sourcesContent":["import { API_BASE_URL } from '@/app/lib/api-config';\nimport { security } from '@/lib/security';\n\n// Request configuration interface\ninterface RequestConfig {\n  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n  headers?: Record<string, string>;\n  body?: string;\n  timeout?: number;\n}\n\n// API response interface\ninterface ApiResponse<T> {\n  code: number;\n  message: string;\n  data: T;\n}\n\nclass HttpClient {\n  private baseURL: string;\n  private token: string | null = null;\n  private tenantId: number | null = null;\n  private tenantCode: string | null = null;\n  private readonly timeout: number;\n\n  constructor(baseURL: string = API_BASE_URL) {\n    this.baseURL = process.env.NEXT_PUBLIC_API_URL || baseURL;\n    this.timeout = parseInt(process.env.NEXT_PUBLIC_API_TIMEOUT || '30000');\n    // Get token and tenant ID from localStorage\n    if (typeof window !== 'undefined') {\n      this.token = localStorage.getItem('access_token'); // Changed to access_token\n      const storedTenantId = localStorage.getItem('current_tenant_id');\n      this.tenantId = storedTenantId ? parseInt(storedTenantId) : null;\n      this.tenantCode = localStorage.getItem('current_tenant_code') || null;\n    }\n  }\n\n  setToken(token: string) {\n    this.token = token;\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('access_token', token); // Changed to access_token\n      // 同步更新 Cookie，有效期 15 分钟\n      document.cookie = `auth-token=${token}; path=/; max-age=900; SameSite=Lax`;\n    }\n  }\n\n  clearToken() {\n    this.token = null;\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('access_token'); // Changed to access_token\n      // 清除 Cookie\n      document.cookie = 'auth-token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n      document.cookie = 'refresh-token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n    }\n  }\n\n  setTenantId(tenantId: number | null) {\n    this.tenantId = tenantId;\n    if (typeof window !== 'undefined') {\n      if (tenantId) {\n        localStorage.setItem('current_tenant_id', tenantId.toString());\n      } else {\n        localStorage.removeItem('current_tenant_id');\n      }\n    }\n  }\n\n  setTenantCode(code: string | null) {\n    this.tenantCode = code;\n    console.log('HttpClient.setTenantCode:', code);\n    if (typeof window !== 'undefined') {\n      if (code) {\n        localStorage.setItem('current_tenant_code', code);\n      } else {\n        localStorage.removeItem('current_tenant_code');\n      }\n    }\n  }\n\n  // Get tenant code\n  getTenantCode(): string | null {\n    return this.tenantCode;\n  }\n\n  getTenantId(): number | null {\n    return this.tenantId;\n  }\n\n  getAuthToken(): string | null {\n    return this.token;\n  }\n\n  private getHeaders(): Record<string, string> {\n    // Set secure request headers\n    const csrfToken = security.csrf.getTokenFromMeta();\n    const headers: Record<string, string> = {\n      ...security.network.getSecureHeaders(csrfToken || undefined),\n    };\n\n    // Dynamically get the latest token and tenantId\n    const currentToken = typeof window !== 'undefined' ? localStorage.getItem('access_token') : this.token;\n    const currentTenantId = typeof window !== 'undefined' ? localStorage.getItem('current_tenant_id') : this.tenantId;\n\n    if (currentToken) {\n      headers['Authorization'] = `Bearer ${currentToken}`;\n    }\n\n    if (currentTenantId) {\n      headers['X-Tenant-ID'] = currentTenantId.toString();\n    }\n    const currentTenantCode = typeof window !== 'undefined' ? localStorage.getItem('current_tenant_code') : this.tenantCode;\n    if (currentTenantCode) {\n      headers['X-Tenant-Code'] = currentTenantCode;\n    }\n\n    return headers;\n  }\n\n  // Independent token refresh method to avoid circular dependencies\n  private async refreshTokenInternal(): Promise<boolean> {\n    const refreshToken = typeof window !== 'undefined' ? localStorage.getItem('refresh_token') : null;\n    if (!refreshToken) {\n      return false;\n    }\n\n    try {\n      const response = await fetch(`${this.baseURL}/api/v1/refresh-token`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          refresh_token: refreshToken,\n        }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        if (data.code === 0) {\n          // Update access token\n          this.setToken(data.data.access_token);\n          // Also update instance variable\n          this.token = data.data.access_token;\n          return true;\n        }\n      }\n      return false;\n    } catch (error) {\n      console.error('Token refresh failed:', error);\n      return false;\n    }\n  }\n\n  // Request method using fetch API\n  private async request<T>(endpoint: string, config: RequestConfig): Promise<T> {\n    const url = `${this.baseURL}${endpoint}`;\n    const headers = this.getHeaders();\n    const requestConfig: RequestInit = {\n      method: config.method,\n      headers: {\n        ...headers,\n        ...config.headers,\n      },\n      body: config.body,\n    };\n\n    console.log('HTTP Client Request:', {\n      url,\n      method: config.method,\n      headers,\n      body: config.body\n    });\n\n    // 在开发模式下，如果后端服务不可用，使用模拟数据\n    if (process.env.NODE_ENV === 'development' && this.baseURL.includes('localhost')) {\n      console.warn('开发模式：正在连接到后端服务，如果后端服务未运行，将显示错误');\n    }\n\n    try {\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), this.timeout);\n      \n      const response = await fetch(url, {\n        ...requestConfig,\n        signal: controller.signal,\n      });\n      \n      clearTimeout(timeoutId);\n      \n      console.log('HTTP Client Response:', {\n        status: response.status,\n        statusText: response.statusText,\n        headers: response.headers ? Object.fromEntries(response.headers.entries()) : {}\n      });\n      \n      // If 401 error, try to refresh token\n      if (response.status === 401) {\n        const refreshSuccess = await this.refreshTokenInternal();\n        if (refreshSuccess) {\n          // Retry original request\n          const retryConfig: RequestInit = {\n            ...requestConfig,\n            headers: {\n              ...this.getHeaders(),\n              ...config.headers,\n            },\n          };\n          const retryResponse = await fetch(url, retryConfig);\n          if (!retryResponse.ok) {\n            const rid = retryResponse.headers.get('X-Request-Id') || '';\n            const suffix = rid ? ` [RID: ${rid}]` : '';\n            throw new Error(`HTTP error! status: ${retryResponse.status}${suffix}`);\n          }\n          const retryData = await retryResponse.json() as ApiResponse<T>;\n          console.log('HTTP Client Retry Response Data:', retryData);\n          \n          // Check response code\n          if (retryData.code !== 0) {\n            const rid = retryResponse.headers.get('X-Request-Id') || '';\n            const suffix = rid ? ` [RID: ${rid}]` : '';\n            throw new Error((retryData.message || 'Request failed') + suffix);\n          }\n          \n          return retryData.data;\n        } else {\n          // Refresh failed, clear token and redirect to login\n          this.clearToken();\n          if (typeof window !== 'undefined') {\n            localStorage.removeItem('refresh_token');\n            window.location.href = '/login';\n          }\n          throw new Error('Authentication failed');\n        }\n      }\n\n      if (!response.ok) {\n        const rid = response.headers.get('X-Request-Id') || '';\n        const suffix = rid ? ` [RID: ${rid}]` : '';\n        throw new Error(`HTTP error! status: ${response.status}${suffix}`);\n      }\n\n      const responseData = await response.json() as ApiResponse<T>;\n      console.log('HTTP Client Raw Response Data:', responseData);\n      \n      // Check response code\n      if (responseData.code !== 0) {\n        const rid = (response.headers && response.headers.get('X-Request-Id')) || '';\n        const suffix = rid ? ` [RID: ${rid}]` : '';\n        throw new Error((responseData.message || 'Request failed') + suffix);\n      }\n      \n      return responseData.data;\n    } catch (error: unknown) {\n      console.error('Request failed:', error);\n      if (error instanceof Error) {\n        if (error.name === 'AbortError') {\n          throw new Error('请求超时，请稍后重试');\n        }\n        if (error.message.includes('fetch')) {\n          throw new Error('无法连接到服务器，请检查网络连接和后端服务是否运行');\n        }\n        throw error;\n      }\n      throw new Error('未知错误发生');\n    }\n  }\n\n  async get<T>(endpoint: string, params?: Record<string, unknown>): Promise<T> {\n    let url = endpoint;\n    if (params) {\n      const searchParams = new URLSearchParams();\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          searchParams.append(key, String(value));\n        }\n      });\n      url += `?${searchParams.toString()}`;\n    }\n    \n    return this.request<T>(url, {\n      method: 'GET',\n    });\n  }\n\n  async post<T>(endpoint: string, data?: unknown, config?: { onUploadProgress?: (progress: number) => void }): Promise<T> {\n    // 如果是 FormData，直接传递，不进行 JSON.stringify\n    if (data instanceof FormData) {\n      const url = `${this.baseURL}${endpoint}`;\n      const headers = this.getHeaders();\n      // FormData 上传时，不要设置 Content-Type，让浏览器自动设置（包含 boundary）\n      delete headers['Content-Type'];\n      \n      // 如果支持上传进度，使用 XMLHttpRequest\n      if (config?.onUploadProgress) {\n        return new Promise<T>((resolve, reject) => {\n          const xhr = new XMLHttpRequest();\n          \n          xhr.upload.addEventListener('progress', (event) => {\n            if (event.lengthComputable && config.onUploadProgress) {\n              const progress = Math.round((event.loaded * 100) / event.total);\n              config.onUploadProgress(progress);\n            }\n          });\n          \n          xhr.addEventListener('load', () => {\n            if (xhr.status >= 200 && xhr.status < 300) {\n              try {\n                const response = JSON.parse(xhr.responseText) as ApiResponse<T>;\n                if (response.code === 0) {\n                  resolve(response.data);\n                } else {\n                  reject(new Error(response.message || 'Request failed'));\n                }\n              } catch (error) {\n                reject(new Error('Failed to parse response'));\n              }\n            } else {\n              reject(new Error(`HTTP error! status: ${xhr.status}`));\n            }\n          });\n          \n          xhr.addEventListener('error', () => {\n            reject(new Error('Network error'));\n          });\n          \n          xhr.open('POST', url);\n          Object.entries(headers).forEach(([key, value]) => {\n            if (key !== 'Content-Type') {\n              xhr.setRequestHeader(key, value);\n            }\n          });\n          xhr.send(data);\n        });\n      }\n      \n      // 不支持进度时，使用 fetch\n      const response = await fetch(url, {\n        method: 'POST',\n        headers,\n        body: data,\n      });\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      \n      const responseData = await response.json() as ApiResponse<T>;\n      if (responseData.code !== 0) {\n        throw new Error(responseData.message || 'Request failed');\n      }\n      \n      return responseData.data;\n    }\n    \n    return this.request<T>(endpoint, {\n      method: 'POST',\n      body: data ? JSON.stringify(data) : undefined,\n    });\n  }\n\n  async put<T>(endpoint: string, data?: unknown): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'PUT',\n      body: data ? JSON.stringify(data) : undefined,\n    });\n  }\n\n  async patch<T>(endpoint: string, data?: unknown): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'PATCH',\n      body: data ? JSON.stringify(data) : undefined,\n    });\n  }\n\n  async delete<T>(endpoint: string): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'DELETE',\n    });\n  }\n\n  // 分页查询方法\n  async getPaginated<T>(\n    endpoint: string, \n    params?: {\n      page?: number;\n      pageSize?: number;\n      sortBy?: string;\n      sortOrder?: 'asc' | 'desc';\n      filters?: Record<string, any>;\n    }\n  ): Promise<{\n    data: T[];\n    total: number;\n    page: number;\n    pageSize: number;\n    totalPages: number;\n  }> {\n    const queryParams = new URLSearchParams();\n    if (params) {\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          if (key === 'filters' && typeof value === 'object') {\n            Object.entries(value).forEach(([filterKey, filterValue]) => {\n              if (filterValue !== undefined && filterValue !== null) {\n                queryParams.append(`filters[${filterKey}]`, String(filterValue));\n              }\n            });\n          } else {\n            queryParams.append(key, String(value));\n          }\n        }\n      });\n    }\n    \n    const url = queryParams.toString() \n      ? `${endpoint}?${queryParams.toString()}` \n      : endpoint;\n      \n    return this.get(url);\n  }\n\n  // 批量操作方法\n  async batchOperation<T>(\n    endpoint: string, \n    operation: string, \n    data: any[]\n  ): Promise<T[]> {\n    return this.post<T[]>(endpoint, {\n      operation,\n      data\n    });\n  }\n\n  // 文件上传方法\n  async uploadFile(\n    endpoint: string, \n    file: File, \n    onProgress?: (progress: number) => void\n  ): Promise<{\n    url: string;\n    filename: string;\n    size: number;\n  }> {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      \n      xhr.upload.addEventListener('progress', (event) => {\n        if (event.lengthComputable && onProgress) {\n          const progress = (event.loaded / event.total) * 100;\n          onProgress(progress);\n        }\n      });\n\n      xhr.addEventListener('load', () => {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          try {\n            const response = JSON.parse(xhr.responseText);\n            resolve(response);\n          } catch (error) {\n            reject(new Error('Invalid response format'));\n          }\n        } else {\n          reject(new Error(`Upload failed: ${xhr.statusText}`));\n        }\n      });\n\n      xhr.addEventListener('error', () => {\n        reject(new Error('Upload failed'));\n      });\n\n      xhr.open('POST', endpoint);\n      \n      // 添加认证头\n      const token = this.getAuthToken();\n      if (token) {\n        xhr.setRequestHeader('Authorization', `Bearer ${token}`);\n      }\n\n      xhr.send(formData);\n    });\n  }\n}\n\nexport const httpClient = new HttpClient();\nexport default HttpClient;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}
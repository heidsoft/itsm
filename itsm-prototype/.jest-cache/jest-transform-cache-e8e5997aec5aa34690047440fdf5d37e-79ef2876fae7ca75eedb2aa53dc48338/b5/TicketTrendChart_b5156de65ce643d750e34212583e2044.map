{"version":3,"names":["_default","TicketTrendChart","cov_1gaqdudqjb","s","_react","default","memo","data","f","config","flatMap","item","date","type","value","open","inProgress","resolved","closed","xField","yField","seriesField","smooth","animation","appear","duration","color","lineStyle","lineWidth","point","size","shape","style","fill","stroke","legend","position","offsetY","tooltip","shared","showCrosshairs","customItems","originalItems","map","slider","start","end","scrollbar","responsive","totalTickets","reduce","sum","trend","length","b","_jsxruntime","jsx","_DashboardChartCard","DashboardChartCard","title","subtitle","icon","_lucidereact","LineChart","width","height","iconColor","isPositive","extra","_antd","Badge","count","showZero","backgroundColor","boxShadow","_charts","Line","displayName"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/app/(main)/dashboard/components/TicketTrendChart.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { Badge } from 'antd';\nimport { Line } from '@ant-design/charts';\nimport { LineChart } from 'lucide-react'; // Import Lucide LineChart\nimport { TicketTrendData } from '../types/dashboard.types';\nimport { DashboardChartCard } from './DashboardChartCard'; // Import from new file\n\n// 工单趋势图\nconst TicketTrendChart: React.FC<{ data: TicketTrendData[] }> = React.memo(({ data }) => {\n  const config = {\n    data: data.flatMap(item => [\n      { date: item.date, type: '待处理', value: item.open },\n      { date: item.date, type: '处理中', value: item.inProgress },\n      { date: item.date, type: '已解决', value: item.resolved },\n      { date: item.date, type: '已关闭', value: item.closed },\n    ]),\n    xField: 'date',\n    yField: 'value',\n    seriesField: 'type',\n    smooth: true,\n    animation: {\n      appear: {\n        animation: 'path-in',\n        duration: 1200,\n      },\n    },\n    color: ['#3b82f6', '#f59e0b', '#10b981', '#8b5cf6'],\n    lineStyle: {\n      lineWidth: 3,\n    },\n    point: {\n      size: 5,\n      shape: 'circle',\n      style: {\n        fill: '#fff',\n        stroke: '#000',\n        lineWidth: 2,\n      },\n    },\n    legend: {\n      position: 'top' as const,\n      offsetY: -5,\n    },\n    tooltip: {\n      shared: true,\n      showCrosshairs: true,\n      customItems: (originalItems: any[]) => {\n        return originalItems.map(item => {\n          return {\n            ...item,\n            value: `${item.value} 个`,\n          };\n        });\n      },\n    },\n    slider: {\n      start: 0,\n      end: 1,\n    },\n    scrollbar: {\n      type: 'horizontal',\n    },\n    responsive: true,\n  };\n\n  const totalTickets = data.reduce(\n    (sum, item) => sum + item.open + item.inProgress + item.resolved + item.closed,\n    0\n  );\n  const trend = data.length > 1 ? (data[data.length - 1].resolved / data[0].resolved - 1) * 100 : 0;\n\n  return (\n    <DashboardChartCard\n      title='工单趋势分析'\n      subtitle='过去7天工单状态变化趋势'\n      icon={<LineChart style={{ width: 20, height: 20 }} />}\n      iconColor='#3b82f6'\n      trend={{ value: trend, isPositive: trend > 0 }}\n      extra={\n        <Badge\n          count={totalTickets}\n          showZero\n          style={{\n            backgroundColor: '#3b82f6',\n            boxShadow: '0 2px 8px rgba(59, 130, 246, 0.3)',\n          }}\n        />\n      }\n    >\n      <div style={{ height: '320px' }}>\n        <Line {...config} />\n      </div>\n    </DashboardChartCard>\n  );\n});\n\nTicketTrendChart.displayName = 'TicketTrendChart';\n\nexport default TicketTrendChart;\n"],"mappings":"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","ignoreList":[]}
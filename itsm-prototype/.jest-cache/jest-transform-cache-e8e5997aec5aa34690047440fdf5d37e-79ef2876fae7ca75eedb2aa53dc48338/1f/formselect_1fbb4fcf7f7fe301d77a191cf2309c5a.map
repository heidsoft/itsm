{"version":3,"names":["FormSelect","Select","value","options","cov_17b277jno5","b","multiple","searchable","clearable","loading","loadingText","noOptionsText","maxTagCount","placeholder","disabled","onChange","onSearch","className","f","isOpen","setIsOpen","s","_react","useState","searchQuery","setSearchQuery","filteredOptions","setFilteredOptions","selectRef","useRef","searchInputRef","selectedValues","Array","isArray","undefined","selectedOptions","filter","option","includes","useEffect","filtered","label","toLowerCase","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleOptionClick","newValue","currentValues","v","handleClear","e","stopPropagation","handleSearch","query","renderSelectedTags","length","visibleTags","slice","hiddenCount","_jsxruntime","jsxs","map","jsx","type","onClick","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","renderDisplayText","selectClasses","Boolean","join","ref","autoFocus","isSelected","fillRule","clipRule","props","error","help","selectProps","_formfield","FormField","name","required"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/lib/components/form/form-select.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { FormSelectProps, SelectOption } from './types';\nimport { FormField } from './form-field';\n\nconst Select: React.FC<Omit<FormSelectProps, 'label' | 'error' | 'help'>> = ({\n  value,\n  options = [],\n  multiple = false,\n  searchable = false,\n  clearable = false,\n  loading = false,\n  loadingText = '加载中...',\n  noOptionsText = '暂无选项',\n  maxTagCount = 3,\n  placeholder,\n  disabled = false,\n  onChange,\n  onSearch,\n  className = ''\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filteredOptions, setFilteredOptions] = useState(options);\n  const selectRef = useRef<HTMLDivElement>(null);\n  const searchInputRef = useRef<HTMLInputElement>(null);\n\n  // 处理选中值\n  const selectedValues = Array.isArray(value) ? value : value !== undefined ? [value] : [];\n  const selectedOptions = options.filter(option => selectedValues.includes(option.value));\n\n  // 过滤选项\n  useEffect(() => {\n    if (!searchQuery) {\n      setFilteredOptions(options);\n    } else {\n      const filtered = options.filter(option =>\n        option.label.toLowerCase().includes(searchQuery.toLowerCase())\n      );\n      setFilteredOptions(filtered);\n    }\n  }, [searchQuery, options]);\n\n  // 点击外部关闭下拉框\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (selectRef.current && !selectRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n        setSearchQuery('');\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // 处理选项点击\n  const handleOptionClick = (option: SelectOption) => {\n    if (option.disabled) return;\n\n    let newValue;\n    if (multiple) {\n      const currentValues = Array.isArray(value) ? value as (string | number)[] : [];\n      if (currentValues.includes(option.value)) {\n        newValue = currentValues.filter(v => v !== option.value);\n      } else {\n        newValue = [...currentValues, option.value];\n      }\n    } else {\n      newValue = option.value;\n      setIsOpen(false);\n    }\n\n    onChange?.(newValue);\n  };\n\n  // 处理清除\n  const handleClear = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    onChange?.(multiple ? [] : undefined);\n  };\n\n  // 处理搜索\n  const handleSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const query = e.target.value;\n    setSearchQuery(query);\n    onSearch?.(query);\n  };\n\n  // 渲染选中的标签\n  const renderSelectedTags = () => {\n    if (!multiple || selectedOptions.length === 0) return null;\n\n    const visibleTags = selectedOptions.slice(0, maxTagCount);\n    const hiddenCount = selectedOptions.length - maxTagCount;\n\n    return (\n      <div className=\"flex flex-wrap gap-1\">\n        {visibleTags.map(option => (\n          <span\n            key={option.value}\n            className=\"inline-flex items-center px-2 py-1 rounded text-xs bg-blue-100 text-blue-800\"\n          >\n            {option.label}\n            <button\n              type=\"button\"\n              onClick={(e) => {\n                e.stopPropagation();\n                handleOptionClick(option);\n              }}\n              className=\"ml-1 hover:text-blue-600\"\n            >\n              <svg className=\"h-3 w-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </span>\n        ))}\n        {hiddenCount > 0 && (\n          <span className=\"inline-flex items-center px-2 py-1 rounded text-xs bg-gray-100 text-gray-600\">\n            +{hiddenCount}\n          </span>\n        )}\n      </div>\n    );\n  };\n\n  // 渲染显示文本\n  const renderDisplayText = () => {\n    if (multiple) {\n      return selectedOptions.length > 0 ? null : placeholder;\n    }\n    return selectedOptions.length > 0 ? selectedOptions[0].label : placeholder;\n  };\n\n  const selectClasses = [\n    'relative w-full cursor-pointer rounded-md border border-gray-300 bg-white py-2 pl-3 pr-10 text-left shadow-sm',\n    'focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500',\n    disabled ? 'bg-gray-50 cursor-not-allowed' : 'hover:border-gray-400',\n    className\n  ].filter(Boolean).join(' ');\n\n  return (\n    <div ref={selectRef} className=\"relative\">\n      <div\n        className={selectClasses}\n        onClick={() => !disabled && setIsOpen(!isOpen)}\n      >\n        <div className=\"flex items-center min-h-[20px]\">\n          {multiple ? (\n            <div className=\"flex-1\">\n              {renderSelectedTags()}\n              {selectedOptions.length === 0 && (\n                <span className=\"text-gray-500\">{placeholder}</span>\n              )}\n            </div>\n          ) : (\n            <span className={selectedOptions.length > 0 ? 'text-gray-900' : 'text-gray-500'}>\n              {renderDisplayText()}\n            </span>\n          )}\n        </div>\n\n        <div className=\"absolute inset-y-0 right-0 flex items-center pr-2\">\n          {clearable && selectedOptions.length > 0 && (\n            <button\n              type=\"button\"\n              onClick={handleClear}\n              className=\"mr-1 hover:text-gray-600\"\n            >\n              <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          )}\n          <svg\n            className={`h-4 w-4 text-gray-400 transition-transform ${\n              isOpen ? 'rotate-180' : ''\n            }`}\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n          </svg>\n        </div>\n      </div>\n\n      {isOpen && (\n        <div className=\"absolute z-10 mt-1 w-full rounded-md bg-white shadow-lg border border-gray-200\">\n          {searchable && (\n            <div className=\"p-2 border-b border-gray-200\">\n              <input\n                ref={searchInputRef}\n                type=\"text\"\n                value={searchQuery}\n                onChange={handleSearch}\n                placeholder=\"搜索选项...\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-blue-500 focus:ring-1 focus:ring-blue-500\"\n                autoFocus\n              />\n            </div>\n          )}\n\n          <div className=\"max-h-60 overflow-auto py-1\">\n            {loading ? (\n              <div className=\"px-3 py-2 text-gray-500 text-center\">{loadingText}</div>\n            ) : filteredOptions.length === 0 ? (\n              <div className=\"px-3 py-2 text-gray-500 text-center\">{noOptionsText}</div>\n            ) : (\n              filteredOptions.map(option => {\n                const isSelected = selectedValues.includes(option.value);\n                return (\n                  <div\n                    key={option.value}\n                    onClick={() => handleOptionClick(option)}\n                    className={[\n                      'cursor-pointer select-none relative py-2 pl-3 pr-9',\n                      option.disabled\n                        ? 'text-gray-400 cursor-not-allowed'\n                        : isSelected\n                        ? 'bg-blue-100 text-blue-900'\n                        : 'text-gray-900 hover:bg-gray-100'\n                    ].filter(Boolean).join(' ')}\n                  >\n                    <span className=\"block truncate\">{option.label}</span>\n                    {isSelected && (\n                      <span className=\"absolute inset-y-0 right-0 flex items-center pr-4\">\n                        <svg className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                          <path\n                            fillRule=\"evenodd\"\n                            d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\"\n                            clipRule=\"evenodd\"\n                          />\n                        </svg>\n                      </span>\n                    )}\n                  </div>\n                );\n              })\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport const FormSelect: React.FC<FormSelectProps> = (props) => {\n  const { label, error, help, ...selectProps } = props;\n\n  if (label || error || help) {\n    return (\n      <FormField\n        name={props.name}\n        label={label}\n        required={props.required}\n        error={error}\n        help={help}\n      >\n        <Select {...selectProps} />\n      </FormField>\n    );\n  }\n\n  return <Select {...selectProps} />;\n};"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BAyPa;;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","ignoreList":[]}
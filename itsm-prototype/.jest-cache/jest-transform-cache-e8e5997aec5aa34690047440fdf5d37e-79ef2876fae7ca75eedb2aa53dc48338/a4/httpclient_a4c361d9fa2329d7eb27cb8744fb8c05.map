{"version":3,"names":["default","cov_9c6dj683r","f","s","_default","httpClient","HttpClient","constructor","baseURL","b","_apiconfig","API_BASE_URL","token","tenantId","tenantCode","process","env","NEXT_PUBLIC_API_URL","timeout","parseInt","NEXT_PUBLIC_API_TIMEOUT","window","localStorage","getItem","storedTenantId","setToken","setItem","document","cookie","clearToken","removeItem","setTenantId","toString","setTenantCode","code","console","log","getTenantCode","getTenantId","getHeaders","csrfToken","_security","security","csrf","getTokenFromMeta","headers","network","getSecureHeaders","undefined","currentToken","currentTenantId","currentTenantCode","refreshTokenInternal","refreshToken","response","fetch","method","body","JSON","stringify","refresh_token","ok","data","json","access_token","error","request","endpoint","config","url","requestConfig","NODE_ENV","NEXT_PUBLIC_DEBUG_API","controller","AbortController","timeoutId","setTimeout","abort","signal","clearTimeout","status","statusText","Object","fromEntries","entries","refreshSuccess","retryConfig","retryResponse","rid","get","suffix","Error","retryData","message","location","href","responseData","errorMessage","name","includes","params","searchParams","URLSearchParams","forEach","key","value","append","String","post","put","patch","delete"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/app/lib/http-client.ts"],"sourcesContent":["import { API_BASE_URL } from './api-config';\nimport { security } from './security';\n\n// Request configuration interface\ninterface RequestConfig {\n  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH';\n  headers?: Record<string, string>;\n  body?: string;\n  timeout?: number;\n}\n\n// API response interface\ninterface ApiResponse<T> {\n  code: number;\n  message: string;\n  data: T;\n}\n\nclass HttpClient {\n  private baseURL: string;\n  private token: string | null = null;\n  private tenantId: number | null = null;\n  private tenantCode: string | null = null;\n  private readonly timeout: number;\n\n  constructor(baseURL: string = API_BASE_URL) {\n    this.baseURL = process.env.NEXT_PUBLIC_API_URL || baseURL;\n    this.timeout = parseInt(process.env.NEXT_PUBLIC_API_TIMEOUT || '30000');\n    // Get token and tenant ID from localStorage\n    if (typeof window !== 'undefined') {\n      this.token = localStorage.getItem('access_token'); // Changed to access_token\n      const storedTenantId = localStorage.getItem('current_tenant_id');\n      this.tenantId = storedTenantId ? parseInt(storedTenantId) : null;\n      this.tenantCode = localStorage.getItem('current_tenant_code') || null;\n    }\n  }\n\n  setToken(token: string) {\n    this.token = token;\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('access_token', token); // Changed to access_token\n      // 同步更新 Cookie，有效期 15 分钟\n      document.cookie = `auth-token=${token}; path=/; max-age=900; SameSite=Lax`;\n    }\n  }\n\n  clearToken() {\n    this.token = null;\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem('access_token'); // Changed to access_token\n      // 清除 Cookie\n      document.cookie = 'auth-token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n      document.cookie = 'refresh-token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n    }\n  }\n\n  setTenantId(tenantId: number | null) {\n    this.tenantId = tenantId;\n    if (typeof window !== 'undefined') {\n      if (tenantId) {\n        localStorage.setItem('current_tenant_id', tenantId.toString());\n      } else {\n        localStorage.removeItem('current_tenant_id');\n      }\n    }\n  }\n\n  setTenantCode(code: string | null) {\n    this.tenantCode = code;\n    console.log('HttpClient.setTenantCode:', code);\n    if (typeof window !== 'undefined') {\n      if (code) {\n        localStorage.setItem('current_tenant_code', code);\n      } else {\n        localStorage.removeItem('current_tenant_code');\n      }\n    }\n  }\n\n  // Get tenant code\n  getTenantCode(): string | null {\n    return this.tenantCode;\n  }\n\n  getTenantId(): number | null {\n    return this.tenantId;\n  }\n\n  private getHeaders(): Record<string, string> {\n    // Set secure request headers\n    const csrfToken = security.csrf.getTokenFromMeta();\n    const headers: Record<string, string> = {\n      ...security.network.getSecureHeaders(csrfToken || undefined),\n    };\n\n    // Dynamically get the latest token and tenantId\n    const currentToken = typeof window !== 'undefined' ? localStorage.getItem('access_token') : this.token;\n    const currentTenantId = typeof window !== 'undefined' ? localStorage.getItem('current_tenant_id') : this.tenantId;\n\n    if (currentToken) {\n      headers['Authorization'] = `Bearer ${currentToken}`;\n    }\n\n    if (currentTenantId) {\n      headers['X-Tenant-ID'] = currentTenantId.toString();\n    }\n    const currentTenantCode = typeof window !== 'undefined' ? localStorage.getItem('current_tenant_code') : this.tenantCode;\n    if (currentTenantCode) {\n      headers['X-Tenant-Code'] = currentTenantCode;\n    }\n\n    return headers;\n  }\n\n  // Independent token refresh method to avoid circular dependencies\n  private async refreshTokenInternal(): Promise<boolean> {\n    const refreshToken = typeof window !== 'undefined' ? localStorage.getItem('refresh_token') : null;\n    if (!refreshToken) {\n      return false;\n    }\n\n    try {\n      const response = await fetch(`${this.baseURL}/api/v1/refresh-token`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          refresh_token: refreshToken,\n        }),\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        if (data.code === 0) {\n          // Update access token\n          this.setToken(data.data.access_token);\n          // Also update instance variable\n          this.token = data.data.access_token;\n          return true;\n        }\n      }\n      return false;\n    } catch (error) {\n      console.error('Token refresh failed:', error);\n      return false;\n    }\n  }\n\n  // Request method using fetch API\n  private async request<T>(endpoint: string, config: RequestConfig): Promise<T> {\n    const url = `${this.baseURL}${endpoint}`;\n    const headers = this.getHeaders();\n    const requestConfig: RequestInit = {\n      method: config.method,\n      headers: {\n        ...headers,\n        ...config.headers,\n      },\n      body: config.body,\n    };\n\n    // 仅在开发环境输出调试日志\n    if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_API === 'true') {\n      console.log('HTTP Client Request:', {\n        url,\n        method: config.method,\n        headers,\n        body: config.body\n      });\n    }\n\n    try {\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), this.timeout);\n      \n      const response = await fetch(url, {\n        ...requestConfig,\n        signal: controller.signal,\n      });\n      \n      clearTimeout(timeoutId);\n      \n      // 仅在开发环境输出调试日志\n      if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_API === 'true') {\n        console.log('HTTP Client Response:', {\n          status: response.status,\n          statusText: response.statusText,\n          headers: response.headers ? Object.fromEntries(response.headers.entries()) : {}\n        });\n      }\n      \n      // If 401 error, try to refresh token\n      if (response.status === 401) {\n        const refreshSuccess = await this.refreshTokenInternal();\n        if (refreshSuccess) {\n          // Retry original request\n          const retryConfig: RequestInit = {\n            ...requestConfig,\n            headers: {\n              ...this.getHeaders(),\n              ...config.headers,\n            },\n          };\n          const retryResponse = await fetch(url, retryConfig);\n          if (!retryResponse.ok) {\n            const rid = retryResponse.headers.get('X-Request-Id') || '';\n            const suffix = rid ? ` [RID: ${rid}]` : '';\n            throw new Error(`HTTP error! status: ${retryResponse.status}${suffix}`);\n          }\n          const retryData = await retryResponse.json() as ApiResponse<T>;\n          console.log('HTTP Client Retry Response Data:', retryData);\n          \n          // Check response code\n          if (retryData.code !== 0) {\n            const rid = retryResponse.headers.get('X-Request-Id') || '';\n            const suffix = rid ? ` [RID: ${rid}]` : '';\n            throw new Error((retryData.message || 'Request failed') + suffix);\n          }\n          \n          return retryData.data;\n        } else {\n          // Refresh failed, clear token and redirect to login\n          this.clearToken();\n          if (typeof window !== 'undefined') {\n            localStorage.removeItem('refresh_token');\n            window.location.href = '/login';\n          }\n          throw new Error('Authentication failed');\n        }\n      }\n\n      if (!response.ok) {\n        const rid = response.headers.get('X-Request-Id') || '';\n        const suffix = rid ? ` [RID: ${rid}]` : '';\n        throw new Error(`HTTP error! status: ${response.status}${suffix}`);\n      }\n\n      const responseData = await response.json() as ApiResponse<T>;\n      // 仅在开发环境输出调试日志\n      if (process.env.NODE_ENV === 'development' && process.env.NEXT_PUBLIC_DEBUG_API === 'true') {\n        console.log('HTTP Client Raw Response Data:', responseData);\n        console.log('HTTP Client Response Code:', responseData.code);\n        console.log('HTTP Client Response Message:', responseData.message);\n        console.log('HTTP Client Response Data Type:', typeof responseData.data);\n      }\n      \n      // Check response code\n      if (responseData.code !== 0) {\n        const rid = (response.headers && response.headers.get('X-Request-Id')) || '';\n        const suffix = rid ? ` [RID: ${rid}]` : '';\n        const errorMessage = responseData.message || 'Request failed';\n        console.error('API Error:', {\n          code: responseData.code,\n          message: errorMessage,\n          endpoint,\n          url,\n          responseData\n        });\n        throw new Error(errorMessage + suffix);\n      }\n      \n      // 验证data字段存在\n      if (responseData.data === undefined || responseData.data === null) {\n        console.error('API Response data is undefined or null:', responseData);\n        throw new Error('API响应数据为空');\n      }\n      \n      return responseData.data;\n    } catch (error: unknown) {\n      console.error('Request failed:', {\n        error,\n        endpoint,\n        url: `${this.baseURL}${endpoint}`,\n        method: config.method\n      });\n      \n      if (error instanceof Error) {\n        if (error.name === 'AbortError') {\n          throw new Error('Request timeout, please try again later');\n        }\n        // 如果是网络错误，提供更友好的错误信息\n        if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {\n          throw new Error('无法连接到服务器，请检查网络连接或确保后端服务正在运行');\n        }\n        throw error;\n      }\n      throw new Error('Unknown error occurred');\n    }\n  }\n\n  async get<T>(endpoint: string, params?: Record<string, unknown>): Promise<T> {\n    let url = endpoint;\n    if (params) {\n      const searchParams = new URLSearchParams();\n      Object.entries(params).forEach(([key, value]) => {\n        if (value !== undefined && value !== null) {\n          searchParams.append(key, String(value));\n        }\n      });\n      url += `?${searchParams.toString()}`;\n    }\n    \n    return this.request<T>(url, {\n      method: 'GET',\n    });\n  }\n\n  async post<T>(endpoint: string, data?: unknown): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'POST',\n      body: data ? JSON.stringify(data) : undefined,\n    });\n  }\n\n  async put<T>(endpoint: string, data?: unknown): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'PUT',\n      body: data ? JSON.stringify(data) : undefined,\n    });\n  }\n\n  async patch<T>(endpoint: string, data?: unknown): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'PATCH',\n      body: data ? JSON.stringify(data) : undefined,\n    });\n  }\n\n  async delete<T>(endpoint: string): Promise<T> {\n    return this.request<T>(endpoint, {\n      method: 'DELETE',\n    });\n  }\n}\n\nexport const httpClient = new HttpClient();\nexport default HttpClient;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}
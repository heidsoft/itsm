{"version":3,"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/components/__tests__/EnterpriseLoginForm.test.tsx"],"sourcesContent":["/**\n * 企业级ITSM登录组件单元测试\n * 使用React Testing Library和Jest进行测试\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport '@testing-library/jest-dom';\nimport { LoginForm as EnterpriseLoginForm } from '../EnterpriseLoginForm';\n\n// Mock数据\nconst mockLoginResponse = {\n  success: true,\n  token: 'mock-jwt-token',\n  refreshToken: 'mock-refresh-token',\n  user: {\n    id: '1',\n    username: 'testuser',\n    email: 'test@example.com',\n    role: 'admin',\n  },\n};\n\nconst mockMfaResponse = {\n  success: false,\n  requiresMfa: true,\n  mfaType: 'totp' as const,\n};\n\n// Mock函数\nconst mockOnLogin = jest.fn();\nconst mockOnForgotPassword = jest.fn();\nconst mockOnSSOLogin = jest.fn();\nconst mockOnWebAuthnLogin = jest.fn();\n\n// 测试工具函数\nconst renderLoginForm = (props = {}) => {\n  const defaultProps = {\n    onLogin: mockOnLogin,\n    onForgotPassword: mockOnForgotPassword,\n    onSSOLogin: mockOnSSOLogin,\n    onWebAuthnLogin: mockOnWebAuthnLogin,\n    language: 'zh' as const,\n    enableSSO: true,\n    enableWebAuthn: true,\n    csrfToken: 'mock-csrf-token',\n  };\n\n  return render(<EnterpriseLoginForm {...defaultProps} {...props} />);\n};\n\ndescribe('EnterpriseLoginForm', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('基础渲染测试', () => {\n    test('应该正确渲染登录表单', () => {\n      renderLoginForm();\n\n      expect(screen.getByRole('heading', { name: /系统登录/i })).toBeInTheDocument();\n      expect(screen.getByLabelText(/用户名\\/邮箱/i)).toBeInTheDocument();\n      expect(screen.getByLabelText('密码', { selector: 'input' })).toBeInTheDocument();\n      expect(screen.getByRole('checkbox', { name: /记住我/i })).toBeInTheDocument();\n      expect(screen.getByRole('button', { name: /登录/i })).toBeInTheDocument();\n    });\n\n    test('应该正确渲染英文界面', () => {\n      renderLoginForm({ language: 'en' });\n\n      expect(screen.getByRole('heading', { name: /system login/i })).toBeInTheDocument();\n      expect(screen.getByLabelText(/username\\/email/i)).toBeInTheDocument();\n      expect(screen.getByLabelText(/password/i)).toBeInTheDocument();\n    });\n\n    test('应该显示SSO和WebAuthn按钮', () => {\n      renderLoginForm();\n\n      expect(screen.getByRole('button', { name: /sso 单点登录/i })).toBeInTheDocument();\n      expect(screen.getByRole('button', { name: /使用生物识别登录/i })).toBeInTheDocument();\n    });\n\n    test('当禁用SSO时不应显示SSO按钮', () => {\n      renderLoginForm({ enableSSO: false });\n\n      expect(screen.queryByRole('button', { name: /sso 单点登录/i })).not.toBeInTheDocument();\n    });\n  });\n\n  describe('表单验证测试', () => {\n    test('应该验证必填字段', async () => {\n      const user = userEvent.setup();\n      renderLoginForm();\n\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n      await user.click(submitButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/此字段为必填项/i)).toBeInTheDocument();\n      });\n    });\n\n    test('应该验证邮箱格式', async () => {\n      const user = userEvent.setup();\n      renderLoginForm();\n\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n\n      await user.type(usernameInput, 'invalid-email');\n      await user.click(submitButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/请输入有效的邮箱地址/i)).toBeInTheDocument();\n      });\n    });\n\n    test('应该验证密码长度', async () => {\n      const user = userEvent.setup();\n      renderLoginForm();\n\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n\n      await user.type(usernameInput, 'test@example.com');\n      await user.type(passwordInput, '123');\n      await user.click(submitButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/密码长度至少8位/i)).toBeInTheDocument();\n      });\n    });\n\n    test('应该接受有效的用户名格式', async () => {\n      const user = userEvent.setup();\n      renderLoginForm();\n\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n\n      await user.type(usernameInput, 'validuser123');\n      await user.type(passwordInput, 'password123');\n\n      // 验证没有错误信息\n      expect(screen.queryByText(/请输入有效的邮箱地址/i)).not.toBeInTheDocument();\n    });\n  });\n\n  describe('用户交互测试', () => {\n    test('应该切换密码可见性', async () => {\n      const user = userEvent.setup();\n      renderLoginForm();\n\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' }) as HTMLInputElement;\n      const toggleButton = screen.getByRole('button', { name: /显示密码/i });\n\n      expect(passwordInput.type).toBe('password');\n\n      await user.click(toggleButton);\n      expect(passwordInput.type).toBe('text');\n\n      await user.click(toggleButton);\n      expect(passwordInput.type).toBe('password');\n    });\n\n    test('应该处理记住我选项', async () => {\n      const user = userEvent.setup();\n      renderLoginForm();\n\n      const rememberMeCheckbox = screen.getByRole('checkbox', { name: /记住我/i }) as HTMLInputElement;\n\n      expect(rememberMeCheckbox.checked).toBe(false);\n\n      await user.click(rememberMeCheckbox);\n      expect(rememberMeCheckbox.checked).toBe(true);\n    });\n\n    test('应该清除字段错误当用户输入时', async () => {\n      const user = userEvent.setup();\n      renderLoginForm();\n\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n\n      // 触发验证错误\n      await user.click(submitButton);\n      await waitFor(() => {\n        expect(screen.getByText(/此字段为必填项/i)).toBeInTheDocument();\n      });\n\n      // 输入内容应该清除错误\n      await user.type(usernameInput, 'test');\n      expect(screen.queryByText(/此字段为必填项/i)).not.toBeInTheDocument();\n    });\n  });\n\n  describe('登录流程测试', () => {\n    test('应该成功提交登录表单', async () => {\n      const user = userEvent.setup();\n      mockOnLogin.mockResolvedValue(mockLoginResponse);\n      renderLoginForm();\n\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n      const rememberMeCheckbox = screen.getByRole('checkbox', { name: /记住我/i });\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n\n      await user.type(usernameInput, 'test@example.com');\n      await user.type(passwordInput, 'password123');\n      await user.click(rememberMeCheckbox);\n      await user.click(submitButton);\n\n      await waitFor(() => {\n        expect(mockOnLogin).toHaveBeenCalledWith({\n          username: 'test@example.com',\n          password: 'password123',\n          rememberMe: true,\n          totpCode: '',\n        });\n      });\n    });\n\n    test('应该显示加载状态', async () => {\n      const user = userEvent.setup();\n      mockOnLogin.mockImplementation(() => new Promise(resolve => setTimeout(resolve, 1000)));\n      renderLoginForm();\n\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n\n      await user.type(usernameInput, 'test@example.com');\n      await user.type(passwordInput, 'password123');\n      await user.click(submitButton);\n\n      expect(screen.getByText(/登录中.../i)).toBeInTheDocument();\n      expect(submitButton).toBeDisabled();\n    });\n\n    test('应该处理登录错误', async () => {\n      const user = userEvent.setup();\n      mockOnLogin.mockRejectedValue(new Error('Invalid credentials'));\n      renderLoginForm();\n\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n\n      await user.type(usernameInput, 'test@example.com');\n      await user.type(passwordInput, 'wrongpassword');\n      await user.click(submitButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/用户名或密码错误/i)).toBeInTheDocument();\n      });\n    });\n\n    test('应该防止重复提交', async () => {\n      const user = userEvent.setup();\n      mockOnLogin.mockImplementation(() => new Promise(resolve => setTimeout(resolve, 100)));\n      renderLoginForm();\n\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n\n      await user.type(usernameInput, 'test@example.com');\n      await user.type(passwordInput, 'password123');\n\n      // 快速点击两次\n      await user.click(submitButton);\n      await user.click(submitButton);\n\n      // 应该只调用一次\n      expect(mockOnLogin).toHaveBeenCalledTimes(1);\n    });\n  });\n\n  describe('MFA测试', () => {\n    test('应该显示MFA界面当需要时', async () => {\n      const user = userEvent.setup();\n      mockOnLogin.mockResolvedValue(mockMfaResponse);\n      renderLoginForm();\n\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n\n      await user.type(usernameInput, 'test@example.com');\n      await user.type(passwordInput, 'password123');\n      await user.click(submitButton);\n\n      await waitFor(() => {\n        expect(screen.getByRole('heading', { name: /多因素认证/i })).toBeInTheDocument();\n        expect(screen.getByLabelText(/totp 验证码/i)).toBeInTheDocument();\n      });\n    });\n\n    test('应该验证TOTP代码格式', async () => {\n      const user = userEvent.setup();\n      mockOnLogin.mockResolvedValue(mockMfaResponse);\n      renderLoginForm();\n\n      // 先触发MFA界面\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n\n      await user.type(usernameInput, 'test@example.com');\n      await user.type(passwordInput, 'password123');\n      await user.click(submitButton);\n\n      await waitFor(() => {\n        expect(screen.getByLabelText(/totp 验证码/i)).toBeInTheDocument();\n      });\n\n      // 测试无效的TOTP代码\n      const totpInput = screen.getByLabelText(/totp 验证码/i);\n      const verifyButton = screen.getByRole('button', { name: /验证/i });\n\n      await user.type(totpInput, '123');\n      await user.click(verifyButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/验证码错误或已过期/i)).toBeInTheDocument();\n      });\n    });\n\n    test('应该只允许数字输入TOTP代码', async () => {\n      const user = userEvent.setup();\n      mockOnLogin.mockResolvedValue(mockMfaResponse);\n      renderLoginForm();\n\n      // 先触发MFA界面\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n\n      await user.type(usernameInput, 'test@example.com');\n      await user.type(passwordInput, 'password123');\n      await user.click(submitButton);\n\n      await waitFor(() => {\n        expect(screen.getByLabelText(/totp 验证码/i)).toBeInTheDocument();\n      });\n\n      const totpInput = screen.getByLabelText(/totp 验证码/i) as HTMLInputElement;\n      await user.type(totpInput, 'abc123def');\n\n      expect(totpInput.value).toBe('123');\n    });\n\n    test('应该能够返回登录界面', async () => {\n      const user = userEvent.setup();\n      mockOnLogin.mockResolvedValue(mockMfaResponse);\n      renderLoginForm();\n\n      // 先触发MFA界面\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n\n      await user.type(usernameInput, 'test@example.com');\n      await user.type(passwordInput, 'password123');\n      await user.click(submitButton);\n\n      await waitFor(() => {\n        expect(screen.getByRole('heading', { name: /多因素认证/i })).toBeInTheDocument();\n      });\n\n      // 点击返回按钮\n      const backButton = screen.getByRole('button', { name: /返回登录/i });\n      await user.click(backButton);\n\n      expect(screen.getByRole('heading', { name: /系统登录/i })).toBeInTheDocument();\n    });\n  });\n\n  describe('外部登录测试', () => {\n    test('应该调用SSO登录', async () => {\n      const user = userEvent.setup();\n      renderLoginForm();\n\n      const ssoButton = screen.getByRole('button', { name: /sso 单点登录/i });\n      await user.click(ssoButton);\n\n      expect(mockOnSSOLogin).toHaveBeenCalled();\n    });\n\n    test('应该调用WebAuthn登录', async () => {\n      const user = userEvent.setup();\n      mockOnWebAuthnLogin.mockResolvedValue(mockLoginResponse);\n      renderLoginForm();\n\n      const webauthnButton = screen.getByRole('button', { name: /使用生物识别登录/i });\n      await user.click(webauthnButton);\n\n      expect(mockOnWebAuthnLogin).toHaveBeenCalled();\n    });\n\n    test('应该处理WebAuthn登录错误', async () => {\n      const user = userEvent.setup();\n      mockOnWebAuthnLogin.mockRejectedValue(new Error('WebAuthn not supported'));\n      renderLoginForm();\n\n      const webauthnButton = screen.getByRole('button', { name: /使用生物识别登录/i });\n      await user.click(webauthnButton);\n\n      await waitFor(() => {\n        expect(screen.getByText(/网络连接失败，请重试/i)).toBeInTheDocument();\n      });\n    });\n\n    test('应该调用忘记密码', async () => {\n      const user = userEvent.setup();\n      renderLoginForm();\n\n      const forgotPasswordButton = screen.getByRole('button', { name: /忘记密码？/i });\n      await user.click(forgotPasswordButton);\n\n      expect(mockOnForgotPassword).toHaveBeenCalled();\n    });\n  });\n\n  describe('安全特性测试', () => {\n    test('应该限制登录尝试次数', async () => {\n      const user = userEvent.setup();\n      mockOnLogin.mockRejectedValue(new Error('Invalid credentials'));\n      renderLoginForm();\n\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n\n      await user.type(usernameInput, 'test@example.com');\n      await user.type(passwordInput, 'wrongpassword');\n\n      // 尝试登录5次\n      for (let i = 0; i < 5; i++) {\n        await user.click(submitButton);\n        await waitFor(() => {\n          expect(screen.getByText(/用户名或密码错误/i)).toBeInTheDocument();\n        });\n      }\n\n      // 第6次应该被阻止\n      await user.click(submitButton);\n      await waitFor(() => {\n        expect(screen.getByText(/登录尝试次数过多，请稍后再试/i)).toBeInTheDocument();\n      });\n    });\n\n    test('应该包含CSRF token', async () => {\n      const user = userEvent.setup();\n      mockOnLogin.mockResolvedValue(mockLoginResponse);\n      renderLoginForm({ csrfToken: 'test-csrf-token' });\n\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n\n      await user.type(usernameInput, 'test@example.com');\n      await user.type(passwordInput, 'password123');\n      await user.click(submitButton);\n\n      // 验证隐藏的CSRF token字段存在\n      expect(screen.getByDisplayValue('test-csrf-token')).toBeInTheDocument();\n    });\n  });\n\n  describe('可访问性测试', () => {\n    test('应该有正确的ARIA标签', () => {\n      renderLoginForm();\n\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n\n      expect(usernameInput).toHaveAttribute('aria-invalid', 'false');\n      expect(passwordInput).toHaveAttribute('aria-invalid', 'false');\n      expect(usernameInput).toHaveAttribute('required');\n      expect(passwordInput).toHaveAttribute('required');\n    });\n\n    test('应该在错误时设置正确的ARIA属性', async () => {\n      const user = userEvent.setup();\n      renderLoginForm();\n\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n      await user.click(submitButton);\n\n      await waitFor(() => {\n        const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n        expect(usernameInput).toHaveAttribute('aria-invalid', 'true');\n        expect(usernameInput).toHaveAttribute('aria-describedby', 'username-error');\n      });\n    });\n\n    test('应该有屏幕阅读器公告', async () => {\n      const user = userEvent.setup();\n      renderLoginForm();\n\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n      await user.click(submitButton);\n\n      await waitFor(() => {\n        const announcer = document.querySelector('[aria-live=\"assertive\"]');\n        expect(announcer).toBeInTheDocument();\n      });\n    });\n\n    test('应该支持键盘导航', () => {\n      renderLoginForm();\n\n      const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n      const passwordInput = screen.getByLabelText('密码', { selector: 'input' });\n\n      // 测试Tab键导航\n      usernameInput.focus();\n      expect(document.activeElement).toBe(usernameInput);\n\n      fireEvent.keyDown(usernameInput, { key: 'Tab' });\n      expect(document.activeElement).toBe(passwordInput);\n    });\n  });\n\n  describe('自定义样式测试', () => {\n    test('应该应用自定义className', () => {\n      const { container } = renderLoginForm({ className: 'custom-login-form' });\n      \n      expect(container.firstChild).toHaveClass('custom-login-form');\n    });\n\n    test('应该在错误状态下应用错误样式', async () => {\n      const user = userEvent.setup();\n      renderLoginForm();\n\n      const submitButton = screen.getByRole('button', { name: /登录/i });\n      await user.click(submitButton);\n\n      await waitFor(() => {\n        const usernameInput = screen.getByLabelText(/用户名\\/邮箱/i);\n        expect(usernameInput).toHaveClass('border-red-300', 'bg-red-50');\n      });\n    });\n  });\n});\n\n// 集成测试\ndescribe('EnterpriseLoginForm Integration', () => {\n  test('完整的登录流程', async () => {\n    const user = userEvent.setup();\n    const mockLogin = jest.fn().mockResolvedValue(mockLoginResponse);\n    \n    render(\n      <EnterpriseLoginForm\n        onLogin={mockLogin}\n        language=\"zh\"\n        enableSSO={true}\n        enableWebAuthn={true}\n      />\n    );\n\n    // 填写表单\n    await user.type(screen.getByLabelText(/用户名\\/邮箱/i), 'admin@example.com');\n    await user.type(screen.getByLabelText('密码', { selector: 'input' }), 'password123');\n    await user.click(screen.getByRole('checkbox', { name: /记住我/i }));\n\n    // 提交表单\n    await user.click(screen.getByRole('button', { name: /登录/i }));\n\n    // 验证调用\n    await waitFor(() => {\n      expect(mockLogin).toHaveBeenCalledWith({\n        username: 'admin@example.com',\n        password: 'password123',\n        rememberMe: true,\n        totpCode: '',\n      });\n    });\n  });\n\n  test('完整的MFA流程', async () => {\n    const user = userEvent.setup();\n    const mockLogin = jest.fn()\n      .mockResolvedValueOnce(mockMfaResponse)\n      .mockResolvedValueOnce(mockLoginResponse);\n    \n    render(<EnterpriseLoginForm onLogin={mockLogin} />);\n\n    // 第一步：普通登录\n    await user.type(screen.getByLabelText(/用户名\\/邮箱/i), 'admin@example.com');\n    await user.type(screen.getByLabelText('密码', { selector: 'input' }), 'password123');\n    await user.click(screen.getByRole('button', { name: /登录/i }));\n\n    // 等待MFA界面出现\n    await waitFor(() => {\n      expect(screen.getByRole('heading', { name: /多因素认证/i })).toBeInTheDocument();\n    });\n\n    // 第二步：输入TOTP代码\n    await user.type(screen.getByLabelText(/totp 验证码/i), '123456');\n    await user.click(screen.getByRole('button', { name: /验证/i }));\n\n    // 验证两次调用\n    await waitFor(() => {\n      expect(mockLogin).toHaveBeenCalledTimes(2);\n      expect(mockLogin).toHaveBeenLastCalledWith({\n        username: 'admin@example.com',\n        password: 'password123',\n        rememberMe: false,\n        totpCode: '123456',\n      });\n    });\n  });\n});\n"],"names":["mockLoginResponse","success","token","refreshToken","user","id","username","email","role","mockMfaResponse","requiresMfa","mfaType","mockOnLogin","jest","fn","mockOnForgotPassword","mockOnSSOLogin","mockOnWebAuthnLogin","renderLoginForm","props","defaultProps","onLogin","onForgotPassword","onSSOLogin","onWebAuthnLogin","language","enableSSO","enableWebAuthn","csrfToken","render","EnterpriseLoginForm","describe","beforeEach","clearAllMocks","test","expect","screen","getByRole","name","toBeInTheDocument","getByLabelText","selector","queryByRole","not","userEvent","setup","submitButton","click","waitFor","getByText","usernameInput","type","passwordInput","queryByText","toggleButton","toBe","rememberMeCheckbox","checked","mockResolvedValue","toHaveBeenCalledWith","password","rememberMe","totpCode","mockImplementation","Promise","resolve","setTimeout","toBeDisabled","mockRejectedValue","Error","toHaveBeenCalledTimes","totpInput","verifyButton","value","backButton","ssoButton","toHaveBeenCalled","webauthnButton","forgotPasswordButton","i","getByDisplayValue","toHaveAttribute","announcer","document","querySelector","focus","activeElement","fireEvent","keyDown","key","container","className","firstChild","toHaveClass","mockLogin","mockResolvedValueOnce","toHaveBeenLastCalledWith"],"mappings":"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"}
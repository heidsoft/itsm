982d520fb9c84bf5289228384a7db3bd
"use strict";
jest.mock('@/lib/store/auth-store', ()=>({
        useAuthStore: ()=>({
                currentTenant: {
                    id: 1
                }
            })
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
require("@testing-library/jest-dom");
const _IncidentManagement = /*#__PURE__*/ _interop_require_default(require("../../components/business/IncidentManagement"));
const _incidentapi = require("../../lib/api/incident-api");
const _antd = require("antd");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
describe('IncidentManagement interactions', ()=>{
    it('loads incidents via API layer with pagination', async ()=>{
        const spy = jest.spyOn(_incidentapi.IncidentAPI, 'listIncidents').mockResolvedValue({
            incidents: [],
            total: 0
        });
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_antd.App, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_IncidentManagement.default, {})
        }));
        await (0, _react1.waitFor)(()=>expect(spy).toHaveBeenCalled());
        const params = (spy.mock.calls[0] || [])[0];
        expect(params.page).toBe(1);
        expect(params.page_size).toBeGreaterThan(0);
        spy.mockRestore();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oZWlkc29mdC9Eb3dubG9hZHMvcmVzZWFyY2gvaXRzbS9pdHNtLXByb3RvdHlwZS9zcmMvYXBwL19fdGVzdHNfXy9pbmNpZGVudC1saXN0LWludGVyYWN0aW9ucy50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyByZW5kZXIsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0J1xuaW1wb3J0ICdAdGVzdGluZy1saWJyYXJ5L2plc3QtZG9tJ1xuaW1wb3J0IEluY2lkZW50TWFuYWdlbWVudCBmcm9tICdAL2NvbXBvbmVudHMvYnVzaW5lc3MvSW5jaWRlbnRNYW5hZ2VtZW50J1xuaW1wb3J0IHsgSW5jaWRlbnRBUEkgfSBmcm9tICdAL2xpYi9hcGkvaW5jaWRlbnQtYXBpJ1xuaW1wb3J0IHsgQXBwIGFzIEFudGRBcHAgfSBmcm9tICdhbnRkJ1xuXG5qZXN0Lm1vY2soJ0AvbGliL3N0b3JlL2F1dGgtc3RvcmUnLCAoKSA9PiAoe1xuICB1c2VBdXRoU3RvcmU6ICgpID0+ICh7IGN1cnJlbnRUZW5hbnQ6IHsgaWQ6IDEgfSB9KSxcbn0pKVxuXG5kZXNjcmliZSgnSW5jaWRlbnRNYW5hZ2VtZW50IGludGVyYWN0aW9ucycsICgpID0+IHtcbiAgaXQoJ2xvYWRzIGluY2lkZW50cyB2aWEgQVBJIGxheWVyIHdpdGggcGFnaW5hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBzcHkgPSBqZXN0LnNweU9uKEluY2lkZW50QVBJLCAnbGlzdEluY2lkZW50cycpLm1vY2tSZXNvbHZlZFZhbHVlKHsgaW5jaWRlbnRzOiBbXSwgdG90YWw6IDAgfSBhcyBhbnkpXG4gICAgcmVuZGVyKFxuICAgICAgPEFudGRBcHA+XG4gICAgICAgIDxJbmNpZGVudE1hbmFnZW1lbnQgLz5cbiAgICAgIDwvQW50ZEFwcD5cbiAgICApXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiBleHBlY3Qoc3B5KS50b0hhdmVCZWVuQ2FsbGVkKCkpXG4gICAgY29uc3QgcGFyYW1zID0gKHNweS5tb2NrLmNhbGxzWzBdIHx8IFtdKVswXSBhcyBhbnlcbiAgICBleHBlY3QocGFyYW1zLnBhZ2UpLnRvQmUoMSlcbiAgICBleHBlY3QocGFyYW1zLnBhZ2Vfc2l6ZSkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgc3B5Lm1vY2tSZXN0b3JlKClcbiAgfSlcbn0pXG5cbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZUF1dGhTdG9yZSIsImN1cnJlbnRUZW5hbnQiLCJpZCIsImRlc2NyaWJlIiwiaXQiLCJzcHkiLCJzcHlPbiIsIkluY2lkZW50QVBJIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJpbmNpZGVudHMiLCJ0b3RhbCIsInJlbmRlciIsIkFudGRBcHAiLCJJbmNpZGVudE1hbmFnZW1lbnQiLCJ3YWl0Rm9yIiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZCIsInBhcmFtcyIsImNhbGxzIiwicGFnZSIsInRvQmUiLCJwYWdlX3NpemUiLCJ0b0JlR3JlYXRlclRoYW4iLCJtb2NrUmVzdG9yZSJdLCJtYXBwaW5ncyI6IjtBQU9BQSxLQUFLQyxJQUFJLENBQUMsMEJBQTBCLElBQU8sQ0FBQTtRQUN6Q0MsY0FBYyxJQUFPLENBQUE7Z0JBQUVDLGVBQWU7b0JBQUVDLElBQUk7Z0JBQUU7WUFBRSxDQUFBO0lBQ2xELENBQUE7Ozs7OzhEQVRrQjt3QkFDYztRQUN6QjsyRUFDd0I7NkJBQ0g7c0JBQ0c7Ozs7OztBQU0vQkMsU0FBUyxtQ0FBbUM7SUFDMUNDLEdBQUcsaURBQWlEO1FBQ2xELE1BQU1DLE1BQU1QLEtBQUtRLEtBQUssQ0FBQ0Msd0JBQVcsRUFBRSxpQkFBaUJDLGlCQUFpQixDQUFDO1lBQUVDLFdBQVcsRUFBRTtZQUFFQyxPQUFPO1FBQUU7UUFDakdDLElBQUFBLGNBQU0sZ0JBQ0oscUJBQUNDLFNBQU87c0JBQ04sY0FBQSxxQkFBQ0MsMkJBQWtCOztRQUd2QixNQUFNQyxJQUFBQSxlQUFPLEVBQUMsSUFBTUMsT0FBT1YsS0FBS1csZ0JBQWdCO1FBQ2hELE1BQU1DLFNBQVMsQUFBQ1osQ0FBQUEsSUFBSU4sSUFBSSxDQUFDbUIsS0FBSyxDQUFDLEVBQUUsSUFBSSxFQUFFLEFBQUQsQ0FBRSxDQUFDLEVBQUU7UUFDM0NILE9BQU9FLE9BQU9FLElBQUksRUFBRUMsSUFBSSxDQUFDO1FBQ3pCTCxPQUFPRSxPQUFPSSxTQUFTLEVBQUVDLGVBQWUsQ0FBQztRQUN6Q2pCLElBQUlrQixXQUFXO0lBQ2pCO0FBQ0YifQ==
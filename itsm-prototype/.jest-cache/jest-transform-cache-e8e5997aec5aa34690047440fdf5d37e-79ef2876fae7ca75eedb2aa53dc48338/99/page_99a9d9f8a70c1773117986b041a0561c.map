{"version":3,"names":["IncidentsPage","cov_1ynplmy31j","f","t","s","_i18n","useI18n","incidents","loading","total","currentPage","pageSize","metrics","setCurrentPage","setPageSize","handleSearch","handleFilterChange","loadIncidents","_useIncidentsData","useIncidentsData","selectedRowKeys","setSelectedRowKeys","_react","useState","handleCreateIncident","window","location","href","renderContent","b","_jsxruntime","jsx","_LoadingEmptyError","LoadingEmptyError","state","loadingText","length","empty","title","description","actionText","onAction","showAction","jsxs","Fragment","_IncidentList","IncidentList","onSelectedRowKeysChange","onEdit","incident","id","onView","_antd","Pagination","current","showSizeChanger","showQuickJumper","showTotal","range","start","end","onChange","page","size","style","marginTop","textAlign","_IncidentStats","IncidentStats","_IncidentFilters","IncidentFilters","onSearch","onFilterChange","onRefresh","className","Space","Button","icon","_icons","DownloadOutlined","type","PlusOutlined","onClick"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/app/(main)/incidents/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { Button, Space, Pagination } from 'antd';\nimport { DownloadOutlined, PlusOutlined } from '@ant-design/icons';\nimport { useIncidentsData } from './hooks/useIncidentsData';\nimport { IncidentStats } from './components/IncidentStats';\nimport { IncidentFilters } from './components/IncidentFilters';\nimport { IncidentList } from './components/IncidentList';\nimport { LoadingEmptyError } from '@/components/ui/LoadingEmptyError';\nimport { useI18n } from '@/lib/i18n';\n\nexport default function IncidentsPage() {\n  const { t } = useI18n();\n  const {\n    incidents,\n    loading,\n    total,\n    currentPage,\n    pageSize,\n    metrics,\n    setCurrentPage,\n    setPageSize,\n    handleSearch,\n    handleFilterChange,\n    loadIncidents,\n  } = useIncidentsData();\n  const [selectedRowKeys, setSelectedRowKeys] = useState<React.Key[]>([]);\n\n  const handleCreateIncident = () => {\n    window.location.href = '/incidents/new';\n  };\n\n  // 使用统一的 LoadingEmptyError 组件处理加载和空态\n  const renderContent = () => {\n    if (loading) {\n      return <LoadingEmptyError state=\"loading\" loadingText={t('incidents.loading')} />;\n    }\n\n    if (!incidents || incidents.length === 0) {\n      return (\n        <LoadingEmptyError\n          state=\"empty\"\n          empty={{\n            title: t('incidents.emptyTitle') || '暂无事件',\n            description: t('incidents.emptyDescription') || '当前没有事件数据',\n            actionText: t('incidents.create') || '创建事件',\n            onAction: handleCreateIncident,\n            showAction: true,\n          }}\n        />\n      );\n    }\n\n    return (\n      <>\n        <IncidentList\n          incidents={incidents}\n          loading={loading}\n          selectedRowKeys={selectedRowKeys}\n          onSelectedRowKeysChange={setSelectedRowKeys}\n          onEdit={incident => (window.location.href = `/incidents/${incident.id}/edit`)}\n          onView={incident => (window.location.href = `/incidents/${incident.id}`)}\n        />\n        <Pagination\n          current={currentPage}\n          pageSize={pageSize}\n          total={total}\n          showSizeChanger\n          showQuickJumper\n          showTotal={(total, range) => t('incidents.paginationItems', { start: range[0], end: range[1], total })}\n          onChange={(page, size) => {\n            setCurrentPage(page);\n            setPageSize(size);\n          }}\n          style={{ marginTop: 16, textAlign: 'right' }}\n        />\n      </>\n    );\n  };\n\n  return (\n    <div>\n      <IncidentStats metrics={metrics} />\n      <IncidentFilters\n        loading={loading}\n        onSearch={handleSearch}\n        onFilterChange={handleFilterChange}\n        onRefresh={loadIncidents}\n      />\n      <div className='bg-white/60 backdrop-blur-sm rounded-2xl p-6 border border-white/20 shadow-lg mb-6'>\n        <div className='flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6'>\n          <div className='flex items-center space-x-4'>\n            <div>\n              <h3 className='text-lg font-semibold text-gray-800'>{t('incidents.listTitle')}</h3>\n              <p className='text-sm text-gray-600'>{t('incidents.listDescription')}</p>\n            </div>\n          </div>\n          <Space size='middle' className='flex-wrap'>\n            <Button\n              icon={<DownloadOutlined />}\n              size='large'\n              className='bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300 shadow-sm hover:shadow-md transition-all duration-200 rounded-lg font-medium'\n            >\n              {t('incidents.export')}\n            </Button>\n            <Button\n              type='primary'\n              icon={<PlusOutlined />}\n              size='large'\n              onClick={handleCreateIncident}\n              className='bg-gradient-to-r from-green-500 to-emerald-600 border-0 text-white hover:from-green-600 hover:to-emerald-700 shadow-lg hover:shadow-xl transition-all duration-200 rounded-lg font-medium'\n            >\n              {t('incidents.create')}\n            </Button>\n          </Space>\n        </div>\n        <IncidentList\n          incidents={incidents}\n          loading={loading}\n          selectedRowKeys={selectedRowKeys}\n          onSelectedRowKeysChange={setSelectedRowKeys}\n          onEdit={incident => (window.location.href = `/incidents/${incident.id}/edit`)}\n          onView={incident => (window.location.href = `/incidents/${incident.id}`)}\n        />\n        <Pagination\n          current={currentPage}\n          pageSize={pageSize}\n          total={total}\n          showSizeChanger\n          showQuickJumper\n          showTotal={(total, range) => t('incidents.paginationItems', { start: range[0], end: range[1], total })}\n          onChange={(page, size) => {\n            setCurrentPage(page);\n            setPageSize(size);\n          }}\n          style={{ marginTop: 16, textAlign: 'right' }}\n        />\n      </div>\n    </div>\n  );\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}
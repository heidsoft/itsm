{"version":3,"names":["cov_28qwwqlrub","actualCoverage","s","useServiceCatalogData","f","catalogs","setCatalogs","_react","useState","loading","setLoading","searchText","setSearchText","categoryFilter","setCategoryFilter","priorityFilter","setPriorityFilter","stats","setStats","total","cloudServices","accountServices","securityServices","useEffect","loadServiceCatalogs","length","filter","c","category","data","_servicecatalogapi","ServiceCatalogApi","getCatalogs","error","console","filteredCatalogs","catalog","matchesSearch","b","name","toLowerCase","includes","description","matchesCategory","matchesPriority","priority"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/app/(main)/service-catalog/hooks/useServiceCatalogData.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { ServiceCatalogApi, ServiceCatalog } from '@/lib/api/service-catalog-api';\n\nexport const useServiceCatalogData = () => {\n  const [catalogs, setCatalogs] = useState<ServiceCatalog[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchText, setSearchText] = useState('');\n  const [categoryFilter, setCategoryFilter] = useState('');\n  const [priorityFilter, setPriorityFilter] = useState('');\n  const [stats, setStats] = useState({\n    total: 0,\n    cloudServices: 0,\n    accountServices: 0,\n    securityServices: 0,\n  });\n\n  useEffect(() => {\n    loadServiceCatalogs();\n  }, []);\n\n  useEffect(() => {\n    setStats({\n      total: catalogs.length,\n      cloudServices: catalogs.filter(c => c.category === '云资源服务').length,\n      accountServices: catalogs.filter(c => c.category === '账号与权限').length,\n      securityServices: catalogs.filter(c => c.category === '安全服务').length,\n    });\n  }, [catalogs]);\n\n  const loadServiceCatalogs = async () => {\n    try {\n      setLoading(true);\n      const data = await ServiceCatalogApi.getCatalogs();\n      setCatalogs(data);\n    } catch (error) {\n      console.error('加载服务目录失败:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredCatalogs = catalogs.filter(catalog => {\n    const matchesSearch = searchText\n      ? catalog.name.toLowerCase().includes(searchText.toLowerCase()) ||\n        catalog.description.toLowerCase().includes(searchText.toLowerCase())\n      : true;\n    const matchesCategory = categoryFilter ? catalog.category === categoryFilter : true;\n    const matchesPriority = priorityFilter ? catalog.priority === priorityFilter : true;\n    return matchesSearch && matchesCategory && matchesPriority;\n  });\n\n  return {\n    catalogs: filteredCatalogs,\n    loading,\n    stats,\n    setSearchText,\n    setCategoryFilter,\n    setPriorityFilter,\n    loadServiceCatalogs,\n  };\n};\n"],"mappings":"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","ignoreList":[]}
{"version":3,"names":["cov_1ojdacaf48","actualCoverage","s","SmartForm","f","SmartFormField","default","_default","autoSave","b","autoSaveDelay","autoSaveKey","validateOnChange","successAnimation","showRequiredHint","successMessage","errorMessage","onBeforeSubmit","onAutoSave","onFinish","onValuesChange","children","form","externalForm","props","internalForm","_antd","Form","useForm","submitting","setSubmitting","_react","useState","errors","setErrors","saveTimer","setSaveTimer","lastSaved","setLastSaved","useEffect","window","draft","localStorage","getItem","parsedDraft","JSON","parse","setFieldsValue","values","Date","timestamp","error","console","saveFormValues","useCallback","toISOString","setItem","stringify","message","success","content","duration","style","marginTop","handleValuesChange","changedValues","allValues","clearTimeout","timer","setTimeout","handleFinish","canSubmit","_canvasconfetti","particleCount","spread","origin","y","removeItem","undefined","Array","isArray","handleFinishFailed","errorInfo","errorMessages","errorFields","map","field","name","join","length","scrollToField","clearDraft","info","_jsxruntime","jsxs","className","jsx","Alert","type","showIcon","closable","marginBottom","description","index","onClose","toLocaleTimeString","onClick","onFinishFailed","validateTrigger","scrollToFirstError","layout","requiredMark","label","required","tooltip","helpText","rules","validateDebounce","finalRules","Item","title","help"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/components/ui/SmartForm.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { Form, FormProps, FormInstance, message, Alert } from 'antd';\nimport { cn } from '@/lib/utils';\nimport confetti from 'canvas-confetti';\n\nexport interface SmartFormProps extends FormProps {\n  /**\n   * 是否启用自动保存\n   * @default false\n   */\n  autoSave?: boolean;\n  \n  /**\n   * 自动保存的防抖延迟（毫秒）\n   * @default 2000\n   */\n  autoSaveDelay?: number;\n  \n  /**\n   * 自动保存的存储键\n   */\n  autoSaveKey?: string;\n  \n  /**\n   * 是否在onChange时验证\n   * @default true\n   */\n  validateOnChange?: boolean;\n  \n  /**\n   * 是否显示提交成功动画\n   * @default true\n   */\n  successAnimation?: boolean;\n  \n  /**\n   * 是否显示必填字段提示\n   * @default true\n   */\n  showRequiredHint?: boolean;\n  \n  /**\n   * 自定义成功消息\n   */\n  successMessage?: string;\n  \n  /**\n   * 自定义错误消息\n   */\n  errorMessage?: string;\n  \n  /**\n   * 表单提交前的校验回调\n   */\n  onBeforeSubmit?: (values: any) => boolean | Promise<boolean>;\n  \n  /**\n   * 自动保存回调\n   */\n  onAutoSave?: (values: any) => void;\n}\n\n/**\n * 智能表单组件\n * \n * 特性：\n * - 自动保存草稿\n * - 实时验证\n * - 提交成功动画\n * - 错误聚合显示\n * - 必填字段提示\n * - 防抖处理\n * \n * @example\n * ```tsx\n * <SmartForm\n *   autoSave\n *   autoSaveKey=\"ticket-form\"\n *   onFinish={handleSubmit}\n *   validateOnChange\n * >\n *   <Form.Item name=\"title\" label=\"标题\" required>\n *     <Input />\n *   </Form.Item>\n * </SmartForm>\n * ```\n */\nexport const SmartForm: React.FC<SmartFormProps> = ({\n  autoSave = false,\n  autoSaveDelay = 2000,\n  autoSaveKey = 'form-draft',\n  validateOnChange = true,\n  successAnimation = true,\n  showRequiredHint = true,\n  successMessage = '提交成功！',\n  errorMessage = '提交失败，请检查表单内容后重试',\n  onBeforeSubmit,\n  onAutoSave,\n  onFinish,\n  onValuesChange,\n  children,\n  form: externalForm,\n  ...props\n}) => {\n  const [internalForm] = Form.useForm();\n  const form = externalForm || internalForm;\n  \n  const [submitting, setSubmitting] = useState(false);\n  const [errors, setErrors] = useState<string[]>([]);\n  const [saveTimer, setSaveTimer] = useState<NodeJS.Timeout>();\n  const [lastSaved, setLastSaved] = useState<Date>();\n\n  // 加载草稿\n  useEffect(() => {\n    if (autoSave && typeof window !== 'undefined') {\n      try {\n        const draft = localStorage.getItem(autoSaveKey);\n        if (draft) {\n          const parsedDraft = JSON.parse(draft);\n          form.setFieldsValue(parsedDraft.values);\n          setLastSaved(new Date(parsedDraft.timestamp));\n        }\n      } catch (error) {\n        console.error('加载草稿失败:', error);\n      }\n    }\n  }, [autoSave, autoSaveKey, form]);\n\n  // 自动保存\n  const saveFormValues = useCallback((values: any) => {\n    if (!autoSave || typeof window === 'undefined') return;\n    \n    try {\n      const draft = {\n        values,\n        timestamp: new Date().toISOString(),\n      };\n      localStorage.setItem(autoSaveKey, JSON.stringify(draft));\n      setLastSaved(new Date());\n      \n      if (onAutoSave) {\n        onAutoSave(values);\n      }\n      \n      // 显示保存提示\n      message.success({\n        content: '草稿已自动保存',\n        duration: 1,\n        style: { marginTop: '10vh' },\n      });\n    } catch (error) {\n      console.error('保存草稿失败:', error);\n    }\n  }, [autoSave, autoSaveKey, onAutoSave]);\n\n  // 表单值变化处理\n  const handleValuesChange = (changedValues: any, allValues: any) => {\n    // 清除之前的定时器\n    if (saveTimer) {\n      clearTimeout(saveTimer);\n    }\n\n    // 设置新的定时器\n    if (autoSave) {\n      const timer = setTimeout(() => {\n        saveFormValues(allValues);\n      }, autoSaveDelay);\n      setSaveTimer(timer);\n    }\n\n    // 调用外部回调\n    if (onValuesChange) {\n      onValuesChange(changedValues, allValues);\n    }\n  };\n\n  // 表单提交处理\n  const handleFinish = async (values: any) => {\n    setErrors([]);\n    setSubmitting(true);\n\n    try {\n      // 提交前校验\n      if (onBeforeSubmit) {\n        const canSubmit = await onBeforeSubmit(values);\n        if (!canSubmit) {\n          setSubmitting(false);\n          return;\n        }\n      }\n\n      // 执行提交\n      await onFinish?.(values);\n\n      // 成功动画\n      if (successAnimation) {\n        confetti({\n          particleCount: 100,\n          spread: 70,\n          origin: { y: 0.6 },\n        });\n      }\n\n      // 成功提示\n      message.success(successMessage);\n\n      // 清除草稿\n      if (autoSave && typeof window !== 'undefined') {\n        localStorage.removeItem(autoSaveKey);\n        setLastSaved(undefined);\n      }\n    } catch (error: any) {\n      console.error('表单提交失败:', error);\n      message.error(errorMessage);\n      \n      // 如果错误对象包含验证信息，显示详细错误\n      if (error.errors && Array.isArray(error.errors)) {\n        setErrors(error.errors);\n      }\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // 表单提交失败处理\n  const handleFinishFailed = (errorInfo: any) => {\n    const errorMessages = errorInfo.errorFields.map(\n      (field: any) => `${field.name.join('.')}: ${field.errors.join(', ')}`\n    );\n    setErrors(errorMessages);\n    \n    // 滚动到第一个错误字段\n    if (errorInfo.errorFields.length > 0) {\n      form.scrollToField(errorInfo.errorFields[0].name);\n    }\n    \n    message.error('请检查表单内容');\n  };\n\n  // 清除草稿\n  const clearDraft = useCallback(() => {\n    if (typeof window !== 'undefined') {\n      localStorage.removeItem(autoSaveKey);\n      setLastSaved(undefined);\n      message.info('草稿已清除');\n    }\n  }, [autoSaveKey]);\n\n  return (\n    <div className=\"smart-form-wrapper\">\n      {/* 必填字段提示 */}\n      {showRequiredHint && (\n        <Alert\n          message=\"带有 * 标记的字段为必填项\"\n          type=\"info\"\n          showIcon\n          closable\n          style={{ marginBottom: 16 }}\n        />\n      )}\n\n      {/* 错误信息汇总 */}\n      {errors.length > 0 && (\n        <Alert\n          message=\"表单验证失败\"\n          description={\n            <ul className=\"mb-0 pl-4\">\n              {errors.map((error, index) => (\n                <li key={index}>{error}</li>\n              ))}\n            </ul>\n          }\n          type=\"error\"\n          showIcon\n          closable\n          onClose={() => setErrors([])}\n          style={{ marginBottom: 16 }}\n        />\n      )}\n\n      {/* 草稿保存状态 */}\n      {autoSave && lastSaved && (\n        <div className=\"flex items-center justify-between mb-4 p-2 bg-blue-50 rounded-lg\">\n          <span className=\"text-sm text-blue-600\">\n            草稿已保存于 {lastSaved.toLocaleTimeString()}\n          </span>\n          <button\n            type=\"button\"\n            onClick={clearDraft}\n            className=\"text-sm text-blue-600 hover:text-blue-800 underline\"\n          >\n            清除草稿\n          </button>\n        </div>\n      )}\n\n      <Form\n        form={form}\n        onFinish={handleFinish}\n        onFinishFailed={handleFinishFailed}\n        onValuesChange={handleValuesChange}\n        validateTrigger={validateOnChange ? 'onChange' : 'onBlur'}\n        scrollToFirstError\n        layout=\"vertical\"\n        requiredMark=\"optional\"\n        {...props}\n      >\n        {typeof children === 'function' \n          ? children({ form, submitting }) \n          : children}\n      </Form>\n    </div>\n  );\n};\n\n/**\n * 智能表单字段\n * \n * 增强的Form.Item，包含更友好的提示和验证\n */\nexport interface SmartFormFieldProps {\n  name: string;\n  label: string;\n  required?: boolean;\n  tooltip?: string;\n  helpText?: string;\n  rules?: any[];\n  children: React.ReactNode;\n  validateDebounce?: number;\n}\n\nexport const SmartFormField: React.FC<SmartFormFieldProps> = ({\n  name,\n  label,\n  required = false,\n  tooltip,\n  helpText,\n  rules = [],\n  children,\n  validateDebounce = 500,\n}) => {\n  const finalRules = [\n    ...(required ? [{ required: true, message: `请输入${label}` }] : []),\n    ...rules,\n  ];\n\n  return (\n    <Form.Item\n      name={name}\n      label={\n        <span className=\"flex items-center gap-1\">\n          {label}\n          {required && <span className=\"text-red-500\">*</span>}\n          {tooltip && (\n            <span\n              className=\"text-gray-400 text-xs cursor-help\"\n              title={tooltip}\n            >\n              ⓘ\n            </span>\n          )}\n        </span>\n      }\n      rules={finalRules}\n      validateDebounce={validateDebounce}\n      help={helpText}\n      className=\"smart-form-field\"\n    >\n      {children}\n    </Form.Item>\n  );\n};\n\nexport default SmartForm;\n\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA6Ua;I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","ignoreList":[]}
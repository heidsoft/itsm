{"version":3,"names":["cov_136lhqmci6","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","s","f","b","inputSourceMap","version","sources","sourcesContent","names","mappings","_coverageSchema","coverage","actualCoverage","ApprovalStatus","TicketWorkflowAction"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/types/ticket-workflow.ts"],"sourcesContent":["/**\n * 工单流转相关类型定义\n */\n\nimport { TicketStatus, TicketUser } from './ticket';\n\n/**\n * 工单流转操作类型\n */\nexport enum TicketWorkflowAction {\n  ACCEPT = 'accept',           // 接单\n  REJECT = 'reject',           // 驳回\n  WITHDRAW = 'withdraw',       // 撤回\n  FORWARD = 'forward',         // 转发\n  CC = 'cc',                   // 抄送\n  ESCALATE = 'escalate',       // 升级\n  APPROVE = 'approve',         // 审批通过\n  APPROVE_REJECT = 'approve_reject', // 审批拒绝\n  DELEGATE = 'delegate',       // 委派\n  RESOLVE = 'resolve',         // 解决\n  CLOSE = 'close',             // 关闭\n  REOPEN = 'reopen',           // 重开\n}\n\n/**\n * 工单流转记录\n */\nexport interface TicketWorkflowRecord {\n  id: number;\n  ticketId: number;\n  action: TicketWorkflowAction;\n  fromStatus?: TicketStatus;\n  toStatus?: TicketStatus;\n  operator: TicketUser;\n  fromUser?: TicketUser;\n  toUser?: TicketUser;\n  comment?: string;\n  reason?: string;\n  attachments?: Array<{\n    id: number;\n    filename: string;\n    url: string;\n  }>;\n  metadata?: Record<string, any>;\n  createdAt: string;\n}\n\n/**\n * 工单当前状态\n */\nexport interface TicketWorkflowState {\n  ticketId: number;\n  currentStatus: TicketStatus;\n  currentAssignee?: TicketUser;\n  approvalStatus?: ApprovalStatus;\n  currentApprovalLevel?: number;\n  totalApprovalLevels?: number;\n  pendingApprovers?: TicketUser[];\n  completedApprovals?: ApprovalRecord[];\n  canAccept: boolean;\n  canReject: boolean;\n  canWithdraw: boolean;\n  canForward: boolean;\n  canCC: boolean;\n  canApprove: boolean;\n  canResolve: boolean;\n  canClose: boolean;\n  availableActions: TicketWorkflowAction[];\n}\n\n/**\n * 审批状态\n */\nexport enum ApprovalStatus {\n  PENDING = 'pending',           // 待审批\n  IN_PROGRESS = 'in_progress',   // 审批中\n  APPROVED = 'approved',         // 已通过\n  REJECTED = 'rejected',         // 已拒绝\n  CANCELLED = 'cancelled',       // 已取消\n}\n\n/**\n * 审批记录\n */\nexport interface ApprovalRecord {\n  id: number;\n  ticketId: number;\n  level: number;\n  levelName: string;\n  approver: TicketUser;\n  status: ApprovalStatus;\n  action?: 'approve' | 'reject' | 'delegate';\n  comment?: string;\n  attachments?: Array<{\n    id: number;\n    filename: string;\n    url: string;\n  }>;\n  delegateTo?: TicketUser;\n  processedAt?: string;\n  createdAt: string;\n}\n\n/**\n * 接单请求\n */\nexport interface AcceptTicketRequest {\n  ticketId: number;\n  comment?: string;\n}\n\n/**\n * 驳回请求\n */\nexport interface RejectTicketRequest {\n  ticketId: number;\n  reason: string;\n  comment?: string;\n  returnToStatus?: TicketStatus;\n}\n\n/**\n * 撤回请求\n */\nexport interface WithdrawTicketRequest {\n  ticketId: number;\n  reason: string;\n}\n\n/**\n * 转发请求\n */\nexport interface ForwardTicketRequest {\n  ticketId: number;\n  toUserId: number;\n  comment?: string;\n  transferOwnership: boolean; // 是否转移所有权\n}\n\n/**\n * 抄送请求\n */\nexport interface CCTicketRequest {\n  ticketId: number;\n  ccUsers: number[];\n  comment?: string;\n}\n\n/**\n * 审批请求\n */\nexport interface ApproveTicketRequest {\n  ticketId: number;\n  approvalId: number;\n  action: 'approve' | 'reject' | 'delegate';\n  comment?: string;\n  delegateToUserId?: number;\n  attachments?: File[];\n}\n\n/**\n * 解决工单请求\n */\nexport interface ResolveTicketRequest {\n  ticketId: number;\n  resolution: string;\n  resolutionCategory?: string;\n  workNotes?: string;\n  attachments?: File[];\n}\n\n/**\n * 关闭工单请求\n */\nexport interface CloseTicketRequest {\n  ticketId: number;\n  closeReason?: string;\n  closeNotes?: string;\n}\n\n/**\n * 重开工单请求\n */\nexport interface ReopenTicketRequest {\n  ticketId: number;\n  reason: string;\n}\n\n/**\n * 抄送人\n */\nexport interface TicketCC {\n  id: number;\n  ticketId: number;\n  user: TicketUser;\n  addedBy: TicketUser;\n  addedAt: string;\n  isActive: boolean;\n}\n\n/**\n * 工单流转统计\n */\nexport interface TicketWorkflowStats {\n  totalTransitions: number;\n  averageTransitionTime: number; // 平均流转时间（小时）\n  byAction: Record<TicketWorkflowAction, number>;\n  byStatus: Record<TicketStatus, number>;\n  approvalStats: {\n    totalApprovals: number;\n    approvedCount: number;\n    rejectedCount: number;\n    averageApprovalTime: number; // 平均审批时间（小时）\n    approvalRate: number; // 审批通过率（%）\n  };\n}\n\n/**\n * 工单操作权限\n */\nexport interface TicketActionPermissions {\n  canAccept: boolean;\n  canReject: boolean;\n  canWithdraw: boolean;\n  canForward: boolean;\n  canCC: boolean;\n  canApprove: boolean;\n  canResolve: boolean;\n  canClose: boolean;\n  canReopen: boolean;\n  canEdit: boolean;\n  canDelete: boolean;\n  canComment: boolean;\n  canViewInternal: boolean;\n}\n\n"],"mappings":"AAAA;;GAEC;;AAAA;AAAA,SAAAA,eAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UA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","ignoreList":[]}
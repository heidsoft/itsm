{"version":3,"names":["SLAApi","cov_10z4gbil8i","f","s","default","_default","getSLADefinitions","params","_httpclient","httpClient","get","createSLADefinition","data","post","getSLADefinition","id","updateSLADefinition","put","deleteSLADefinition","delete","getSLAViolations","updateSLAViolationStatus","status","getSLAComplianceReport","checkTicketSLAViolation","ticketId","getSLAStats","getSLAMetrics","getSLAAlerts","triggerSLAMonitoring"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/app/lib/sla-api.ts"],"sourcesContent":["import { httpClient } from './http-client';\n\n// SLA定义接口\nexport interface SLADefinition {\n  id: number;\n  name: string;\n  description: string;\n  service_type: string;\n  priority: string;\n  response_time_minutes: number;\n  resolution_time_minutes: number;\n  availability_target: number;\n  is_active: boolean;\n  tenant_id: number;\n  created_at: string;\n  updated_at: string;\n}\n\n// SLA违规接口\nexport interface SLAViolation {\n  id: number;\n  ticket_id: number;\n  sla_def_id: number;\n  violation_type: string;\n  expected_time: string;\n  actual_time: string;\n  delay_minutes: number;\n  status: string;\n  tenant_id: number;\n  created_at: string;\n  updated_at: string;\n}\n\n// SLA合规报告接口\nexport interface SLAComplianceReport {\n  total_tickets: number;\n  met_sla: number;\n  violated_sla: number;\n  compliance_rate: number;\n  avg_response_time: number;\n  avg_resolution_time: number;\n  report_period: {\n    start_date: string;\n    end_date: string;\n  };\n}\n\n// 创建SLA定义请求\nexport interface CreateSLADefinitionRequest {\n  name: string;\n  description: string;\n  service_type: string;\n  priority: string;\n  response_time_minutes: number;\n  resolution_time_minutes: number;\n  availability_target: number;\n}\n\nexport class SLAApi {\n  // 获取SLA定义列表\n  static async getSLADefinitions(params?: {\n    page?: number;\n    page_size?: number;\n  }): Promise<{\n    items: SLADefinition[];\n    total: number;\n    page: number;\n    page_size: number;\n  }> {\n    return httpClient.get('/api/sla/definitions', params);\n  }\n\n  // 创建SLA定义\n  static async createSLADefinition(data: CreateSLADefinitionRequest): Promise<SLADefinition> {\n    return httpClient.post<SLADefinition>('/api/sla/definitions', data);\n  }\n\n  // 获取SLA定义详情\n  static async getSLADefinition(id: number): Promise<SLADefinition> {\n    return httpClient.get<SLADefinition>(`/api/sla/definitions/${id}`);\n  }\n\n  // 更新SLA定义\n  static async updateSLADefinition(id: number, data: Partial<CreateSLADefinitionRequest>): Promise<SLADefinition> {\n    return httpClient.put<SLADefinition>(`/api/sla/definitions/${id}`, data);\n  }\n\n  // 删除SLA定义\n  static async deleteSLADefinition(id: number): Promise<void> {\n    return httpClient.delete(`/api/sla/definitions/${id}`);\n  }\n\n  // 获取SLA违规列表\n  static async getSLAViolations(params?: {\n    page?: number;\n    page_size?: number;\n    status?: string;\n  }): Promise<{\n    items: SLAViolation[];\n    total: number;\n    page: number;\n    page_size: number;\n  }> {\n    return httpClient.get('/api/sla/violations', params);\n  }\n\n  // 更新SLA违规状态\n  static async updateSLAViolationStatus(id: number, status: string): Promise<void> {\n    return httpClient.put(`/api/sla/violations/${id}/status`, { status });\n  }\n\n  // 获取SLA合规报告\n  static async getSLAComplianceReport(params: {\n    start_date: string;\n    end_date: string;\n  }): Promise<SLAComplianceReport> {\n    return httpClient.get('/api/sla/compliance-report', params);\n  }\n\n  // 检查工单SLA违规\n  static async checkTicketSLAViolation(ticketId: number): Promise<void> {\n    return httpClient.post(`/api/sla/check-violation/${ticketId}`);\n  }\n\n  // 获取SLA统计信息\n  static async getSLAStats(): Promise<{\n    total_definitions: number;\n    active_definitions: number;\n    total_violations: number;\n    open_violations: number;\n    overall_compliance_rate: number;\n  }> {\n    return httpClient.get('/api/sla/stats');\n  }\n\n  // 获取SLA性能指标\n  static async getSLAMetrics(params?: {\n    period?: 'day' | 'week' | 'month' | 'quarter';\n    service_type?: string;\n    priority?: string;\n  }): Promise<{\n    response_time_avg: number;\n    resolution_time_avg: number;\n    compliance_rate: number;\n    violation_count: number;\n    trend_data: Array<{\n      date: string;\n      compliance_rate: number;\n      avg_response_time: number;\n      avg_resolution_time: number;\n    }>;\n  }> {\n    return httpClient.get('/api/sla/metrics', params);\n  }\n\n  // 获取SLA预警\n  static async getSLAAlerts(): Promise<Array<{\n    ticket_id: number;\n    ticket_title: string;\n    priority: string;\n    sla_definition: string;\n    time_remaining: number;\n    alert_level: 'warning' | 'critical';\n    created_at: string;\n  }>> {\n    return httpClient.get('/api/sla/alerts');\n  }\n\n  // 触发SLA监控检查\n  static async triggerSLAMonitoring(): Promise<{\n    checked_tickets: number;\n    violations_found: number;\n    alerts_sent: number;\n  }> {\n    return httpClient.post('/api/sla/monitor');\n  }\n}\n\nexport default SLAApi;"],"mappings":"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","ignoreList":[]}
{"version":3,"names":["cov_2b0f0fmhq9","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","s","f","b","inputSourceMap","version","sources","sourcesContent","names","mappings","_coverageSchema","coverage","actualCoverage","TicketViewApi","listViews","_httpclient","httpClient","get","getView","viewId","createView","data","post","updateView","put","deleteView","delete","shareView"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/lib/api/ticket-view-api.ts"],"sourcesContent":["/**\n * 工单视图API\n * 提供工单视图的创建、查询、更新、删除和共享功能\n */\n\nimport { httpClient } from './http-client';\n\n// 筛选配置类型\nexport type FilterValue = string | number | boolean | string[] | number[] | null | undefined;\nexport type FilterConfig = Record<string, FilterValue>;\n\n// 排序配置类型\nexport interface SortConfig {\n  field: string;\n  order: 'asc' | 'desc';\n}\n\n// 分组配置类型\nexport interface GroupConfig {\n  field: string;\n  order?: 'asc' | 'desc';\n}\n\nexport interface TicketView {\n  id: number;\n  name: string;\n  description?: string;\n  filters: FilterConfig;\n  columns: string[];\n  sort_config: SortConfig;\n  group_config?: GroupConfig;\n  is_shared: boolean;\n  created_by: number;\n  creator?: {\n    id: number;\n    username: string;\n    name: string;\n    email: string;\n    role: string;\n  };\n  tenant_id: number;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface CreateTicketViewRequest {\n  name: string;\n  description?: string;\n  filters: FilterConfig;\n  columns: string[];\n  sort_config: SortConfig;\n  group_config?: GroupConfig;\n  is_shared: boolean;\n}\n\nexport interface UpdateTicketViewRequest {\n  name?: string;\n  description?: string;\n  filters?: FilterConfig;\n  columns?: string[];\n  sort_config?: SortConfig;\n  group_config?: GroupConfig;\n  is_shared?: boolean;\n}\n\nexport interface ShareTicketViewRequest {\n  team_ids: number[];\n}\n\nexport interface ListTicketViewsResponse {\n  views: TicketView[];\n  total: number;\n}\n\nexport class TicketViewApi {\n  /**\n   * 获取工单视图列表\n   */\n  static async listViews(): Promise<ListTicketViewsResponse> {\n    return httpClient.get<ListTicketViewsResponse>('/api/v1/tickets/views');\n  }\n\n  /**\n   * 获取工单视图详情\n   */\n  static async getView(viewId: number): Promise<TicketView> {\n    return httpClient.get<TicketView>(`/api/v1/tickets/views/${viewId}`);\n  }\n\n  /**\n   * 创建工单视图\n   */\n  static async createView(data: CreateTicketViewRequest): Promise<TicketView> {\n    return httpClient.post<TicketView>('/api/v1/tickets/views', data);\n  }\n\n  /**\n   * 更新工单视图\n   */\n  static async updateView(viewId: number, data: UpdateTicketViewRequest): Promise<TicketView> {\n    return httpClient.put<TicketView>(`/api/v1/tickets/views/${viewId}`, data);\n  }\n\n  /**\n   * 删除工单视图\n   */\n  static async deleteView(viewId: number): Promise<void> {\n    return httpClient.delete(`/api/v1/tickets/views/${viewId}`);\n  }\n\n  /**\n   * 共享工单视图\n   */\n  static async shareView(viewId: number, data: ShareTicketViewRequest): Promise<void> {\n    return httpClient.post(`/api/v1/tickets/views/${viewId}/share`, data);\n  }\n}\n\n"],"mappings":"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","ignoreList":[]}
{"version":3,"names":["cov_18eyn6zeex","actualCoverage","s","ticketKeys","f","useBatchDeleteTicketsMutation","useCreateTicketMutation","useDeleteTicketMutation","usePrefetchTicketDetail","useRefreshTickets","useTicketDetailQuery","useTicketStatsQuery","useTicketsQuery","useUpdateTicketMutation","all","lists","list","filters","pagination","details","detail","id","stats","b","current","pageSize","total","_reactquery","useQuery","queryKey","queryFn","response","_ticketservice","ticketService","listTickets","page","page_size","tickets","Array","isArray","total_pages","error","console","enabled","staleTime","gcTime","getTicketStats","open","resolved","highPriority","high_priority","getTicket","queryClient","useQueryClient","useMutation","mutationFn","ticketData","createTicket","onSuccess","data","_antd","message","success","invalidateQueries","setQueryData","old","onError","errorMessage","updateTicket","variables","deleteTicket","Number","removeQueries","Math","max","ids","Promise","map","length","forEach","prefetchQuery"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/lib/hooks/useTicketsQuery.ts"],"sourcesContent":["'use client';\n\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { message } from 'antd';\nimport { ticketService, Ticket, TicketStatus, TicketPriority, TicketType } from '@/lib/services/ticket-service';\n\nexport interface TicketQueryFilters {\n  status?: TicketStatus;\n  priority?: TicketPriority;\n  type?: TicketType;\n  category?: string;\n  assignee_id?: number;\n  keyword?: string;\n  dateRange?: [string, string];\n  tags?: string[];\n  source?: string;\n  impact?: string;\n  urgency?: string;\n}\n\nexport interface TicketStats {\n  total: number;\n  open: number;\n  resolved: number;\n  highPriority: number;\n}\n\nexport interface PaginationState {\n  current: number;\n  pageSize: number;\n  total: number;\n}\n\n// Query Keys\nexport const ticketKeys = {\n  all: ['tickets'] as const,\n  lists: () => [...ticketKeys.all, 'list'] as const,\n  list: (filters: Partial<TicketQueryFilters>, pagination: PaginationState) =>\n    [...ticketKeys.lists(), filters, pagination] as const,\n  details: () => [...ticketKeys.all, 'detail'] as const,\n  detail: (id: string) => [...ticketKeys.details(), id] as const,\n  stats: () => [...ticketKeys.all, 'stats'] as const,\n};\n\n// 获取工单列表\nexport const useTicketsQuery = (\n  filters: Partial<TicketQueryFilters> = {},\n  pagination: PaginationState = { current: 1, pageSize: 20, total: 0 }\n) => {\n  return useQuery({\n    queryKey: ticketKeys.list(filters, pagination),\n    queryFn: async () => {\n      try {\n      const response = await ticketService.listTickets({\n        page: pagination.current,\n        page_size: pagination.pageSize,\n        ...filters,\n      });\n        // 确保返回的数据结构完整\n        return {\n          tickets: Array.isArray(response?.tickets) ? response.tickets : [],\n          total: response?.total || 0,\n          page: response?.page || pagination.current,\n          page_size: response?.page_size || pagination.pageSize,\n          total_pages: response?.total_pages || 0,\n        };\n      } catch (error) {\n        console.error('Failed to fetch tickets:', error);\n        // 返回默认值而不是抛出错误，让React Query处理\n        throw error;\n      }\n    },\n    enabled: true,\n    staleTime: 2 * 60 * 1000, // 2分钟缓存\n    gcTime: 5 * 60 * 1000, // 5分钟垃圾回收\n  });\n};\n\n// 获取工单统计\nexport const useTicketStatsQuery = () => {\n  return useQuery({\n    queryKey: ticketKeys.stats(),\n    queryFn: async () => {\n      try {\n      const response = await ticketService.getTicketStats();\n        // 确保所有字段都有默认值\n        return {\n          total: response?.total || 0,\n          open: response?.open || 0,\n          resolved: response?.resolved || 0,\n          highPriority: response?.high_priority || 0,\n        };\n      } catch (error) {\n        console.error('Failed to fetch ticket stats:', error);\n        // 返回默认值\n      return {\n          total: 0,\n          open: 0,\n          resolved: 0,\n          highPriority: 0,\n      };\n      }\n    },\n    staleTime: 1 * 60 * 1000, // 1分钟缓存\n    gcTime: 3 * 60 * 1000, // 3分钟垃圾回收\n  });\n};\n\n// 获取单个工单详情\nexport const useTicketDetailQuery = (id: string) => {\n  return useQuery({\n    queryKey: ticketKeys.detail(id),\n    queryFn: async () => {\n      const response = await ticketService.getTicket(id);\n      return response;\n    },\n    enabled: !!id,\n    staleTime: 5 * 60 * 1000, // 5分钟缓存\n    gcTime: 10 * 60 * 1000, // 10分钟垃圾回收\n  });\n};\n\n// 创建工单\nexport const useCreateTicketMutation = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (ticketData: any) => {\n      const response = await ticketService.createTicket(ticketData);\n      return response;\n    },\n    onSuccess: (data) => {\n      message.success('Ticket created successfully');\n      \n      // 使相关查询失效，触发重新获取\n      queryClient.invalidateQueries({ queryKey: ticketKeys.lists() });\n      queryClient.invalidateQueries({ queryKey: ticketKeys.stats() });\n      \n      // 乐观更新统计\n      queryClient.setQueryData(ticketKeys.stats(), (old: TicketStats | undefined) => {\n        if (!old) return old;\n        return {\n          ...old,\n          total: old.total + 1,\n        };\n      });\n    },\n    onError: (error: any) => {\n      const errorMessage = error?.message || 'Failed to create ticket';\n      message.error(errorMessage);\n    },\n  });\n};\n\n// 更新工单\nexport const useUpdateTicketMutation = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      const response = await ticketService.updateTicket(id, data);\n      return response;\n    },\n    onSuccess: (data, variables) => {\n      message.success('Ticket updated successfully');\n      \n      // 更新缓存中的工单详情\n      queryClient.setQueryData(ticketKeys.detail(variables.id), data);\n      \n      // 使列表查询失效\n      queryClient.invalidateQueries({ queryKey: ticketKeys.lists() });\n      queryClient.invalidateQueries({ queryKey: ticketKeys.stats() });\n    },\n    onError: (error: any) => {\n      const errorMessage = error?.message || 'Failed to update ticket';\n      message.error(errorMessage);\n    },\n  });\n};\n\n// 删除工单\nexport const useDeleteTicketMutation = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (id: string) => {\n      await ticketService.deleteTicket(Number(id));\n      return id;\n    },\n    onSuccess: (id) => {\n      message.success('Ticket deleted successfully');\n      \n      // 从缓存中移除工单详情\n      queryClient.removeQueries({ queryKey: ticketKeys.detail(id) });\n      \n      // 使列表查询失效\n      queryClient.invalidateQueries({ queryKey: ticketKeys.lists() });\n      queryClient.invalidateQueries({ queryKey: ticketKeys.stats() });\n      \n      // 乐观更新统计\n      queryClient.setQueryData(ticketKeys.stats(), (old: TicketStats | undefined) => {\n        if (!old) return old;\n        return {\n          ...old,\n          total: Math.max(0, old.total - 1),\n        };\n      });\n    },\n    onError: (error: any) => {\n      const errorMessage = error?.message || 'Failed to delete ticket';\n      message.error(errorMessage);\n    },\n  });\n};\n\n// 批量删除工单\nexport const useBatchDeleteTicketsMutation = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (ids: string[]) => {\n      await Promise.all(ids.map(id => ticketService.deleteTicket(Number(id))));\n      return ids;\n    },\n    onSuccess: (ids) => {\n      message.success(`${ids.length} tickets deleted successfully`);\n      \n      // 从缓存中移除工单详情\n      ids.forEach(id => {\n        queryClient.removeQueries({ queryKey: ticketKeys.detail(id) });\n      });\n      \n      // 使列表查询失效\n      queryClient.invalidateQueries({ queryKey: ticketKeys.lists() });\n      queryClient.invalidateQueries({ queryKey: ticketKeys.stats() });\n      \n      // 乐观更新统计\n      queryClient.setQueryData(ticketKeys.stats(), (old: TicketStats | undefined) => {\n        if (!old) return old;\n        return {\n          ...old,\n          total: Math.max(0, old.total - ids.length),\n        };\n      });\n    },\n    onError: (error: any) => {\n      const errorMessage = error?.message || 'Failed to delete tickets';\n      message.error(errorMessage);\n    },\n  });\n};\n\n// 预加载工单详情\nexport const usePrefetchTicketDetail = () => {\n  const queryClient = useQueryClient();\n\n  return (id: string) => {\n    queryClient.prefetchQuery({\n      queryKey: ticketKeys.detail(id),\n      queryFn: async () => {\n        const response = await ticketService.getTicket(id);\n        return response;\n      },\n      staleTime: 5 * 60 * 1000,\n    });\n  };\n};\n\n// 手动刷新数据\nexport const useRefreshTickets = () => {\n  const queryClient = useQueryClient();\n\n  return () => {\n    queryClient.invalidateQueries({ queryKey: ticketKeys.all });\n  };\n};\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}
{"version":3,"names":["cov_9uuofm8rx","actualCoverage","s","AuthGuard","f","PermissionGuard","RoleGuard","withRouteGuard","children","requireAuth","b","requiredPermissions","requiredRole","fallback","redirectTo","router","_navigation","useRouter","isAuthenticated","user","isLoading","hasPermission","hasRole","_authstore","useAuthStore","isInitializing","setIsInitializing","_react","useState","useEffect","initializeAuth","token","window","localStorage","getItem","userInfo","JSON","parse","login","getState","id","name","code","e","console","error","push","_jsxruntime","jsx","className","_LoadingSpinner","LoadingSpinner","size","Fragment","jsxs","onClick","preventDefault","setTimeout","back","length","hasAllPermissions","every","permission","permissions","role","requireAll","checkPermissions","some","roles","checkRoles","Component","options","WrappedComponent","props","displayName"],"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/components/auth/AuthGuard.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuthStore } from '@/lib/store/auth-store';\nimport { AuthService } from '@/lib/services/auth-service';\nimport { LoadingSpinner } from '@/components/ui/LoadingSpinner';\n\ninterface AuthGuardProps {\n  children: React.ReactNode;\n  requireAuth?: boolean;\n  requiredPermissions?: string[];\n  requiredRole?: string;\n  fallback?: React.ReactNode;\n  redirectTo?: string;\n}\n\n/**\n * 认证守卫组件\n * 用于保护需要认证的页面和组件\n */\nexport const AuthGuard: React.FC<AuthGuardProps> = ({\n  children,\n  requireAuth = true,\n  requiredPermissions = [],\n  requiredRole,\n  fallback,\n  redirectTo = '/login',\n}) => {\n  const router = useRouter();\n  const { isAuthenticated, user, isLoading, hasPermission, hasRole } = useAuthStore();\n  const [isInitializing, setIsInitializing] = useState(true);\n\n  useEffect(() => {\n    const initializeAuth = async () => {\n      try {\n        // 检查localStorage中是否有认证信息\n        const token = typeof window !== 'undefined' ? localStorage.getItem('auth_token') : null;\n\n        if (token) {\n          // 如果有token，尝试恢复状态\n          const userInfo = typeof window !== 'undefined' ? localStorage.getItem('user_info') : null;\n          if (userInfo) {\n            try {\n              const user = JSON.parse(userInfo);\n              // 更新store状态\n              const { login } = useAuthStore.getState();\n              login(user, token, { id: 1, name: '默认租户', code: 'default' });\n            } catch (e) {\n              console.error('Failed to restore user info:', e);\n            }\n          }\n        }\n\n        setIsInitializing(false);\n      } catch (error) {\n        console.error('Auth initialization failed:', error);\n        setIsInitializing(false);\n      }\n    };\n\n    initializeAuth();\n  }, [isAuthenticated, user]);\n\n  // 处理未认证重定向\n  useEffect(() => {\n    if (requireAuth && !isAuthenticated && !fallback) {\n      router.push(redirectTo);\n    }\n  }, [requireAuth, isAuthenticated, fallback, router, redirectTo]);\n\n  // 正在初始化或加载中\n  if (isInitializing || isLoading) {\n    return (\n      <div className='flex items-center justify-center min-h-screen'>\n        <LoadingSpinner size='lg' />\n      </div>\n    );\n  }\n\n  // 不需要认证，直接渲染子组件\n  if (!requireAuth) {\n    return <>{children}</>;\n  }\n\n  if (requireAuth && (!isAuthenticated || !user)) {\n    if (fallback) {\n      return <>{fallback}</>;\n    }\n\n    // 重定向处理\n    return (\n      <div className='flex items-center justify-center min-h-screen'>\n        <LoadingSpinner size='lg' />\n      </div>\n    );\n  }\n\n  // 检查角色权限\n  if (requiredRole && !hasRole(requiredRole)) {\n    return (\n      <div className='flex items-center justify-center min-h-screen'>\n        <div className='text-center'>\n          <h2 className='text-2xl font-bold text-gray-900 mb-4'>访问被拒绝</h2>\n          <p className='text-gray-600 mb-6'>您没有访问此页面的权限</p>\n          <button\n            onClick={e => {\n              e.preventDefault();\n              setTimeout(() => router.back(), 0);\n            }}\n            className='px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700'\n          >\n            返回上一页\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // 检查具体权限\n  if (requiredPermissions.length > 0) {\n    const hasAllPermissions = requiredPermissions.every(permission => hasPermission(permission));\n\n    if (!hasAllPermissions) {\n      return (\n        <div className='flex items-center justify-center min-h-screen'>\n          <div className='text-center'>\n            <h2 className='text-2xl font-bold text-gray-900 mb-4'>权限不足</h2>\n            <p className='text-gray-600 mb-6'>您没有执行此操作的权限</p>\n            <button\n              onClick={e => {\n                e.preventDefault();\n                setTimeout(() => router.back(), 0);\n              }}\n              className='px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700'\n            >\n              返回上一页\n            </button>\n          </div>\n        </div>\n      );\n    }\n  }\n\n  // 通过所有检查，渲染子组件\n  return <>{children}</>;\n};\n\n/**\n * 权限检查组件\n * 用于在组件内部进行权限控制\n */\ninterface PermissionGuardProps {\n  children: React.ReactNode;\n  permissions?: string[];\n  role?: string;\n  fallback?: React.ReactNode;\n  requireAll?: boolean; // 是否需要所有权限，默认为 true\n}\n\nexport const PermissionGuard: React.FC<PermissionGuardProps> = ({\n  children,\n  permissions = [],\n  role,\n  fallback = null,\n  requireAll = true,\n}) => {\n  const { hasPermission, hasRole } = useAuthStore();\n\n  // 检查角色\n  if (role && !hasRole(role)) {\n    return <>{fallback}</>;\n  }\n\n  // 检查权限\n  if (permissions.length > 0) {\n    const checkPermissions = requireAll\n      ? permissions.every(permission => hasPermission(permission))\n      : permissions.some(permission => hasPermission(permission));\n\n    if (!checkPermissions) {\n      return <>{fallback}</>;\n    }\n  }\n\n  return <>{children}</>;\n};\n\n/**\n * 角色检查组件\n * 用于基于角色显示不同内容\n */\ninterface RoleGuardProps {\n  children: React.ReactNode;\n  roles: string[];\n  fallback?: React.ReactNode;\n  requireAll?: boolean;\n}\n\nexport const RoleGuard: React.FC<RoleGuardProps> = ({\n  children,\n  roles,\n  fallback = null,\n  requireAll = false,\n}) => {\n  const { hasRole } = useAuthStore();\n\n  const checkRoles = requireAll\n    ? roles.every(role => hasRole(role))\n    : roles.some(role => hasRole(role));\n\n  if (!checkRoles) {\n    return <>{fallback}</>;\n  }\n\n  return <>{children}</>;\n};\n\n/**\n * 高阶组件：为组件添加路由守卫\n */\nexport function withRouteGuard<P extends object>(\n  Component: React.ComponentType<P>,\n  options: {\n    requireAuth?: boolean;\n    requiredPermissions?: string[];\n    requiredRole?: string;\n  } = {}\n) {\n  const WrappedComponent = (props: P) => {\n    return (\n      <AuthGuard\n        requireAuth={options.requireAuth}\n        requiredPermissions={options.requiredPermissions}\n        requiredRole={options.requiredRole}\n      >\n        <Component {...props} />\n      </AuthGuard>\n    );\n  };\n\n  WrappedComponent.displayName = `withRouteGuard(${Component.displayName || Component.name})`;\n\n  return WrappedComponent;\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}
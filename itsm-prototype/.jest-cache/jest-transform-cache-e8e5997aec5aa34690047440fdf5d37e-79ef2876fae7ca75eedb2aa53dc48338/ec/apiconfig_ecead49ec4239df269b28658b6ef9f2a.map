{"version":3,"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/app/lib/api-config.ts"],"sourcesContent":["// API 基础配置\nexport const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8080';\nexport const API_VERSION = process.env.NEXT_PUBLIC_API_VERSION || 'v1';\nexport const API_TIMEOUT = parseInt(process.env.NEXT_PUBLIC_API_TIMEOUT || '30000');\n\n// 通用 API 响应接口\nexport interface ApiResponse<T> {\n  code: number;\n  message: string;\n  data: T;\n}\n\n// API 错误码定义\nexport const API_ERROR_CODES = {\n  SUCCESS: 0,\n  PARAM_ERROR: 1001,\n  VALIDATION_ERROR: 1002,\n  AUTH_FAILED: 2001,\n  FORBIDDEN: 2003,\n  NOT_FOUND: 4004,\n  INTERNAL_ERROR: 5001,\n} as const;\n\n// 分页请求接口\nexport interface PaginationRequest {\n  page?: number;\n  page_size?: number;\n}\n\n// 分页响应接口\nexport interface PaginationResponse<T> {\n  items: T[];\n  total: number;\n  page: number;\n  page_size: number;\n  total_pages: number;\n}\n\n// 租户相关接口\nexport interface Tenant {\n  id: number;\n  name: string;\n  code: string;\n  domain?: string;\n  type: 'trial' | 'standard' | 'professional' | 'enterprise';\n  status: 'active' | 'suspended' | 'expired' | 'trial';\n  created_at: string;\n  updated_at: string;\n  expires_at?: string;\n  settings?: Record<string, unknown>;\n}\n\nexport interface TenantListResponse {\n  tenants: Tenant[];\n  total: number;\n  page: number;\n  size: number;\n}\n\nexport interface CreateTenantRequest {\n  name: string;\n  code: string;\n  domain?: string;\n  type: string;\n  expires_at?: string;\n  settings?: Record<string, unknown>;\n}\n\nexport interface UpdateTenantRequest {\n  name?: string;\n  domain?: string;\n  type?: string;\n  status?: string;\n  expires_at?: string;\n  settings?: Record<string, unknown>;\n}\n\nexport interface GetTenantsParams {\n  page?: number;\n  size?: number;\n  status?: string;\n  type?: string;\n  search?: string;\n}\n\n// 工单相关接口（添加租户ID）\nexport interface Ticket {\n  id: number;\n  title: string;\n  description: string;\n  status: string;\n  priority: string;\n  type?: string;\n  form_fields?: Record<string, unknown>;\n  ticket_number: string;\n  requester_id: number;\n  assignee_id?: number;\n  tenant_id: number;\n  created_at: string;\n  updated_at: string;\n  requester?: User;\n  assignee?: User;\n  tenant?: Tenant;\n  // 新增字段\n  category?: string;\n  subcategory?: string;\n  impact?: string;\n  urgency?: string;\n  resolution?: string;\n  work_notes?: string;\n  attachments?: Attachment[];\n  workflow_steps?: WorkflowStep[];\n  comments?: Comment[];\n  sla_info?: SLAInfo;\n  tags?: string[];\n  due_date?: string;\n  escalation_level?: number;\n}\n\n// 附件接口\nexport interface Attachment {\n  id: number;\n  filename: string;\n  original_name: string;\n  file_size: number;\n  mime_type: string;\n  url: string;\n  uploaded_by: number;\n  uploaded_at: string;\n  uploader?: User;\n}\n\n// 工作流步骤接口\nexport interface WorkflowStep {\n  id: number;\n  step_name: string;\n  step_order: number;\n  status: 'pending' | 'in_progress' | 'completed' | 'skipped';\n  assignee_id?: number;\n  assignee?: User;\n  started_at?: string;\n  completed_at?: string;\n  comments?: string;\n  required_approval: boolean;\n  approval_status?: 'pending' | 'approved' | 'rejected';\n  approval_comments?: string;\n}\n\n// 评论接口\nexport interface Comment {\n  id: number;\n  content: string;\n  type: 'comment' | 'work_note' | 'system';\n  created_by: number;\n  created_at: string;\n  updated_at?: string;\n  author?: User;\n  is_internal: boolean;\n}\n\n// SLA信息接口\nexport interface SLAInfo {\n  sla_id: number;\n  sla_name: string;\n  response_time: number; // 分钟\n  resolution_time: number; // 分钟\n  start_time: string;\n  due_time: string;\n  breach_time?: string;\n  status: 'active' | 'breached' | 'completed';\n}\n\nexport interface User {\n  id: number;\n  username: string;\n  email: string;\n  name: string;\n  tenant_id?: number;\n  role?: string;\n  department?: string;\n}\n\nexport interface TicketListResponse {\n  tickets: Ticket[];\n  total: number;\n  page: number;\n  size: number;\n}\n\nexport interface CreateTicketRequest {\n  title: string;\n  description: string;\n  priority: string;\n  form_fields?: Record<string, unknown>;\n  assignee_id?: number;\n}\n\nexport interface UpdateStatusRequest {\n  status: string;\n}\n\nexport interface GetTicketsParams {\n  page?: number;\n  size?: number;\n  status?: string;\n  priority?: string;\n  tenant_id?: number;\n}\n\n// 服务目录相关接口（添加租户支持）\nexport interface ServiceCatalog {\n  id: number;\n  name: string;\n  description: string;\n  category: string;\n  price?: number;\n  tenant_id: number;\n  is_active: boolean;\n  form_schema?: Record<string, unknown>;\n  created_at: string;\n  updated_at: string;\n  tenant?: Tenant;\n}\n\nexport interface ServiceRequest {\n  id: number;\n  catalog_id: number;\n  requester_id: number;\n  tenant_id: number;\n  status: string;\n  reason: string;\n  form_data?: Record<string, unknown>;\n  created_at: string;\n  updated_at: string;\n  catalog?: ServiceCatalog;\n  requester?: User;\n  tenant?: Tenant;\n}\n\n// 角色相关接口\nexport interface Role {\n  id: number;\n  name: string;\n  description: string;\n  permissions: string[];\n  status: 'active' | 'inactive';\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface RoleListResponse {\n  roles: Role[];\n  total: number;\n  page: number;\n  size: number;\n}\n\nexport interface CreateRoleRequest {\n  name: string;\n  description: string;\n  permissions: string[];\n  status: 'active' | 'inactive';\n}\n\nexport interface UpdateRoleRequest {\n  name?: string;\n  description?: string;\n  permissions?: string[];\n  status?: 'active' | 'inactive';\n}\n\nexport interface GetRolesParams {\n  page?: number;\n  size?: number;\n  status?: string;\n  search?: string;\n}\n\n// 系统配置相关接口\nexport interface SystemConfig {\n  id: number;\n  key: string;\n  value: string;\n  description?: string;\n  category: string;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface SystemConfigListResponse {\n  configs: SystemConfig[];\n  total: number;\n}\n\nexport interface UpdateSystemConfigRequest {\n  key: string;\n  value: string;\n  description?: string;\n}\n\nexport interface GetSystemConfigsParams {\n  category?: string;\n  search?: string;\n}\n"],"names":["API_BASE_URL","API_ERROR_CODES","API_TIMEOUT","API_VERSION","process","env","NEXT_PUBLIC_API_URL","NEXT_PUBLIC_API_VERSION","parseInt","NEXT_PUBLIC_API_TIMEOUT","SUCCESS","PARAM_ERROR","VALIDATION_ERROR","AUTH_FAILED","FORBIDDEN","NOT_FOUND","INTERNAL_ERROR"],"mappings":"AAAA,WAAW;;;;;;;;;;;;IACEA,YAAY;eAAZA;;IAYAC,eAAe;eAAfA;;IAVAC,WAAW;eAAXA;;IADAC,WAAW;eAAXA;;;AADN,MAAMH,eAAeI,QAAQC,GAAG,CAACC,mBAAmB,IAAI;AACxD,MAAMH,cAAcC,QAAQC,GAAG,CAACE,uBAAuB,IAAI;AAC3D,MAAML,cAAcM,SAASJ,QAAQC,GAAG,CAACI,uBAAuB,IAAI;AAUpE,MAAMR,kBAAkB;IAC7BS,SAAS;IACTC,aAAa;IACbC,kBAAkB;IAClBC,aAAa;IACbC,WAAW;IACXC,WAAW;IACXC,gBAAgB;AAClB"}
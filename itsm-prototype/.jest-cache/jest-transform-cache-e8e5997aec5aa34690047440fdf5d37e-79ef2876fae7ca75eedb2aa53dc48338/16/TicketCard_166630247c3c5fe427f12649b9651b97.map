{"version":3,"sources":["/Users/heidsoft/Downloads/research/itsm/itsm-prototype/src/app/components/TicketCard.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useRef } from \"react\";\nimport {\n  Zap,\n  AlertCircle,\n  Info,\n  ChevronsDown,\n  Clock,\n} from \"lucide-react\";\n\nconst priorityConfig = {\n  P1: { color: \"red\", icon: Zap, label: \"P1 紧急\" },\n  P2: { color: \"orange\", icon: AlertCircle, label: \"P2 高\" },\n  P3: { color: \"yellow\", icon: Info, label: \"P3 中\" },\n  P4: { color: \"blue\", icon: ChevronsDown, label: \"P4 低\" },\n};\n\nconst playAlertSound = () => {\n  const audio = new Audio(\"/alert.mp3\"); // 确保public目录下有alert.mp3文件\n  audio.play().catch((e) => console.error(\"Error playing sound:\", e));\n};\n\ninterface TicketCardProps {\n  id: string | number;\n  title: string;\n  status: string;\n  priority: \"P1\" | \"P2\" | \"P3\" | \"P4\";\n  lastUpdate: string;\n  type?: string;\n}\n\nexport const TicketCard: React.FC<TicketCardProps> = ({\n  id,\n  title,\n  status,\n  priority,\n  lastUpdate,\n  type = \"事件\",\n}) => {\n  const config = priorityConfig[priority] || priorityConfig.P4; // 默认P4\n  const Icon = config.icon;\n\n  const cardRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (priority === \"P1\") {\n      // 播放声音告警\n      playAlertSound();\n      // 添加闪烁动画类\n      cardRef.current?.classList.add(\"animate-pulse-strong\"); // 自定义动画类\n    } else {\n      cardRef.current?.classList.remove(\"animate-pulse-strong\");\n    }\n  }, [priority]);\n\n  return (\n    <div\n      ref={cardRef}\n      className={`relative bg-white p-6 rounded-lg shadow-md border-l-4 \n            border-${config.color}-500 \n            hover:shadow-xl transition-shadow duration-300 ease-in-out \n            flex flex-col justify-between`}\n    >\n      {/* 优先级徽章 */}\n      <div\n        className={`absolute top-3 right-3 px-3 py-1 rounded-full text-xs font-bold \n                bg-${config.color}-100 text-${config.color}-800`}\n      >\n        {config.label}\n      </div>\n\n      <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">{title}</h3>\n      <p className=\"text-sm text-gray-600 mb-4\">\n        {type}ID: {id}\n      </p>\n\n      <div className=\"flex items-center justify-between text-sm text-gray-500\">\n        <div className=\"flex items-center\">\n          <Icon className={`w-4 h-4 mr-2 text-${config.color}-600`} />\n          <span>状态: {status}</span>\n        </div>\n        <div className=\"flex items-center\">\n          <Clock className=\"w-4 h-4 mr-1\" />\n          <span>{lastUpdate}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"names":["TicketCard","priorityConfig","P1","color","icon","Zap","label","P2","AlertCircle","P3","Info","P4","ChevronsDown","playAlertSound","audio","Audio","play","catch","e","console","error","id","title","status","priority","lastUpdate","type","config","Icon","cardRef","useRef","useEffect","current","classList","add","remove","div","ref","className","h3","p","span","Clock"],"mappings":"AAAA;;;;;+BAgCaA;;;eAAAA;;;;+DA9B4B;6BAOlC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEP,MAAMC,iBAAiB;IACrBC,IAAI;QAAEC,OAAO;QAAOC,MAAMC,gBAAG;QAAEC,OAAO;IAAQ;IAC9CC,IAAI;QAAEJ,OAAO;QAAUC,MAAMI,wBAAW;QAAEF,OAAO;IAAO;IACxDG,IAAI;QAAEN,OAAO;QAAUC,MAAMM,iBAAI;QAAEJ,OAAO;IAAO;IACjDK,IAAI;QAAER,OAAO;QAAQC,MAAMQ,yBAAY;QAAEN,OAAO;IAAO;AACzD;AAEA,MAAMO,iBAAiB;IACrB,MAAMC,QAAQ,IAAIC,MAAM,eAAe,0BAA0B;IACjED,MAAME,IAAI,GAAGC,KAAK,CAAC,CAACC,IAAMC,QAAQC,KAAK,CAAC,wBAAwBF;AAClE;AAWO,MAAMlB,aAAwC,CAAC,EACpDqB,EAAE,EACFC,KAAK,EACLC,MAAM,EACNC,QAAQ,EACRC,UAAU,EACVC,OAAO,IAAI,EACZ;IACC,MAAMC,SAAS1B,cAAc,CAACuB,SAAS,IAAIvB,eAAeU,EAAE,EAAE,OAAO;IACrE,MAAMiB,OAAOD,OAAOvB,IAAI;IAExB,MAAMyB,UAAUC,IAAAA,aAAM,EAAiB;IAEvCC,IAAAA,gBAAS,EAAC;QACR,IAAIP,aAAa,MAAM;YACrB,SAAS;YACTX;YACA,UAAU;YACVgB,QAAQG,OAAO,EAAEC,UAAUC,IAAI,yBAAyB,SAAS;QACnE,OAAO;YACLL,QAAQG,OAAO,EAAEC,UAAUE,OAAO;QACpC;IACF,GAAG;QAACX;KAAS;IAEb,qBACE,sBAACY;QACCC,KAAKR;QACLS,WAAW,CAAC;mBACC,EAAEX,OAAOxB,KAAK,CAAC;;yCAEO,CAAC;;0BAGpC,qBAACiC;gBACCE,WAAW,CAAC;mBACD,EAAEX,OAAOxB,KAAK,CAAC,UAAU,EAAEwB,OAAOxB,KAAK,CAAC,IAAI,CAAC;0BAEvDwB,OAAOrB,KAAK;;0BAGf,qBAACiC;gBAAGD,WAAU;0BAA4ChB;;0BAC1D,sBAACkB;gBAAEF,WAAU;;oBACVZ;oBAAK;oBAAKL;;;0BAGb,sBAACe;gBAAIE,WAAU;;kCACb,sBAACF;wBAAIE,WAAU;;0CACb,qBAACV;gCAAKU,WAAW,CAAC,kBAAkB,EAAEX,OAAOxB,KAAK,CAAC,IAAI,CAAC;;0CACxD,sBAACsC;;oCAAK;oCAAKlB;;;;;kCAEb,sBAACa;wBAAIE,WAAU;;0CACb,qBAACI,kBAAK;gCAACJ,WAAU;;0CACjB,qBAACG;0CAAMhB;;;;;;;;AAKjB"}
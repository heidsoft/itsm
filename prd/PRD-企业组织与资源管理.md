# ITSM系统 - 企业组织与资源管理模块 PRD文档

## 文档信息

- **文档版本**: v1.1
- **创建日期**: 2024-12-19
- **产品经理**: [待填写]
- **技术负责人**: [待填写]
- **最后更新**: 2024-12-19
- **更新说明**: v1.1 - 增加多角色需求分析、团队管理模块、角色权限管理

---

## 1. 产品概述

### 1.1 背景

当前ITSM系统在企业管理维度存在功能不完整的问题。虽然系统已实现基础的部门、项目、应用、服务等实体管理，但从产品角度看，这些模块的功能深度和广度都远远不够，无法满足企业级IT服务管理的实际需求。

### 1.2 目标

构建完整的企业组织与资源管理体系，实现：

- **组织架构管理**：完整的部门树形结构、人员归属、权限体系
- **项目管理体系**：项目全生命周期管理、资源分配、进度跟踪
- **应用服务管理**：应用资产清单、依赖关系、健康监控
- **服务目录体系**：IT服务标准化、服务依赖、SLA管理

### 1.3 用户价值

#### 1.3.1 管理角色

- **IT管理者**：清晰掌握企业IT资源全貌，优化资源配置，监控各团队工作负载
- **部门负责人**：管理部门成员，查看部门项目进展，分配部门资源
- **项目经理**：高效管理项目进度，合理分配资源，跟踪里程碑，协调跨团队协作

#### 1.3.2 技术团队角色

- **SRE团队**：监控应用健康状态，管理服务可用性，处理生产故障，优化系统性能
- **DBA团队**：管理数据库资源，监控数据库性能，处理数据库相关工单，优化数据库配置
- **网络团队**：管理网络设备，监控网络状态，处理网络故障，优化网络架构
- **架构团队**：管理应用架构，分析依赖关系，设计系统架构，评审技术方案
- **测试团队**：管理测试任务，跟踪测试进度，分析测试质量，管理测试环境
- **大数据团队**：管理数据平台，监控数据处理任务，优化数据管道，管理数据资源

#### 1.3.3 业务团队角色

- **产线团队**：申请IT服务，提交工单，跟踪工单状态，查看服务文档
- **财务团队**：查看项目预算，分析IT成本，审批预算申请，生成成本报表
- **运营团队**：管理服务目录，处理服务请求，监控SLA达成率，优化服务流程

#### 1.3.4 通用价值

- **跨团队协作**：通过统一的平台实现跨部门、跨团队的信息共享和协作
- **资源可视化**：清晰展示组织架构、项目分布、应用依赖、服务关系
- **数据驱动决策**：通过统计报表和分析工具，支持数据驱动的管理决策

---

## 2. 现状分析

### 2.1 后端实现情况

#### ✅ 已实现功能

**部门管理（Department）**

- 基础CRUD操作（创建、查询、更新、删除）
- 树形结构支持（父子部门关系）
- 租户隔离
- 关联关系：用户、工单、工作流、项目、标签

**项目管理（Project）**

- 基础CRUD操作
- 部门关联
- 状态管理（active, completed, suspended）
- 时间范围（开始日期、结束日期）

**应用管理（Application）**

- 基础CRUD操作
- 项目关联
- 微服务管理（创建、查询、更新、删除）
- 应用类型（web, mobile, backend, desktop）
- 状态管理（active, inactive, deprecated）

**服务管理（Service）**

- 服务目录CRUD
- 服务请求管理
- 服务状态流转

**团队管理（Team）**

- 基础CRUD操作（创建、查询、更新、删除）
- 团队成员管理（添加/移除成员）
- 租户隔离
- 关联关系：用户、标签

#### ❌ 功能缺失

**部门管理**

- 部门成员管理（添加/移除成员）
- 部门统计信息（成员数、工单数、项目数）
- 部门权限配置
- 部门预算管理
- 部门负责人变更历史
- 部门组织架构图可视化

**项目管理**

- 项目详情页（缺少）
- 项目进度跟踪（进度百分比计算）
- 项目里程碑管理
- 项目资源分配（人员、预算）
- 项目关联工单统计
- 项目看板视图
- 项目文档管理
- 项目风险跟踪
- 项目报表分析

**应用管理**

- 应用详情页（缺少）
- 应用版本管理
- 应用依赖关系图
- 应用健康监控集成
- 应用部署历史
- 应用配置管理
- 应用性能指标
- 应用故障统计
- 应用与CMDB集成

**服务管理**

- 服务依赖关系
- 服务健康度监控
- 服务SLA配置
- 服务版本管理
- 服务文档管理
- 服务使用统计
- 服务成本分析

**团队管理**

- 团队详情页（缺少）
- 团队统计信息（成员数、工单数、项目数）
- 团队角色管理（团队负责人、核心成员、普通成员）
- 团队权限配置
- 团队工作负载统计
- 团队技能标签管理
- 团队与项目/应用的关联管理
- 团队看板视图

### 2.2 前端实现情况

#### ✅ 已实现功能

**部门管理页面** (`/enterprise/departments`)

- 部门列表展示（树形表格）
- 创建/编辑部门（基础表单）
- 删除部门
- 部门树选择器

**项目管理页面** (`/projects`)

- 项目列表展示
- 创建/编辑项目（基础表单）
- 项目状态显示

**应用管理页面** (`/applications`)

- 应用列表展示
- 微服务列表展示
- 创建/编辑应用
- 创建/编辑微服务

**服务目录页面** (`/service-catalog`)

- 服务目录列表
- 服务请求表单

#### ❌ 功能缺失与问题

**部门管理**

- ❌ 负责人显示为ID，未解析用户名
- ❌ 编辑功能不完整（缺少更新逻辑）
- ❌ 缺少部门成员管理界面
- ❌ 缺少部门统计卡片
- ❌ 缺少部门详情页
- ❌ 缺少组织架构图可视化
- ❌ 表单验证不完整

**项目管理**

- ❌ 部门显示为ID，未解析部门名称
- ❌ 负责人显示为ID，未解析用户名
- ❌ 删除功能未实现（只有提示）
- ❌ 缺少项目详情页
- ❌ 缺少项目进度可视化
- ❌ 缺少项目看板
- ❌ 缺少项目统计信息
- ❌ 项目选择器使用硬编码数据

**应用管理**

- ❌ 删除功能未实现
- ❌ 项目显示为ID，未解析项目名称
- ❌ 缺少应用详情页
- ❌ 缺少应用依赖关系图
- ❌ 缺少应用监控集成
- ❌ 项目选择器使用硬编码数据

**服务管理**

- ❌ 服务详情页功能不完整
- ❌ 缺少服务依赖关系展示
- ❌ 缺少服务健康度监控
- ❌ 缺少服务使用统计

**团队管理页面** (`/enterprise/teams`)

- ✅ 团队列表展示
- ✅ 创建/编辑团队（基础表单）
- ⚠️ 团队成员管理（基础功能，缺少详情）
- ❌ 缺少团队详情页
- ❌ 缺少团队统计卡片
- ❌ 缺少团队工作负载视图
- ❌ 缺少团队技能管理
- ❌ 负责人显示为ID，未解析用户名

---

## 3. 功能需求

### 3.1 部门管理模块增强

#### 3.1.1 部门详情页

**功能描述**
提供部门完整信息展示和管理入口。

**功能点**

1. **基本信息展示**
   - 部门名称、代码、描述
   - 部门负责人（显示姓名，可点击查看用户详情）
   - 上级部门（显示名称，可点击跳转）
   - 创建时间、更新时间
   - 部门状态（启用/禁用）

2. **统计信息卡片**
   - 部门成员总数
   - 活跃成员数
   - 部门工单数（按状态分类）
   - 部门项目数（按状态分类）
   - 部门服务数

3. **成员管理**
   - 成员列表（表格展示）
   - 添加成员（用户选择器）
   - 移除成员
   - 成员角色设置（部门管理员、普通成员）
   - 成员权限配置

4. **关联资源**
   - 部门项目列表
   - 部门工单列表
   - 部门工作流列表
   - 部门标签列表

5. **操作历史**
   - 部门变更记录
   - 负责人变更历史
   - 成员变更历史

**页面路径**: `/enterprise/departments/[id]`

**优先级**: P0

---

#### 3.1.2 组织架构图

**功能描述**
可视化展示企业组织架构树形结构。

**功能点**

1. **树形图展示**
   - 支持展开/折叠
   - 节点显示部门名称、负责人、成员数
   - 支持拖拽调整部门层级（需权限）

2. **交互功能**
   - 点击节点跳转部门详情
   - 右键菜单（查看详情、编辑、添加子部门）
   - 搜索定位部门
   - 导出组织架构图（PNG/PDF）

3. **统计信息**
   - 总部门数
   - 总成员数
   - 部门层级深度

**页面路径**: `/enterprise/departments/org-chart`

**优先级**: P1

---

#### 3.1.3 部门统计报表

**功能描述**
提供部门维度的数据统计和分析。

**功能点**

1. **工单统计**
   - 部门工单趋势（按时间）
   - 工单状态分布
   - 工单优先级分布
   - 平均处理时长

2. **项目统计**
   - 部门项目状态分布
   - 项目进度统计
   - 项目资源占用

3. **人员统计**
   - 部门人员增长趋势
   - 人员角色分布
   - 人员活跃度

**页面路径**: `/enterprise/departments/[id]/statistics`

**优先级**: P2

---

### 3.2 项目管理模块增强

#### 3.2.1 项目详情页

**功能描述**
提供项目完整信息展示和管理功能。

**功能点**

1. **基本信息**
   - 项目名称、代码、描述
   - 所属部门（显示名称，可跳转）
   - 项目经理（显示姓名，可查看详情）
   - 项目状态、优先级
   - 时间范围（开始日期、结束日期、计划完成日期）
   - 项目预算

2. **进度跟踪**
   - 进度百分比（自动计算或手动设置）
   - 进度条可视化
   - 里程碑列表
   - 里程碑进度甘特图

3. **资源管理**
   - 项目成员列表（角色、工作量）
   - 添加/移除成员
   - 资源分配日历视图
   - 预算使用情况

4. **关联工单**
   - 项目关联工单列表
   - 工单统计（按状态、优先级）
   - 快速创建项目工单

5. **关联应用**
   - 项目下的应用列表
   - 应用状态统计

6. **项目文档**
   - 文档列表
   - 上传/下载文档
   - 文档版本管理

7. **风险跟踪**
   - 风险列表
   - 风险等级标识
   - 风险处理记录

**页面路径**: `/projects/[id]`

**优先级**: P0

---

#### 3.2.2 项目看板

**功能描述**
提供项目任务看板视图，支持敏捷项目管理。

**功能点**

1. **看板列**
   - 待办（Backlog）
   - 进行中（In Progress）
   - 测试中（Testing）
   - 已完成（Done）

2. **任务卡片**
   - 任务标题、描述
   - 负责人、优先级
   - 截止日期
   - 标签

3. **交互功能**
   - 拖拽任务卡片改变状态
   - 点击卡片查看/编辑详情
   - 快速创建任务
   - 批量操作

4. **筛选和排序**
   - 按负责人筛选
   - 按优先级排序
   - 按截止日期排序

**页面路径**: `/projects/[id]/kanban`

**优先级**: P1

---

#### 3.2.3 项目里程碑管理

**功能描述**
管理项目关键节点和里程碑。

**功能点**

1. **里程碑列表**
   - 里程碑名称、描述
   - 计划完成日期
   - 实际完成日期
   - 状态（未开始、进行中、已完成、延期）

2. **里程碑创建/编辑**
   - 基本信息表单
   - 关联任务选择
   - 依赖关系设置

3. **里程碑可视化**
   - 时间轴视图
   - 甘特图集成

**页面路径**: `/projects/[id]/milestones`

**优先级**: P1

---

#### 3.2.4 项目报表

**功能描述**
提供项目维度的数据分析和报表。

**功能点**

1. **进度报表**
   - 项目进度趋势
   - 里程碑完成情况
   - 任务完成率

2. **资源报表**
   - 人员工作量统计
   - 预算使用情况
   - 资源利用率

3. **质量报表**
   - 缺陷统计
   - 测试覆盖率
   - 代码质量指标

4. **导出功能**
   - 导出Excel报表
   - 导出PDF报告

**页面路径**: `/projects/[id]/reports`

**优先级**: P2

---

### 3.3 应用管理模块增强

#### 3.3.1 应用详情页

**功能描述**
提供应用完整信息展示和管理功能。

**功能点**

1. **基本信息**
   - 应用名称、代码、描述
   - 应用类型、状态
   - 所属项目（显示名称，可跳转）
   - 负责人（显示姓名）
   - 创建时间、更新时间

2. **技术信息**
   - 技术栈（语言、框架）
   - 运行环境
   - 部署信息
   - 配置信息

3. **微服务列表**
   - 微服务列表展示
   - 微服务状态
   - 快速创建微服务

4. **依赖关系**
   - 依赖的应用列表
   - 被依赖的应用列表
   - 依赖关系图可视化

5. **监控集成**
   - 应用健康状态
   - 性能指标（响应时间、吞吐量）
   - 错误率统计
   - 监控图表

6. **版本管理**
   - 版本列表
   - 版本信息（版本号、发布时间、发布说明）
   - 版本对比

7. **关联工单**
   - 应用相关工单列表
   - 故障统计

8. **文档管理**
   - 应用文档列表
   - API文档
   - 部署文档

**页面路径**: `/applications/[id]`

**优先级**: P0

---

#### 3.3.2 应用依赖关系图

**功能描述**
可视化展示应用之间的依赖关系。

**功能点**

1. **关系图展示**
   - 节点表示应用
   - 边表示依赖关系
   - 支持缩放、拖拽
   - 支持搜索定位

2. **交互功能**
   - 点击节点查看应用详情
   - 高亮依赖路径
   - 筛选特定应用的影响范围

3. **依赖分析**
   - 循环依赖检测
   - 依赖层级分析
   - 关键依赖识别

**页面路径**: `/applications/dependency-graph`

**优先级**: P1

---

#### 3.3.3 应用监控仪表盘

**功能描述**
集成应用监控数据，提供应用健康度视图。

**功能点**

1. **健康度指标**
   - 应用可用性
   - 响应时间
   - 错误率
   - 吞吐量

2. **实时监控**
   - 实时指标图表
   - 告警列表
   - 异常检测

3. **历史分析**
   - 性能趋势
   - 故障历史
   - 容量规划

**页面路径**: `/applications/[id]/monitoring`

**优先级**: P1

---

### 3.4 服务管理模块增强

#### 3.4.1 服务详情页

**功能描述**
提供服务完整信息展示和管理功能。

**功能点**

1. **基本信息**
   - 服务名称、描述
   - 服务分类、状态
   - 服务级别（SLA配置）
   - 交付时间
   - 服务负责人

2. **服务依赖**
   - 依赖的服务列表
   - 被依赖的服务列表
   - 依赖关系图

3. **服务健康度**
   - 服务可用性
   - SLA达成率
   - 服务请求统计
   - 平均处理时长

4. **服务文档**
   - 服务说明文档
   - 使用指南
   - API文档（如适用）

5. **服务请求**
   - 服务请求列表
   - 请求统计
   - 快速创建服务请求

6. **版本管理**
   - 服务版本列表
   - 版本变更记录

**页面路径**: `/service-catalog/[id]`

**优先级**: P0

---

#### 3.4.2 服务依赖关系管理

**功能描述**
管理服务之间的依赖关系，支持依赖分析。

**功能点**

1. **依赖关系配置**
   - 添加依赖关系
   - 删除依赖关系
   - 依赖类型（强依赖、弱依赖）

2. **依赖分析**
   - 依赖链分析
   - 影响范围分析
   - 依赖健康度检查

3. **可视化展示**
   - 依赖关系图
   - 依赖层级树

**页面路径**: `/service-catalog/dependencies`

**优先级**: P1

---

#### 3.4.3 服务使用统计

**功能描述**
提供服务使用情况的数据统计和分析。

**功能点**

1. **使用统计**
   - 服务请求量趋势
   - 用户使用分布
   - 使用频率分析

2. **性能统计**
   - 平均处理时长
   - SLA达成率
   - 满意度评分

3. **成本分析**
   - 服务成本统计
   - 成本趋势分析

**页面路径**: `/service-catalog/[id]/statistics`

**优先级**: P2

---

### 3.5 团队管理模块增强

#### 3.5.1 团队详情页

**功能描述**
提供团队完整信息展示和管理功能，支持不同专业团队的特殊需求。

**功能点**

1. **基本信息展示**
   - 团队名称、代码、描述
   - 团队负责人（显示姓名，可查看详情）
   - 所属部门（显示名称，可跳转）
   - 团队类型（SRE、DBA、网络、架构、测试、大数据等）
   - 团队状态（活跃、暂停、解散）
   - 创建时间、更新时间

2. **统计信息卡片**
   - 团队成员总数
   - 活跃成员数
   - 团队负责的工单数（按状态分类）
   - 团队参与的项目数
   - 团队负责的应用数
   - 团队工作负载（平均工单数/人）

3. **成员管理**
   - 成员列表（表格展示，显示角色、技能、工作负载）
   - 添加成员（用户选择器，支持批量添加）
   - 移除成员
   - 成员角色设置（团队负责人、核心成员、普通成员、实习生）
   - 成员技能标签管理
   - 成员工作负载查看

4. **团队能力标签**
   - 技能标签列表（如：Kubernetes、MySQL、网络架构、性能优化等）
   - 添加/删除技能标签
   - 团队成员技能匹配度分析

5. **关联资源**
   - 团队负责的工单列表（可按状态、优先级筛选）
   - 团队参与的项目列表
   - 团队负责的应用列表
   - 团队负责的服务列表

6. **工作负载分析**
   - 成员工作负载分布图
   - 工单分配统计
   - 工作负载趋势分析
   - 负载均衡建议

7. **团队看板**
   - 当前进行中的工单看板
   - 按优先级/状态分组
   - 快速分配工单
   - 工单状态流转

**页面路径**: `/enterprise/teams/[id]`

**优先级**: P0

---

#### 3.5.2 专业团队特色功能

**功能描述**
针对不同专业团队提供定制化的功能视图和管理工具。

**SRE团队专属功能**

1. **服务监控视图**
   - 负责服务的健康状态总览
   - 服务SLA达成率统计
   - 故障响应时间分析
   - 服务可用性趋势

2. **故障管理**
   - 故障工单快速创建
   - 故障影响范围分析
   - 故障处理时间统计
   - 故障复盘记录

3. **容量规划**
   - 资源使用趋势
   - 容量预警
   - 扩容建议

**DBA团队专属功能**

1. **数据库资源管理**
   - 负责的数据库列表
   - 数据库性能监控
   - 数据库容量统计
   - 慢查询分析

2. **数据库工单管理**
   - 数据库变更工单
   - 数据库备份工单
   - 数据库优化工单
   - 工单优先级管理

**网络团队专属功能**

1. **网络设备管理**
   - 负责的网络设备列表
   - 网络拓扑视图
   - 网络性能监控
   - 网络故障统计

2. **网络工单管理**
   - 网络配置变更工单
   - 网络故障处理工单
   - 网络优化工单

**架构团队专属功能**

1. **架构视图**
   - 应用架构图
   - 系统依赖关系图
   - 架构评审记录
   - 架构决策记录（ADR）

2. **技术债务管理**
   - 技术债务列表
   - 债务优先级评估
   - 债务处理计划

**测试团队专属功能**

1. **测试任务管理**
   - 测试任务看板
   - 测试进度跟踪
   - 测试用例管理
   - 缺陷统计

2. **测试环境管理**
   - 测试环境列表
   - 环境使用情况
   - 环境申请/释放

**大数据团队专属功能**

1. **数据平台管理**
   - 数据平台列表
   - 数据处理任务监控
   - 数据管道状态
   - 数据质量监控

2. **数据资源管理**
   - 数据存储统计
   - 计算资源使用
   - 数据访问权限管理

**页面路径**: `/enterprise/teams/[id]/specialized`

**优先级**: P1

---

#### 3.5.3 团队工作负载管理

**功能描述**
帮助团队负责人合理分配工作，避免成员过载，提升团队效率。

**功能点**

1. **工作负载视图**
   - 成员当前工单数统计
   - 成员工作负载热力图
   - 负载不均衡预警
   - 历史负载趋势

2. **智能分配建议**
   - 基于技能匹配的工单分配建议
   - 基于负载均衡的分配建议
   - 基于历史表现的分配建议

3. **负载均衡工具**
   - 一键重新分配工单
   - 批量转移工单
   - 负载均衡算法配置

**页面路径**: `/enterprise/teams/[id]/workload`

**优先级**: P1

---

#### 3.5.4 团队技能矩阵

**功能描述**
管理团队技能，支持技能匹配和团队能力分析。

**功能点**

1. **技能标签管理**
   - 技能分类（技术栈、工具、认证等）
   - 技能等级（初级、中级、高级、专家）
   - 技能认证记录

2. **成员技能矩阵**
   - 矩阵视图展示
   - 技能缺口分析
   - 技能培训建议

3. **技能匹配**
   - 工单技能需求匹配
   - 项目技能需求匹配
   - 自动推荐合适成员

**页面路径**: `/enterprise/teams/[id]/skills`

**优先级**: P2

---

### 3.6 角色权限管理模块

#### 3.6.1 角色定义与权限配置

**功能描述**
为不同角色定义权限，支持细粒度的权限控制。

**系统角色定义**

1. **管理角色**
   - IT管理者：系统全权限
   - 部门负责人：部门管理权限
   - 项目经理：项目管理权限

2. **技术团队角色**
   - SRE工程师：服务监控、故障处理权限
   - DBA工程师：数据库管理权限
   - 网络工程师：网络设备管理权限
   - 架构师：架构设计、评审权限
   - 测试工程师：测试任务管理权限
   - 大数据工程师：数据平台管理权限

3. **业务团队角色**
   - 产线用户：服务申请、工单提交权限
   - 财务人员：预算查看、成本分析权限
   - 运营人员：服务目录管理权限

**权限配置功能**

1. **权限矩阵**
   - 角色-权限配置表
   - 权限继承关系
   - 权限冲突检测

2. **数据权限**
   - 部门数据隔离
   - 项目数据权限
   - 应用数据权限
   - 服务数据权限

3. **操作权限**
   - 查看权限
   - 创建权限
   - 编辑权限
   - 删除权限
   - 审批权限

**页面路径**: `/admin/roles-permissions`

**优先级**: P0

---

#### 3.6.2 团队角色管理

**功能描述**
在团队维度管理成员角色，支持团队内部权限分配。

**功能点**

1. **团队角色定义**
   - 团队负责人
   - 核心成员
   - 普通成员
   - 实习生

2. **角色权限配置**
   - 团队内工单分配权限
   - 团队内数据查看权限
   - 团队配置修改权限

3. **角色分配**
   - 批量设置成员角色
   - 角色变更历史
   - 角色权限继承

**页面路径**: `/enterprise/teams/[id]/roles`

**优先级**: P1

---

## 4. 非功能需求

### 4.1 性能要求

- 部门树加载时间 < 1秒（1000个部门以内）
- 项目列表加载时间 < 2秒（100个项目以内）
- 应用依赖关系图渲染时间 < 3秒（500个节点以内）
- 页面切换响应时间 < 500ms

### 4.2 可用性要求

- 系统可用性 ≥ 99.5%
- 支持多租户数据隔离
- 支持权限控制（RBAC）

### 4.3 兼容性要求

- 支持主流浏览器（Chrome、Firefox、Safari、Edge）
- 支持移动端响应式布局
- 支持国际化（i18n）

### 4.4 安全性要求

- 所有API接口需要认证
- 敏感操作需要权限验证
- 数据变更需要审计日志
- 支持数据加密存储

---

## 5. 技术实现方案

### 5.1 后端API增强

#### 5.1.1 部门管理API

**新增接口**

```
GET    /api/v1/departments/:id                    # 获取部门详情
GET    /api/v1/departments/:id/members            # 获取部门成员列表
POST   /api/v1/departments/:id/members            # 添加部门成员
DELETE /api/v1/departments/:id/members/:user_id  # 移除部门成员
GET    /api/v1/departments/:id/statistics         # 获取部门统计
GET    /api/v1/departments/org-chart              # 获取组织架构图数据
```

#### 5.1.2 项目管理API

**新增接口**

```
GET    /api/v1/projects/:id                       # 获取项目详情
GET    /api/v1/projects/:id/members               # 获取项目成员
POST   /api/v1/projects/:id/members               # 添加项目成员
DELETE /api/v1/projects/:id/members/:user_id     # 移除项目成员
GET    /api/v1/projects/:id/milestones            # 获取里程碑列表
POST   /api/v1/projects/:id/milestones            # 创建里程碑
GET    /api/v1/projects/:id/tasks                 # 获取任务列表（看板）
POST   /api/v1/projects/:id/tasks                 # 创建任务
PUT    /api/v1/projects/:id/tasks/:task_id/status  # 更新任务状态
GET    /api/v1/projects/:id/statistics            # 获取项目统计
GET    /api/v1/projects/:id/reports                # 获取项目报表
```

#### 5.3.3 应用管理API

**新增接口**

```
GET    /api/v1/applications/:id                   # 获取应用详情
GET    /api/v1/applications/:id/dependencies      # 获取依赖关系
POST   /api/v1/applications/:id/dependencies      # 添加依赖关系
GET    /api/v1/applications/dependency-graph      # 获取依赖关系图
GET    /api/v1/applications/:id/monitoring        # 获取监控数据
GET    /api/v1/applications/:id/versions          # 获取版本列表
POST   /api/v1/applications/:id/versions          # 创建版本
```

#### 5.1.4 服务管理API

**新增接口**

```
GET    /api/v1/service-catalogs/:id               # 获取服务详情
GET    /api/v1/service-catalogs/:id/dependencies  # 获取服务依赖
POST   /api/v1/service-catalogs/:id/dependencies   # 添加服务依赖
GET    /api/v1/service-catalogs/:id/statistics    # 获取服务统计
GET    /api/v1/service-catalogs/dependency-graph  # 获取依赖关系图
```

#### 5.1.5 团队管理API

**新增接口**

```
GET    /api/v1/teams/:id                          # 获取团队详情
GET    /api/v1/teams/:id/members                  # 获取团队成员列表
POST   /api/v1/teams/:id/members                  # 添加团队成员
DELETE /api/v1/teams/:id/members/:user_id        # 移除团队成员
PUT    /api/v1/teams/:id/members/:user_id/role   # 更新成员角色
GET    /api/v1/teams/:id/statistics              # 获取团队统计
GET    /api/v1/teams/:id/workload                # 获取工作负载
GET    /api/v1/teams/:id/skills                  # 获取技能矩阵
POST   /api/v1/teams/:id/skills                  # 添加技能标签
GET    /api/v1/teams/:id/tickets                 # 获取团队工单
GET    /api/v1/teams/:id/projects                # 获取团队项目
GET    /api/v1/teams/:id/applications            # 获取团队应用
GET    /api/v1/teams/:id/kanban                  # 获取团队看板
POST   /api/v1/teams/:id/assign-ticket           # 分配工单
```

#### 5.1.6 角色权限管理API

**新增接口**

```
GET    /api/v1/roles                              # 获取角色列表
POST   /api/v1/roles                              # 创建角色
PUT    /api/v1/roles/:id                         # 更新角色
GET    /api/v1/roles/:id/permissions             # 获取角色权限
PUT    /api/v1/roles/:id/permissions             # 更新角色权限
GET    /api/v1/permissions                       # 获取权限列表
GET    /api/v1/users/:id/permissions             # 获取用户权限
```

### 5.2 前端实现方案

#### 5.2.1 组件库扩展

**新增组件**

- `DepartmentDetail` - 部门详情组件
- `OrgChart` - 组织架构图组件
- `ProjectDetail` - 项目详情组件
- `ProjectKanban` - 项目看板组件
- `MilestoneTimeline` - 里程碑时间轴组件
- `ApplicationDetail` - 应用详情组件
- `DependencyGraph` - 依赖关系图组件
- `ServiceDetail` - 服务详情组件
- `TeamDetail` - 团队详情组件
- `TeamWorkload` - 团队工作负载组件
- `TeamSkillsMatrix` - 团队技能矩阵组件
- `TeamKanban` - 团队看板组件
- `RolePermissionManager` - 角色权限管理组件
- `SpecializedTeamView` - 专业团队视图组件

#### 5.2.2 状态管理

- 使用Zustand管理部门、项目、应用、服务的状态
- 使用React Query管理API数据缓存

#### 5.2.3 可视化方案

- 组织架构图：使用 `@ant-design/charts` 或 `react-d3-tree`
- 依赖关系图：使用 `react-flow` 或 `vis-network`
- 甘特图：使用 `gantt-task-react`

---

## 6. 开发计划

### 6.1 第一阶段（P0功能）- 4周

**目标**: 完成核心详情页和基础功能

**任务清单**

1. 部门详情页开发（1周）
   - 基本信息展示
   - 成员管理
   - 统计信息

2. 项目详情页开发（1.5周）
   - 基本信息展示
   - 进度跟踪
   - 资源管理
   - 关联工单

3. 应用详情页开发（1周）
   - 基本信息展示
   - 微服务列表
   - 技术信息

4. 服务详情页开发（0.5周）
   - 基本信息展示
   - 服务健康度

5. 团队详情页开发（1周）
   - 基本信息展示
   - 成员管理
   - 统计信息
   - 工作负载视图

6. 角色权限管理开发（0.5周）
   - 角色定义
   - 权限配置
   - 权限矩阵

### 6.2 第二阶段（P1功能）- 3周

**目标**: 完成可视化和管理增强功能

**任务清单**

1. 组织架构图开发（1周）
2. 项目看板开发（1周）
3. 应用依赖关系图开发（1周）
4. 专业团队特色功能开发（1周）
   - SRE团队视图
   - DBA团队视图
   - 网络团队视图
   - 架构团队视图
   - 测试团队视图
   - 大数据团队视图

### 6.3 第三阶段（P2功能）- 2周

**目标**: 完成统计报表功能

**任务清单**

1. 部门统计报表（0.5周）
2. 项目报表（1周）
3. 服务使用统计（0.5周）
4. 团队技能矩阵（0.5周）

---

## 7. 验收标准

### 7.1 功能验收

- [ ] 所有P0功能点已实现并通过测试
- [ ] 所有P1功能点已实现并通过测试
- [ ] 所有P2功能点已实现并通过测试
- [ ] 前后端API对接完成
- [ ] 数据展示正确（无ID显示，全部解析为名称）

### 7.2 性能验收

- [ ] 页面加载时间符合性能要求
- [ ] 大数据量场景下性能稳定
- [ ] 图表渲染流畅

### 7.3 用户体验验收

- [ ] 界面美观、交互流畅
- [ ] 错误提示友好
- [ ] 操作反馈及时
- [ ] 移动端适配良好

---

## 8. 风险评估

### 8.1 技术风险

**风险**: 依赖关系图在大数据量下性能问题
**应对**: 使用虚拟滚动、数据分页、懒加载

**风险**: 组织架构图拖拽调整可能影响数据一致性
**应对**: 增加数据校验、事务处理、操作确认

### 8.2 进度风险

**风险**: 功能复杂度超出预期
**应对**: 分阶段交付，优先核心功能

**风险**: 前后端对接时间不足
**应对**: 提前定义API规范，并行开发

### 8.3 数据风险

**风险**: 历史数据迁移问题
**应对**: 提供数据迁移脚本，支持增量迁移

---

## 9. 后续规划

### 9.1 功能扩展

- 部门预算管理
- 项目成本核算
- 应用性能优化建议
- 服务自动化部署

### 9.2 集成扩展

- 与CMDB深度集成
- 与监控系统集成（Prometheus、Grafana）
- 与项目管理工具集成（Jira、Confluence）
- 与代码仓库集成（GitLab、GitHub）

---

## 10. 附录

### 10.1 术语表

- **部门（Department）**: 企业内部的组织单元，具有层级结构
- **项目（Project）**: 有明确目标和时间范围的工作任务
- **应用（Application）**: 企业内部的软件应用系统
- **服务（Service）**: IT服务目录中的标准化服务
- **微服务（Microservice）**: 应用内部的微服务组件
- **团队（Team）**: 跨部门的专业团队，如SRE团队、DBA团队等
- **角色（Role）**: 用户在系统中的角色，决定其权限范围
- **工作负载（Workload）**: 团队成员当前承担的工作量
- **技能矩阵（Skills Matrix）**: 团队成员技能的可视化展示

### 10.3 角色定义说明

#### 技术团队角色

- **SRE（Site Reliability Engineering）团队**: 负责系统可靠性、监控、故障处理
- **DBA（Database Administrator）团队**: 负责数据库管理、优化、备份
- **网络团队**: 负责网络设备、网络架构、网络故障处理
- **架构团队**: 负责系统架构设计、技术方案评审、架构决策
- **测试团队**: 负责测试任务、测试环境、质量保证
- **大数据团队**: 负责数据平台、数据处理、数据分析

#### 业务团队角色

- **产线团队**: 业务部门用户，使用IT服务
- **财务团队**: 负责预算管理、成本分析
- **运营团队**: 负责服务运营、流程优化

#### 管理角色

- **项目经理**: 负责项目全生命周期管理
- **部门负责人**: 负责部门管理和资源分配
- **IT管理者**: 负责IT整体规划和管理

### 10.2 参考文档

- 后端API文档：`/itsm-backend/docs/swagger.json`
- 前端组件库文档：Ant Design Pro
- 数据库设计文档：Ent Schema定义

---

**文档结束**
